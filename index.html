<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>blackhouse</title>
<style title="Twine CSS">@keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@keyframes rumble{25%{top:-0.1em}75%{top:0.1em}0%,to{top:0px}}@keyframes shudder{25%{left:0.1em}75%{left:-0.1em}0%,to{left:0px}}@keyframes buoy{25%{top:0.25em}75%{top:-0.25em}0%,to{top:0px}}@keyframes sway{25%{left:0.25em}75%{left:-0.25em}0%,to{left:0px}}@keyframes pulse{0%{transform:scale(0, 0)}20%{transform:scale(1.2, 1.2)}40%{transform:scale(0.9, 0.9)}60%{transform:scale(1.05, 1.05)}80%{transform:scale(0.925, 0.925)}to{transform:scale(1, 1)}}@keyframes zoom-in{0%{transform:scale(0, 0)}to{transform:scale(1, 1)}}@keyframes shudder-in{0%, to{transform:translateX(0em)}5%, 25%, 45%{transform:translateX(-1em)}15%, 35%, 55%{transform:translateX(1em)}65%{transform:translateX(-0.6em)}75%{transform:translateX(0.6em)}85%{transform:translateX(-0.2em)}95%{transform:translateX(0.2em)}}@keyframes rumble-in{0%, to{transform:translateY(0em)}5%, 25%, 45%{transform:translateY(-1em)}15%, 35%, 55%{transform:translateY(1em)}65%{transform:translateY(-0.6em)}75%{transform:translateY(0.6em)}85%{transform:translateY(-0.2em)}95%{transform:translateY(0.2em)}}@keyframes fidget{0%, 8.1%, 82.1%, 31.1%, 38.1%, 44.1%, 40.1%, 47.1%, 74.1%, 16.1%, 27.1%, 72.1%, 24.1%, 95.1%, 6.1%, 36.1%, 20.1%, 4.1%, 91.1%, 14.1%, 87.1%, to{left:0px;top:0px}8%, 82%, 31%, 38%, 44%{left:-1px}40%, 47%, 74%, 16%, 27%{left:1px}72%, 24%, 95%, 6%, 36%{top:-1px}20%, 4%, 91%, 14%, 87%{top:1px}}@keyframes slide-right{0%{transform:translateX(-100vw)}}@keyframes slide-left{0%{transform:translateX(100vw)}}@keyframes slide-up{0%{transform:translateY(100vh)}}@keyframes slide-down{0%{transform:translateY(-100vh)}}@keyframes fade-right{0%{opacity:0;transform:translateX(-1em)}to{opacity:1}}@keyframes fade-left{0%{opacity:0;transform:translateX(1em)}to{opacity:1}}@keyframes fade-up{0%{opacity:0;transform:translateY(1em)}to{opacity:1}}@keyframes fade-down{0%{opacity:0;transform:translateY(-1em)}to{opacity:1}}@keyframes flicker{0%,29%,31%,63%,65%,77%,79%,86%,88%,91%,93%{opacity:0}30%{opacity:0.2}64%{opacity:0.4}78%{opacity:0.6}87%{opacity:0.8}92%, to{opacity:1}}@keyframes blur{0%{filter:blur(2rem);opacity:0}25%{opacity:1}to{filter:blur(0rem);opacity:1}}.dom-debug-mode tw-story,.dom-debug-mode tw-passage,.dom-debug-mode tw-sidebar,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{outline:1px solid #f5a3da;min-height:32px;display:block !important}.dom-debug-mode tw-story::before,.dom-debug-mode tw-passage::before,.dom-debug-mode tw-sidebar::before,.dom-debug-mode tw-include::before,.dom-debug-mode tw-hook::before,.dom-debug-mode tw-expression::before,.dom-debug-mode tw-link::before,.dom-debug-mode tw-dialog::before,.dom-debug-mode tw-columns::before,.dom-debug-mode tw-column::before,.dom-debug-mode tw-align::before{position:absolute;top:0;left:0;height:16px;background-color:#f5a3da;color:black;font-size:16px;font-weight:normal;font-style:normal;font-family:monospace;display:inline-block;line-height:100%;white-space:pre;z-index:999997}.dom-debug-mode tw-story:hover,.dom-debug-mode tw-passage:hover,.dom-debug-mode tw-sidebar:hover,.dom-debug-mode tw-include:hover,.dom-debug-mode tw-hook:hover,.dom-debug-mode tw-expression:hover,.dom-debug-mode tw-link:hover,.dom-debug-mode tw-dialog:hover,.dom-debug-mode tw-columns:hover,.dom-debug-mode tw-column:hover,.dom-debug-mode tw-align:hover{outline:1px solid #fc9}.dom-debug-mode tw-story:hover::before,.dom-debug-mode tw-passage:hover::before,.dom-debug-mode tw-sidebar:hover::before,.dom-debug-mode tw-include:hover::before,.dom-debug-mode tw-hook:hover::before,.dom-debug-mode tw-expression:hover::before,.dom-debug-mode tw-link:hover::before,.dom-debug-mode tw-dialog:hover::before,.dom-debug-mode tw-columns:hover::before,.dom-debug-mode tw-column:hover::before,.dom-debug-mode tw-align:hover::before{background-color:#fc9;transition:background-color 1s}.dom-debug-mode tw-passage,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{padding:1em;margin:0}.dom-debug-mode tw-story::before{content:'<tw-story tags="' attr(tags) '">'}.dom-debug-mode tw-passage::before{top:-16px;content:'<tw-passage tags="' attr(tags) '">'}.dom-debug-mode tw-sidebar::before{top:-16px;content:"<tw-sidebar>"}.dom-debug-mode tw-hook::before{content:'<tw-hook name="' attr(name) '">'}.dom-debug-mode tw-expression::before{content:'<tw-expression name="' attr(name) '">'}.dom-debug-mode tw-link::before{content:'<tw-link name="' attr(name) '">'}.dom-debug-mode tw-dialog::before{content:"<tw-dialog>"}.dom-debug-mode tw-columns::before{content:"<tw-columns>"}.dom-debug-mode tw-column::before{content:"<tw-column>"}.dom-debug-mode tw-align::before{content:"<tw-align>"}.dom-debug-mode tw-include::before{content:'<tw-include type="' attr(type) '" name="' attr(name) '">'}.debug-mode tw-expression{display:inline-block !important}.debug-mode tw-expression[type=variable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"$" attr(name)}.debug-mode tw-expression[type=tempVariable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"_" attr(name)}.debug-mode tw-expression[return=boolean]{background-color:rgba(179,179,179,0.2)}.debug-mode tw-expression[return=array]{background-color:rgba(255,102,102,0.2)}.debug-mode tw-expression[return=dataset]{background-color:rgba(255,128,0,0.2)}.debug-mode tw-expression[return=number]{background-color:rgba(255,179,102,0.2)}.debug-mode tw-expression[return=datamap]{background-color:rgba(255,255,102,0.2)}.debug-mode tw-expression[return=changer]{background-color:rgba(179,255,102,0.2)}.debug-mode tw-expression[return=lambda]{background-color:rgba(102,255,102,0.2)}.debug-mode tw-expression[return=hookname]{background-color:rgba(102,255,204,0.2)}.debug-mode tw-expression[return=string]{background-color:rgba(102,255,255,0.2)}.debug-mode tw-expression[return=datatype]{background-color:rgba(102,153,255,0.2)}.debug-mode tw-expression[return=gradient],.debug-mode tw-expression[return=colour]{background-color:rgba(204,102,255,0.2)}.debug-mode tw-expression[return=instant],.debug-mode tw-expression[return=macro]{background-color:rgba(240,117,199,0.2)}.debug-mode tw-expression[return=command]{background-color:rgba(153,153,255,0.2)}.debug-mode tw-expression.false{background-color:rgba(255,0,0,0.2) !important}.debug-mode tw-expression[type=macro]::before{content:"(" attr(name) ":)";padding:0 0.5rem;font-size:1rem;vertical-align:middle;line-height:normal;background-color:inherit;border:1px solid rgba(255,255,255,0.5)}.debug-mode tw-hook{background-color:rgba(0,85,255,0.1) !important}.debug-mode tw-hook::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"["}.debug-mode tw-hook::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]"}.debug-mode tw-hook[name]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]<" attr(name) "|"}.debug-mode tw-pseudo-hook{background-color:rgba(255,170,0,0.1) !important}.debug-mode tw-collapsed::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"{"}.debug-mode tw-collapsed::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"}"}.debug-mode tw-verbatim::before,.debug-mode tw-verbatim::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"`"}.debug-mode tw-align[style*="text-align: center"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 50%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: left"]{background:linear-gradient(to right, rgba(255,204,189,0.25) 0%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: right"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 100%)}.debug-mode tw-column{background-color:rgba(189,228,255,0.2)}.debug-mode tw-enchantment{animation:enchantment 0.5s infinite;border:1px solid}.debug-mode tw-link::after,.debug-mode tw-broken-link::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(passage-name)}.debug-mode tw-include{background-color:rgba(204,128,51,0.1)}.debug-mode tw-include::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(type) ' "' attr(name) '"'}@keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}tw-debugger{position:fixed;box-sizing:border-box;bottom:0;right:0;z-index:999999;min-width:10em;min-height:1em;padding:0em 0.5em 0.5em 1em;font-size:1.25em;font-family:sans-serif;color:#000;border-left:solid #000 2px;border-top:solid #000 2px;border-top-left-radius:.5em;background:#fff;opacity:1}tw-debugger select{margin-right:1em;width:12em}tw-debugger button{border-radius:3px;border:solid #999 1px;margin:auto 4px;background-color:#fff;font-size:inherit;color:#000}tw-debugger button.enabled{background-color:#eee;box-shadow:inset #ddd 3px 5px 0.5em}tw-debugger .panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;bottom:100%;left:-2px;right:0;padding:1em;max-height:40vh;overflow-y:scroll;overflow-x:hidden;z-index:999998;background:#fff;border:inherit;border-bottom:solid #999 2px;border-top-left-radius:.5em;border-bottom-left-radius:.5em;font-size:0.8em}tw-debugger .panel:empty,tw-debugger .panel[hidden]{display:none}tw-debugger .panel-source,tw-debugger .panel-row-source{font-family:monospace;overflow-x:scroll;white-space:pre;-ms-flex-preferred-size:100%;flex-basis:100%}tw-debugger .panel-row-source{margin:5px 0}tw-debugger .panel-rows{width:100%;overflow-x:scroll}tw-debugger .panel-rows>*{display:table-row}tw-debugger .panel-rows>div:nth-of-type(2n){background:#EEE}tw-debugger .panel-row-buttons{text-align:right}tw-debugger .panel-variables .panel-rows:empty::before{content:"~ No variables ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-enchantments .panel-rows:empty::before{content:"~ No enchantments ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-errors .panel-rows:empty::before{content:"~ No errors... for now. ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-rows:empty+.panel-variables-bottom{display:none}tw-debugger .panel-storylets:not(.panel-exclusive) .storylet-exclusive,tw-debugger .panel-storylets:not(.panel-urgent) .storylet-urgent{display:none}tw-debugger .panel-variables-bottom{padding-top:5px}tw-debugger .enchantment-row{min-height:1.5em}tw-debugger .variable-path{opacity:0.4}tw-debugger .temporary-variable-scope,tw-debugger .enchantment-local{font-family:sans-serif;font-weight:normal;opacity:0.8;font-size:0.75em}tw-debugger .temporary-variable-scope:not(:empty)::before,tw-debugger .enchantment-local:not(:empty)::before{content:" in "}tw-debugger .variable-name,tw-debugger .enchantment-name{font-family:monospace;font-weight:bold}tw-debugger .variable-type{color:#444;font-weight:normal;text-overflow:ellipsis;overflow:hidden;max-width:10em}tw-debugger .error-row{display:table-row;background-color:rgba(230,101,204,0.3)}tw-debugger .error-row:nth-of-type(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .error-row>*{display:table-cell;padding:0.25em 0.5em}tw-debugger .error-row .error-message{cursor:help}tw-debugger .error-row .error-passage{color:#444}tw-debugger .storylet-row{background-color:rgba(201,233,222,0.3)}tw-debugger .storylet-row:nth-child(2n){background-color:rgba(128,203,178,0.3)}tw-debugger .storylet-row.storylet-closed{font-style:italic;opacity:0.4;background-color:rgba(217,217,217,0.3)}tw-debugger .storylet-row.storylet-closed:nth-child(2n){background-color:rgba(166,166,166,0.3)}.storylet-error tw-debugger .storylet-row{background-color:rgba(230,101,204,0.3)}.storylet-error tw-debugger .storylet-row:nth-child(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .storylet-row .storylet-name,tw-debugger .storylet-row .storylet-value{display:inline-block;width:50%}tw-debugger .tabs{padding-bottom:0.5em}tw-debugger .tab{border-radius:0px 0px 0.5em 0.5em;border-top:none}tw-debugger .resizer{position:absolute;height:3em;border-left:2px solid #ccc;border-right:2px solid #ccc;top:10px;left:4px;width:8px;cursor:ew-resize}tw-dialog{z-index:999997;border:#fff solid 2px;padding:2em;color:#fff;background-color:#000;display:block}@media (min-width: 576px){tw-dialog{max-width:50vw}}tw-dialog input[type=text]{font-size:inherit;width:100%}tw-dialog-links{text-align:right;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}tw-backdrop{z-index:999996;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.8);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}tw-backdrop ~ tw-backdrop{display:none}tw-link,.link,tw-icon,.enchantment-clickblock{cursor:pointer}tw-link,.enchantment-link{color:#4169E1;font-weight:bold;text-decoration:none;transition:color 0.2s ease-in-out}tw-passage [style^="color"] tw-link:not(:hover),tw-passage [style*=" color"] tw-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-link:hover,tw-passage [style*=" color"][hover="true"] tw-link:hover,tw-passage [style^="color"] .enchantment-link:not(:hover),tw-passage [style*=" color"] .enchantment-link:not(:hover),tw-passage [style^="color"][hover="true"] .enchantment-link:hover,tw-passage [style*=" color"][hover="true"] .enchantment-link:hover{color:inherit}tw-link:hover,.enchantment-link:hover{color:#00bfff}tw-link:active,.enchantment-link:active{color:#DD4B39}.visited{color:#6941e1}tw-passage [style^="color"] .visited:not(:hover),tw-passage [style*=" color"] .visited:not(:hover),tw-passage [style^="color"][hover="true"] .visited:hover,tw-passage [style*=" color"][hover="true"] .visited:hover{color:inherit}.visited:hover{color:#E3E}tw-broken-link{color:#993333;border-bottom:2px solid #993333;cursor:not-allowed}tw-passage [style^="color"] tw-broken-link:not(:hover),tw-passage [style*=" color"] tw-broken-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-broken-link:hover,tw-passage [style*=" color"][hover="true"] tw-broken-link:hover{color:inherit}.enchantment-mouseover{border-bottom:2px dashed #999}.enchantment-mouseout{border:rgba(64,149,191,0.6) 1px solid}.enchantment-mouseout:hover{background-color:rgba(175,197,207,0.75);border:transparent 1px solid;border-radius:0.2em}.enchantment-clickblock{width:100%;height:100%;display:block}.enchantment-clickblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;color:rgba(65,105,225,0.5);transition:color 0.2s ease-in-out}.enchantment-clickblock>:not(tw-enchantment):hover::after{color:rgba(0,191,255,0.5)}.enchantment-clickblock>:not(tw-enchantment):active::after{color:rgba(222,78,59,0.5)}.enchantment-clickblock>:not(tw-enchantment)::after{box-shadow:inset 0 0 0 0.5vmax}.enchantment-clickblock>tw-passage::after,.enchantment-clickblock>tw-sidebar::after{box-shadow:0 0 0 0.5vmax}.enchantment-mouseoverblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:2px dashed #999}.enchantment-mouseoutblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:rgba(64,149,191,0.6) 2px solid}.enchantment-mouseoutblock:hover>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;background-color:rgba(175,197,207,0.75);border:transparent 2px solid;border-radius:0.2em}tw-link.enchantment-button,.enchantment-link.enchantment-button,.enchantment-button:not(.enchantment-link) tw-link,.enchantment-button:not(.enchantment-link) .enchantment-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block}tw-dialog-links{padding-top:1.5em}tw-dialog-links tw-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block;display:inline-block}html{margin:0;height:100%;overflow-x:hidden}*,:before,:after{position:relative;box-sizing:inherit}body{margin:0;height:100%}tw-storydata{display:none}tw-story{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;font:100% Georgia, serif;box-sizing:border-box;width:100%;min-height:100%;font-size:1.5em;line-height:1.5em;padding:5% 5%;overflow:hidden;background-color:#000;color:#fff}tw-story [style*=content-box] *{box-sizing:border-box}@media (min-width: 576px){tw-story{padding:5% 20%}}tw-story tw-consecutive-br{display:block;height:1.6ex;visibility:hidden}tw-story select{background-color:transparent;font:inherit;border-style:solid;padding:2px}tw-story select:not([disabled]){color:inherit}tw-story textarea{resize:none;background-color:transparent;font:inherit;color:inherit;border-style:none;padding:2px}tw-story input[type=checkbox]{transform:scale(1.5);margin:0 0.5em}tw-story tw-noscript{animation:appear 0.8s}tw-passage{display:block}tw-sidebar{text-align:center;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}@media (min-width: 576px){tw-sidebar{left:-5em;width:3em;position:absolute;-ms-flex-direction:column;flex-direction:column}tw-enchantment[style*="width"]>tw-sidebar{width:inherit}}tw-icon{display:inline-block;margin:0.5em 0;font-size:66px;font-family:"Verdana",sans-serif}tw-icon[alt]{opacity:0.2}tw-icon[alt]:hover{opacity:0.4}tw-icon[data-label]::after{font-weight:bold;content:attr(data-label);font-size:20px;bottom:-20px;left:-50%;white-space:nowrap}tw-meter{display:block}tw-hook:empty,tw-expression:empty{display:none}tw-error{display:inline-block;border-radius:0.2em;padding:0.2em;font-size:1rem;cursor:help;white-space:pre-wrap}tw-error.error{background-color:rgba(223,58,190,0.6);color:#fff}tw-error.warning{background-color:rgba(223,140,58,0.6);color:#fff;display:none}.debug-mode tw-error.warning{display:inline}tw-error-explanation{display:block;font-size:0.8rem;line-height:1rem}tw-open-button,tw-folddown{cursor:pointer;line-height:0em;border-radius:1px;border:1px solid black;font-size:0.8rem;margin:0 0.4rem;padding:2px;white-space:pre}tw-folddown::after{content:"\25b6"}tw-folddown.open::after{content:"\25bc"}tw-open-button::after{content:"Open"}tw-notifier{border-radius:0.2em;padding:0.2em;font-size:1rem;background-color:rgba(223,182,58,0.4);display:none}.debug-mode tw-notifier{display:inline}tw-notifier::before{content:attr(message)}tw-colour{border:1px solid black;display:inline-block;width:1em;height:1em}tw-enchantment:empty{display:none}h1{font-size:3em}h2{font-size:2.25em}h3{font-size:1.75em}h1,h2,h3,h4,h5,h6{line-height:1em;margin:0.3em 0 0.6em 0}pre{font-size:1rem;line-height:initial}small{font-size:70%}big{font-size:120%}mark{color:rgba(0,0,0,0.6);background-color:#ff9}ins{color:rgba(0,0,0,0.6);background-color:rgba(255,242,204,0.5);border-radius:0.5em;box-shadow:0em 0em 0.2em #ffe699;text-decoration:none}center{text-align:center;margin:0 auto;width:60%}blink{text-decoration:none;animation:fade-in-out 1s steps(1, end) infinite alternate}tw-align{display:block}tw-columns{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between}.transition-in{animation:appear 0ms step-start}.transition-out{animation:appear 0ms step-end}[data-t8n^=dissolve].transition-in,[data-t8n=fade].transition-in{animation:appear .8s}[data-t8n^=dissolve].transition-out,[data-t8n=fade].transition-out{animation:appear .8s reverse}[data-t8n^=shudder].transition-in{display:inline-block !important;animation:shudder-in .8s}[data-t8n^=shudder].transition-out{display:inline-block !important;animation:shudder-in .8s reverse}[data-t8n^=rumble].transition-in{display:inline-block !important;animation:rumble-in .8s}[data-t8n^=rumble].transition-out{display:inline-block !important;animation:rumble-in .8s reverse}[data-t8n^=pulse].transition-in{animation:pulse .8s;display:inline-block !important}[data-t8n^=pulse].transition-out{animation:pulse .8s reverse;display:inline-block !important}[data-t8n^=zoom].transition-in{animation:zoom-in .8s;display:inline-block !important}[data-t8n^=zoom].transition-out{animation:zoom-in .8s reverse;display:inline-block !important}[data-t8n^=blur].transition-in{animation:blur .8s;display:inline-block !important}[data-t8n^=blur].transition-out{animation:blur .8s reverse;display:inline-block !important}[data-t8n^=slideleft].transition-in{animation:slide-left .8s;display:inline-block !important}[data-t8n^=slideleft].transition-out{animation:slide-right .8s reverse;display:inline-block !important}[data-t8n^=slideright].transition-in{animation:slide-right .8s;display:inline-block !important}[data-t8n^=slideright].transition-out{animation:slide-left .8s reverse;display:inline-block !important}[data-t8n^=slideup].transition-in{animation:slide-up .8s;display:inline-block !important}[data-t8n^=slideup].transition-out{animation:slide-down .8s reverse;display:inline-block !important}[data-t8n^=slidedown].transition-in{animation:slide-down .8s;display:inline-block !important}[data-t8n^=slidedown].transition-out{animation:slide-up .8s reverse;display:inline-block !important}[data-t8n^=fadeleft].transition-in{animation:fade-left .8s;display:inline-block !important}[data-t8n^=fadeleft].transition-out{animation:fade-right .8s reverse;display:inline-block !important}[data-t8n^=faderight].transition-in{animation:fade-right .8s;display:inline-block !important}[data-t8n^=faderight].transition-out{animation:fade-left .8s reverse;display:inline-block !important}[data-t8n^=fadeup].transition-in{animation:fade-up .8s;display:inline-block !important}[data-t8n^=fadeup].transition-out{animation:fade-down .8s reverse;display:inline-block !important}[data-t8n^=fadedown].transition-in{animation:fade-down .8s;display:inline-block !important}[data-t8n^=fadedown].transition-out{animation:fade-up .8s reverse;display:inline-block !important}[data-t8n^=flicker].transition-in{animation:flicker .8s}[data-t8n^=flicker].transition-out{animation:flicker .8s reverse}
</style>
</head>
<body>
<tw-story><noscript><tw-noscript>JavaScript needs to be enabled to play blackhouse.</tw-noscript></noscript></tw-story>
<tw-storydata name="blackhouse" startnode="1" creator="Twine" creator-version="2.3.16" ifid="26F59D31-7F4B-4913-BE71-0B38C43CDF01" zoom="1" format="Harlowe" format-version="3.2.3" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">@import 'https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap';

	body, tw-story
{
  font-family: 'Nanum Myeongjo', serif;
  letter-spacing: 1px;
  text-align: justify;
  tab-size: 1;
}


tw-sidebar {
	display: none;
}

.enchantment-clickblock>:not(tw-enchantment)::after {
  display: none;
}


div#audio-controls {
	display: none;
}

img {
  width: 700px; display: block; margin: 0px auto;
}

/**
 * Harlowe Audio Library (HAL), by Chapel, v2.2.1
 * for Harlowe 2.1.0 and higher
 * Released under the Unlicense, and dedicated to the public domain.
**/
#audio-overlay{position:fixed;top:0;right:0;left:0;bottom:0;z-index:100000;background:#111}.lds-ring{display:block;position:relative;top:20%;margin:auto;width:20em;height:20em}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:18em;height:18em;margin:6px;border:6px solid #fff;border-radius:50%;-webkit-animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#fff transparent transparent transparent}.lds-ring div:nth-child(1){-webkit-animation-delay:-.45s;animation-delay:-.45s}.lds-ring div:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.lds-ring div:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes lds-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes lds-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}input#audio-volume{width:100%;margin:2em 0}span#vol-title{position:relative;bottom:-1em;font-size:1rem;float:left}tw-link#audio-mute{display:inline-block;padding:.3em;width:90%;text-decoration:none;color:#111;background:#eee;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid #000}tw-link#audio-mute:hover{opacity:.8}tw-link#audio-mute:active{opacity:.6}tw-link#audio-mute span{display:inline-block;width:1em;position:relative;height:1em;top:.2em;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAABF0lEQVR4Ae2VJVREYRSEB3ftuFUaLhF6I22iF7TgLr1XvAc849CwiBac9Xtm3e97cefp/Pec7+mdH0mZrGtMoBomyAEHfjGHXKg07gNxeUS3BuMAqGZswE7YcOIYgqgG7BFlSQgTAgKysC2jNjQmghFQCOpMxq+QmQgmFATU4kcq/YlgfKB1lALUqFSukRIbEwpy4BTZPM/Bu9TaQ362KAsl56sAtSR+Sgv6RCFdr/gjBYiuj65c3J0eNEmXz95TgybocvmoJj3avf5l59L1iD/WglZCP7/uh8zgeQ6epdahaZENFIPCCFvEYNPW4JdNazBGzhkj6caCbSc02DRRu0+8RR/+rb7wx6D505HxCVKvG0zpp+yknHe8MBDkT/s8AAAAAElFTkSuQmCC);background-size:contain}tw-link#audio-mute.muted span{right:4px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAASElEQVR4Ae3WsQ0AMAjAsJ7ez9MTGEmlRGL3BJzPq6prw2DDYMNgw2DDYMOwh1kAMUygQIEC2RejANVxnVE9aDOqJ39GVZWqB5Z3r1ndBX5oAAAAAElFTkSuQmCC)}div#audio-volume{float:left}div#audio-controls{font:100% Georgia,serif;font-size:1.5em;position:fixed;width:8em;height:100%;padding:1em 2em;z-index:10000;top:0;left:0;bottom:0;background:#333;color:#eee;transition:left .3s;text-align:center}div#audio-controls.closed{left:-10.5em}div#audio-controls tw-link#audio-panel-toggle{display:inline-block;width:1.5em;position:absolute;height:1.5em;top:0;right:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:none;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAYklEQVR4Ae3MsQFAMAAEQMDEagCgN4EuVTrbPcACeUBugDNeSdMQomI0PmYdTEYD9DA5jcVoBKuxGY1kNQ6jGRSaGaIj8gw1aI/KYVUSNqsSzMpiVT2zMjlVN0fqVW5o2luMGHqkQmD9cPYAAAAASUVORK5CYII=);background-size:contain}div#audio-controls.closed tw-link#audio-panel-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAZElEQVR4Ae3TpwGAMBQAUfrEeHB0cDhcXBSO7ehlgBw9N8BL/YZO95r6uA/UEbOv+ylfHRJ9z1BWLynKJqmWohyS6ijKOygKCpmjZYqXTTA2xUiCsShGAMw8/Q3ArFgFMHek0w3WCaR74eO2YQAAAABJRU5ErkJggg==)}@media screen and (max-width:800px){div#audio-controls.closed{left:-12em}div#audio-controls.closed tw-link#audio-panel-toggle{right:-1.5em}}div#story-menu{margin:1em 0}tw-link.story-menu{width:100%;display:block;font-weight:400;background:#ccc;font-size:.9em;padding:.1em 0;color:#111;border:1px solid #333}tw-link.story-menu.hide{display:none}tw-link.story-menu:hover{opacity:.8}tw-link.story-menu:active{opacity:.6}input[type=range].hal{-webkit-appearance:none;width:100%;margin:2.25px 0}input[type=range].hal:focus{outline:0}input[type=range].hal::-webkit-slider-runnable-track{width:100%;height:15.5px;cursor:pointer;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d;background:#111;border-radius:0;border:0 solid #010101}input[type=range].hal::-webkit-slider-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer;-webkit-appearance:none;margin-top:-2.25px}input[type=range].hal:focus::-webkit-slider-runnable-track{background:#444}input[type=range].hal::-moz-range-track{width:100%;height:15.5px;cursor:pointer;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d;background:#111;border-radius:0;border:0 solid #010101}input[type=range].hal::-moz-range-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer}input[type=range].hal::-ms-track{width:100%;height:15.5px;cursor:pointer;background:0 0;border-color:transparent;color:transparent}input[type=range].hal::-ms-fill-lower{background:#000;border:0 solid #010101;border-radius:0;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d}input[type=range].hal::-ms-fill-upper{background:#111;border:0 solid #010101;border-radius:0;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d}input[type=range].hal::-ms-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer;height:15.5px}input[type=range].hal:focus::-ms-fill-lower{background:#111}input[type=range].hal:focus::-ms-fill-upper{background:#444}
/** End of HAL code */</style><script role="script" id="twine-user-script" type="text/twine-javascript">/**
 * Harlowe Audio Library (HAL), by Chapel, v2.2.1
 * for Harlowe 2.1.0 and higher
 * Released under the Unlicense, and dedicated to the public domain.
**/
;!function(e){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),function(){"use strict";window.Fast={filter:function(e,t){for(var o=e.length,n=[],a=0;a<o;a++)t(e[a],a,e)&&n.push(e[a]);return n},forEach:function(e,t){for(var o=e.length,n=0;n<o;n++)t(e[n],n,e)},map:function(e,t){for(var o=e.length,n=new Array(o),a=0;a<o;a++)n[a]=t(e[a],a,e);return n},find:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return e[n]},findIndex:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return n;return-1},some:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return!0;return!1}}}(),window.Chapel=window.Chapel||{},window.Chapel.options={preload:!0,loadDelay:0,muteOnBlur:!0,startingVol:.5,persistPrefs:!0,globalA:!0,showControls:!0,sidebarStartClosed:!0,volumeDisplay:!1,trackLoadLimit:500,totalLoadLimit:8e3,debug:!1},window.Chapel.debug=function(){Chapel.options.debug&&console.log.apply(null,arguments)},function(){"use strict";var n=$("tw-storydata"),o=/(.+?):(.+)/,t=/[\r\n]+/,a=/^["']/,r=/["']$/;function e(e){return Fast.map(Fast.filter(e.split(t),function(e){return e&&e.trim()&&e.includes(":")}),function(e){return e.trim()})}function i(e){return e.trim().replace(a,"").replace(r,"").trim()}function s(e){var t=e.match(o);return t instanceof Array?{key:i(t[1]),value:i(t[2])}:e}var u,l,c,p=n.find('tw-passagedata[name="hal.tracks"]'),d=null;p.length&&(u=e(p.text()),l=[],c=[],Fast.forEach(u,function(e){var t,o=s(e);"string"==typeof o&&c.push(o),l.push([o.key,(t=o.value,Fast.map(t.split(","),i))])}),c.length&&console.error("Some track definitions could not be parsed:\n"+c.join("\n")+"\nPlease check these definitions and try again."),d=new Map(l));var m,h,f=n.find('tw-passagedata[name="hal.config"]'),g=null;function y(e){var t=n.attr("format-version");if(e)return t;var o=t.split(".")[0],o=Number(o);return Number.isNaN(o)&&(o=3),o<1&&(o=3),o}f.length&&(m=e(f.text()),h={},Fast.forEach(Fast.map(m,function(e){return s(e)}),function(e){h[e.key]=e.value}),g=h),g&&Fast.forEach(Object.keys(g),function(e){var t=e,o=h[e],n=typeof Chapel.options[e];"boolean"==n?"true"===o?Chapel.options[t]=!0:"false"===o&&(Chapel.options[t]=!1):"number"==n?(o=Number(o),Number.isNaN(o)||(Chapel.options[t]=o)):"string"==n&&o&&(Chapel.options[t]=o)});var w=require("macros");if(window.Chapel=window.Chapel||{},window.Chapel.Macros={add:function(n){n&&"object"==typeof n&&Fast.forEach(Object.keys(n),function(e){var t,o;o=n[t=e],w.add(t,function(){var e=[].slice.call(arguments).slice(1),t=o.apply(null,e);return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?t:""},w.TypeSignature.zeroOrMore(w.TypeSignature.Any))})}},window.Chapel.Get={version:y(),isHarlowe3OrLater:3<=y(),storyTitle:n.attr("name"),IFID:n.attr("ifid"),fromPassage:d},Chapel.debug("Harlowe Version -> ",y(!0)),Chapel.debug("Harlowe Major Version -> ",Chapel.Get.version),Chapel.debug("Story Title -> ",Chapel.Get.storyTitle),Chapel.debug("Story IFID -> ",Chapel.Get.IFID),Chapel.Get.version<2)throw new Error("The Harlowe Audio Library is only designed to work with Harlowe 2 and 3; you appear to be using Harlowe 1 or an otherwise invalid story format.","get.js -> initialization",176);Chapel.options.storagekey="%%hal-"+Chapel.Get.IFID+"-{"+Chapel.Get.storyTitle+"}",Chapel.debug("Storage Key -> ",Chapel.options.storagekey)}(),function(){"use strict";var t=Chapel.options,e=function(e,t){if(window.localStorage)try{e=""+e,"string"!=typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)}catch(e){console.error(e)}},o=function(e){if(window.localStorage)try{return e=""+e,window.localStorage.getItem(e)}catch(e){console.error(e)}},n=function(e){if(window.localStorage)try{e=""+e,window.localStorage.removeItem(e)}catch(e){console.error(e)}},a={loaded:[],classes:{},master:{volume:t.startingVol,mute:!1},groups:{playing:[],looping:[],custom:{}},mute:function(e){a.master.mute=!!e,$(document).trigger({type:":master-mute",mute:!!e})},isMuted:function(){return!!a.master.mute},volume:function(e){e=Number(e),Number.isNaN(e)||(1<e?e=1:e<0&&(e=0),a.master.volume=e),$(document).trigger({type:":master-volume",volume:e})},getVolume:function(){return a.master.volume},stopAll:function(){a.classes.Track&&Fast.forEach(a.classes.Track.list,function(e){e.stop()})},audioPlaying:function(){return!!a.groups.playing.length},savePrefs:function(){e(t.storagekey,a.master)},loadPrefs:function(){var e=o(t.storagekey);e&&"object"==typeof e&&e.hasOwnProperty("volume")&&"number"==typeof e.volume&&e.hasOwnProperty("mute")&&"boolean"==typeof e.volume&&(delete a.master,a.master=e)},clearPrefs:function(){n(t.storagekey)}},r={track:[":available",":loaded",":play",":stop",":mute",":volume"],master:[":master-mute",":master-volume"]};var i=r.track.concat(r.master);function s(e,t){if(!e||"string"!=typeof e||!e.trim())return null;var o=Fast.filter(Fast.map(e.split(" "),function(e){return":"!==(e=e.split(".")[0])[0]&&(e=":"+e),e+".userland"}),function(e){return t?i.includes(e):r.track.includes(e)}).join(" ");return o&&o.trim()?o:null}a.data={parseEvent:s,bail:function(e){throw new Error(e,"audio.js -> bail()",140)}},a.on=function(e,t){t&&"function"==typeof t?(e=s(e,!0))&&$(document).on(e,t):console.error("Chapel.Audio.on() -> invalid callback")},a.one=function(e,t){t&&"function"==typeof t?(e=s(e,!0))&&$(document).one(e,t):console.error("Chapel.Audio.one() -> invalid callback")},a.off=function(e){(e=s(e,!0))&&$(document).off(e)},t.persistPrefs&&($(document).on(":master-mute",a.savePrefs),$(document).on(":master-volume",a.savePrefs)),$(document).on(":play",function(e){e.track.addToGroup("playing")}),$(document).on(":stop",function(e){e.track.removeFromGroup("playing")}),t.muteOnBlur&&$(window).on("blur",function(){a.isMuted()||(a.mute(!0),$(window).one("focus",function(){a.mute(!1)}))}),a.parseEvent=s,window.Chapel=window.Chapel||{},window.Chapel.Audio=a}(),function(){"use strict";var r=Chapel.Audio,o=r.data.pareEvent,a=r.data.bail,i=Chapel.options,t=$(document.createElement("div")).attr("id","audio-container").css("display","none").appendTo(document.body),s={aac:"audio/aac",caf:"audio/x-caf","x-caf":"audio/x-caf",mp3:'audio/mpeg; codecs="mp3"',mpeg:'audio/mpeg; codecs="mp3"',m4a:"audio/mp4",mp4:"audio/mp4","x-m4a":"audio/mp4","x-mp4":"audio/mp4",oga:"audio/ogg",ogg:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",wave:"audio/wav",weba:"audio/webm",webm:"audio/webm"};function u(e,t,o){this instanceof u||a("Track: called without `new` operator"),e||a("Track: no id specified"),"string"!=typeof e&&a("Track: track id is not a string"),t&&(!Array.isArray(t)||t.length)||a("Track: no sources specified"),o?t=[].slice.call(arguments).slice(1):"string"==typeof t&&(t=[t]);var n=$(document.createElement("audio"));Fast.forEach(t,function(e){var t,o;$(document.createElement("source")).attr({src:e,type:(t=e.split("."),(o=t[t.length-1]).includes("?")&&(o=o.split("?")[0]),o=o.toLowerCase().trim(),Object.keys(s).includes(o)||a('Track: unsupported file type "'+o+'"'),s[o])}).appendTo(n)}),n.attr({"data-track":"id","data-volume":1,"data-mute":!1}).one("canplaythrough.hal",function(){r.loaded.push(e)}),i.preload&&n.attr("preload","auto"),n[0].volume=+r.master.volume,this.id=e,this.$el=n,this.unwrap=n[0],this.sources=t}Object.assign(u,{list:[],is:function(e){return e instanceof u},has:function(t){return Fast.some(u.list,function(e){return e.id===t})},emit:function(e,t){$(document).trigger({type:e,track:t}),t.emit(e)},add:function(e,t,o){o&&(t=[].slice.call(arguments).slice(1));var n=new u(e,t);return u.list.push(n),n.$el.on("canplay",function(){u.emit(":available",n)}),n.$el.on("canplaythrough",function(){u.emit(":loaded",n)}),n.attach(),n},renew:function(){Fast.forEach(u.list,function(e){e.mute(e.isMuted()),e.volume(e.getVolume())})},getIdx:function(t){return Fast.findIndex(u.list,function(e){return e.id===t})},get:function(t){var e=Fast.find(u.list,function(e){return e.id===t});if(!e)throw new ReferenceError('There is no track with the id "'+t+'". Please check your spelling and capitalization.',"track.js -> Track.get()",155);return e},removeFromDOM:function(e){"string"==typeof e&&(e=u.get(e)),e&&u.is(e)?e.unattach():t.remove()},_runOnMultiple:function(e,t,o){e instanceof Array&&u.prototype.hasOwnProperty(t)&&Fast.forEach(u.list,function(e){u.is(e)||(e=u.get(e)||null),e&&e[t].apply(e,o&&o instanceof Array?o:[])})}}),Object.assign(u.prototype,{constructor:u,emit:function(e){this.$el.trigger({type:e,track:this})},clone:function(){return new u(this.id,this.sources)},isAttached:function(){return $.contains(t[0],this.unwrap)},attach:function(){return this.isAttached()||this.$el.appendTo(t),this},unattach:function(){return this.isAttached()&&this.$el.remove(),this},isPlaying:function(){return!this.unwrap.paused},play:function(){var e=this;return this.unwrap.play(),u.emit(":play",this),this.$el.on("ended",function(){e.unwrap.loop||(e.unwrap.currentTime=0,u.emit(":stop",e))}),this},playWhenPossible:function(){var t=this;return this.unwrap.play().then(function(){u.emit(":play",t),t.$el.on("ended",function(){t.unwrap.loop||(t.unwrap.currentTime=0,u.emit(":stop",t))})},function(e){$(document).one("click mousedown keydown touchstart",function(){t.play()})}).catch(function(e){console.error(e)}),this},forcePlay:function(){var e=this,t=$(document.createElement("a")).css("display","none").appendTo(document.body).on("click",function(){e.play()});setTimeout(function(){t.trigger("click")},safeAudioStart)},pause:function(){return this.unwrap.pause(),u.emit(":pause",this),this},stop:function(){return this.unwrap.pause(),this.unwrap.currentTime=0,u.emit(":stop",this),this},mute:function(e){return e=!!e,this.$el.attr("data-mute",e),r.master.mute?this.unwrap.muted=!0:this.unwrap.muted=e,u.emit(":mute",this),this},isMuted:function(){var e=this.$el.attr("data-mute");return"boolean"==typeof e?e:"false"!==e},toggleMute:function(){return this.mute(!this.isMuted()),this},volume:function(e){return e=Number(e),Number.isNaN(e)||(1<e?e=1:e<0&&(e=0),this.$el.attr("data-volume",e),this.unwrap.volume=e*r.master.volume),u.emit(":volume",this),this},getVolume:function(){return Number(this.$el.attr("data-volume"))},addToGroup:function(e,t){var o=this,n=t?r.groups.custom[e]:r.groups[e];return Fast.some(n,function(e){return o.id===e.id})||n.push(this),this},removeFromGroup:function(e,t){var o=this,n=t?r.groups.custom[e]:r.groups[e],a=Fast.findIndex(n,function(e){return e.id&&e.id===o.id});return n.splice(a,1),this},loop:function(e){return this.unwrap.loop=!!e,this.unwrap.loop?this.addToGroup("looping"):this.removeFromGroup("looping"),this},isLooping:function(){return!!this.unwrap.loop},toggleLoop:function(){return this.loop(!this.isLooping()),this},seek:function(e){return e<0?e=this.unwrap.duration-e:e>this.unwrap.duration&&(e=this.unwrap.duration),this.unwrap.currentTime=e,this},fadeIn:function(e){var t=this;e=e||1;var o=this.getVolume();return this.volume(0),this.play(),this.$el.animate({volume:o*r.master.volume},1e3*e,function(){t.volume(o),u.emit(":volume",t),u.emit(":fade",t)}),this},fadeOut:function(e){e=e||1;var t=this,o=this.getVolume();return this.$el.animate({volume:0},1e3*e,function(){t.stop(),t.volume(o),u.emit(":volume",t),u.emit(":fade",t)}),this},fadeTo:function(e,t){var o=this;if(e=e||1,t=Number(t),!Number.isNaN(t))return 1<t?t=1:t<0&&(t=0),this.$el.animate({volume:t*r.master.volume},1e3*e,function(){o.volume(t),u.emit(":volume",o),u.emit(":fade",o)}),this;alert("ivalid volume level")},delay:function(e,t){var o=this;"function"==typeof t&&(e=Number(e),(Number.isNaN(e)||e<0)&&(e=0),setTimeout(function(){t.call(o,o,e)},e))},on:function(e,t){if(!t||"function"!=typeof t)return console.error("<track>.on() -> invalid callback"),this;(e=o(e))&&this.$el.on(e,t)},one:function(e,t){if(!t||"function"!=typeof t)return console.error("<track>.one() -> invalid callback"),this;(e=o(e))&&this.$el.one(e,t)},off:function(e){(e=o(e))&&this.$el.off(e)}}),r.classes.Track=u,r.newTrack=function(){try{return u.add.apply(null,arguments)}catch(e){console.error(e.message),alert("Error in A.newTrack() -> see the console for more information.")}},r.track=function(e){try{return u.get(e)}catch(e){console.error(e.message),alert("Error in A.track() -> see the console for more information.")}},$(document).on(":master-mute",u.renew),$(document).on(":master-volume",u.renew)}(),function(){"use strict";var i=Chapel.Audio,s=i.classes.Track,o=(i.data._extend,/(play)?list:(.+)/i);i.createGroup=function(e,t,o){var n,a,r=o?[].slice.call(arguments).slice(1):t;n=e,(a=r)&&Array.isArray(a)||(a=[]),i.groups.custom[n]=Fast.map(a,function(e){return s.get(e)})},i.group=function(e){if(!(this instanceof i.group))return new i.group(e);if(Object.keys(i.groups.custom).includes(e))this.members=i.groups.custom[e];else{if(!(i.groups[e]&&i.groups[e]instanceof Array))throw new ReferenceError('There is no group with the id "'+id+'". Please check your spelling and capitalization.',"group.js -> A.group()",29);this.members=i.groups[e]}var t;!o.test(e)||(t=e.match(o)[2])&&t.trim()&&(this.members=i.playlist(t).tracks),Array.isArray(this.members)||(this.members=[],console.error('Could not find members for track group "'+e+'"!'))},Object.assign(i.group,{is:function(e){return this instanceof i.group},_runOnAll:function(e,t,o,n){null!=n?o=[].slice.call(arguments).slice(2):o instanceof Array||(o=[o]);var a=[e.members,t,o];s._runOnMultiple.apply(null,a)}}),Object.assign(i.group.prototype,{constructor:i.group,_run:function(){i.group._runOnAll.apply(null,[this].concat([].slice.call(arguments)))},play:function(){return this._run("play"),this},pause:function(){return this._run("pause"),this},stop:function(){return this._run("stop"),this},mute:function(e){return this._run("mute",e),this},volume:function(e){return this._run("volume",e),this},loop:function(e){return this._run("loop",e),this}})}(),function(){"use strict";var e=Chapel.Audio,r=e.classes.Track;e.data._extend;function n(e,t){if(!(this instanceof n))return new n(e,t);this.id=e,this.tracks=t.map(function(e){return r.get(e)}),this.looping=!1,this.current="",this.playing=!1}Object.assign(n,{list:{},is:function(e){return e instanceof n},add:function(e,t,o){return o&&(t=[].slice.call(arguments).slice(1)),n.list[e]=new n(e,t),n.list[e]},_runOnAll:function(e,t,o,n){null!=n?o=[].slice.call(arguments).slice(2):o instanceof Array||(o=[o]);var a=[e.tracks,t,o];r._runOnMultiple.apply(null,a)}}),Object.assign(n.prototype,{constructor:n,clone:function(){return new n(this.id,this.tracks.map(function(e){return e.id}))},_run:function(){n._runOnAll.apply(null,[this].concat([].slice.call(arguments)))},volume:function(e){return this._run("volume",e),this},mute:function(e){return this._run("mute",e),this},shuffle:function(){for(var e,t,o=this.tracks,n=o.length-1;0<n;n--)e=Math.floor(Math.random()*(n+1)),t=o[n],o[n]=o[e],o[e]=t;return this.tracks=o,this},random:function(){return this.tracks[Math.floor(Math.random()*this.tracks.length)]},isPlaying:function(){return this.playing},nowPlaying:function(){return r.get(this.current)},play:function(e){var t=this;if((e=e||(t.current?Fast.findIndex(t.tracks,function(e){return e.id===t.current}):0))>=t.tracks.length&&t.looping)e=0;else if(e>=t.tracks.length)return t.current="",void(t.playing=!1);var o=t.tracks[e],n=o.isLooping();return o.loop(!1),o.play(),t.playing=!0,setTimeout(function(){o.isPlaying()||(t.playing=!1)},20),t.current=o.id,o.$el.one("ended.playlist",function(){e++,o.loop(n),t.play(e)}),t},loop:function(e){return this.looping=!!e,this},isLooping:function(){return this.looping},stop:function(){var e;return this.current&&this.isPlaying()?(e=this.nowPlaying())&&(e.stop(),e.$el.off(".playlist")):this._run("stop"),this.current="",this.playing=!1,this},pause:function(){var e;return this.current&&this.isPlaying()&&((e=this.nowPlaying())&&e.pause()),this.playing=!1,this}}),e.classes.Playlist=n,e.createPlaylist=function(){try{n.add.apply(null,arguments)}catch(e){console.error(e.message),alert("Error in A.createPlaylist() -> see the console for more information.")}},e.playlist=function(e){try{var t=n.list[e]||null;if(!t)throw new ReferenceError('There is no playlist with the id "'+e+'". Please check your spelling and capitalization.',"list.js -> A.playlist()",171);return t}catch(e){console.error(e.message),alert("Error in A.createPlaylist() -> see the console for more information.")}}}(),function(){"use strict";var t=Chapel.Audio,o=t.classes.Track,n=t.classes.Playlist;function a(t,o){if("object"!=typeof o)throw new TypeError("Invalid extension.","extensions.js -> _extend()",8);Fast.forEach(Object.keys(o),function(e){if(void 0!==t[e])throw new Error('Invalid extension: cannot clobber existing property "'+e+'".',"extensions.js -> _extend()",8);t[e]=o[e]})}t.extend=function(e){a(Audio,e)},o.extend=function(e){a(o,e)},o.extendPrototype=function(e){a(o.prototype,e)},t.extendTrack=o.extend,t.extendTrackProto=o.extendPrototype,t.group.extend=function(e){a(t.group,e)},t.group.extendPrototype=function(e){a(t.group.prototype,e)},t.extendGroup=t.group.extend,t.extendGroupProto=t.group.extendPrototype,n.extend=function(e){a(n,e)},n.extendPrototype=function(e){a(n.prototype,e)},t.extendPlaylist=n.extend,t.extendPlaylistProto=n.extendPrototype}(),function(){"use strict";var e,t,o,n,a,r,i,s,u=Chapel.options;u.showControls&&(e=$(document.createElement("div")).attr("id","story-menu").css("display","none"),t=$(document.createElement("span")).attr("id","vol-title").append("Volume"),u.volumeDisplay||t.css("display","none"),o=$(document.createElement("input")).attr({id:"audio-volume",type:"range",min:1,max:99,step:1,title:"Volume"}).addClass("hal"),(n=Math.trunc(100*window.Chapel.Audio.master.volume))<0?n=0:100<n&&(n=100),o.attr("value",n),a=function(e){void 0===e&&(e=o.val()),t.empty().append("Volume "+e)},o.on("input",function(){window.Chapel.Audio.volume($(this).val()/100),a($(this).val())}),r=$(document.createElement("tw-link")).attr({id:"audio-mute",title:"Mute"}).append("Mute <span></span>").on("click",function(e){e.preventDefault(),$(this).toggleClass("muted"),Chapel.Audio.mute(!Chapel.Audio.isMuted())}),Chapel.Audio.isMuted()&&r.addClass("muted"),i=$(document.createElement("tw-link")).attr("id","audio-panel-toggle").on("click",function(e){e.preventDefault(),s.toggleClass("closed")}),s=$(document.createElement("div")).attr("id","audio-controls").append(e,t,o,r,i).appendTo(document.body),u.sidebarStartClosed&&s.addClass("closed"),window.Chapel=window.Chapel||{},window.Chapel.Audio=window.Chapel.Audio||{},window.Chapel.Audio.controls={$panel:s,$volume:o,$mute:r,$user:e,close:function(){s.addClass("closed")},open:function(){s.removeClass("closed")},toggle:function(){s.toggleClass("closed")},hide:function(){s.css("display","none")},show:function(){s.css("display","block")},updateVolume:a})}(),function(){"use strict";var s=Chapel.options,t=State,e=$(document.createElement("div")).attr("id","audio-overlay").css("display","none").appendTo(document.body);function o(){e.css("display","block").append('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>')}function u(){e.fadeOut(function(){e.empty()})}window.Chapel=window.Chapel||{},window.Chapel.Audio=window.Chapel.Audio||{},window.Chapel.Audio.loadScreen={show:o,dismiss:u,kill:function(){$("#audio-overlay").remove()}},window.Chapel.Audio.$overlay=e,window.Chapel.Audio.preload=function(){var a,e,r,i;Chapel.debug("This is a mobile browser -> ",$.browser.mobile),t.pastLength||t.futureLength||$.browser.mobile||($(document).ready(function(){o()}),a=100+s.loadDelay,e=Chapel.Audio.classes.Track.list,r=Chapel.Audio.loaded,e.length?(i=Fast.map(e,function(e){return e.id}),0<s.totalLoadLimit&&setTimeout(function(){u()},s.totalLoadLimit),function e(){var t,o,n;i.length?(t=i.shift(),r.includes(t)?e():(o=Chapel.Audio.classes.Track.get(t)).unwrap.readyState<2?(n=!1,o.$el.one("canplaythrough.hal",function(){e(),n=!0}),setTimeout(function(){n||(o.$el.off("canplaythrough.hal"),e())},s.trackLoadLimit)):(r.includes(t)||r.push(t),e())):setTimeout(u,a)}()):setTimeout(u,a))}}(),function(){"use strict";var o=Chapel.options.storagekey+"_hal_restart_";Chapel.debug("HAL Session Key -> ",o);var e,t,n=(window.sessionStorage?(Chapel.debug("Session Storage Available"),e=function(e,t){window.sessionStorage.setItem(o+e,t)},t=function(e){return window.sessionStorage.getItem(o+e)}):(Chapel.debug("Session Storage Unavailable"),e=function(){},t=function(){},console.warn("Session storage is unavailable...")),{save:e,load:t});window.Chapel.Audio.state={_store:n,saveTracks:function(){var e;try{e=Fast.map(Chapel.Audio.classes.Track.list,function(e){return{id:e.id,sources:e.sources}}),Chapel.debug("Session Saved (Tracks) -> ",e),e=JSON.stringify(e),n.save("tracks",e)}catch(e){console.error(e.message)}},loadTracks:function(){var e;try{e=(e=n.load("tracks"))&&JSON.parse(e),Array.isArray(e)&&e.length&&(Chapel.debug("Session Loaded (Tracks) -> ",e),Fast.forEach(e,function(e){e.id&&e.sources&&!Chapel.Audio.classes.Track.has(e.id)?Chapel.Audio.newTrack.apply(null,[e.id].concat(e.sources)):Chapel.debug("Track reloading skipped.")}))}catch(e){console.error(e.message)}},savePlaylists:function(){try{var o=Chapel.Audio.classes.Playlist.list,e=Fast.map(Object.keys(o),function(e){var t={};return t.tracks=Fast.map(o[e].tracks,function(e){return e.id}),t.id=o[e].id,t});Chapel.debug("Session Saved (Playlists) -> ",e),e=JSON.stringify(e),n.save("playlists",e)}catch(e){console.error(e.message)}},loadPlaylists:function(){var e;try{(e=(e=n.load("playlists"))&&JSON.parse(e))&&Array.isArray(e)&&e.length&&(Chapel.debug("Session Loaded (Playlists) -> ",e),Fast.forEach(e,function(e){e.id&&e.tracks&&Chapel.Audio.createPlaylist(e.id,e.tracks)}))}catch(e){console.error(e.message)}},saveGroups:function(){var t;try{t={},Fast.forEach(Object.keys(Chapel.Audio.groups.custom),function(e){t[e]=Fast.map(Chapel.Audio.groups.custom[e],function(e){return"string"==typeof e?e:e.id})}),Chapel.debug("Session Saved (Groups) -> ",t),t=JSON.stringify(t),n.save("groups",t)}catch(e){console.error(e.message)}},loadGroups:function(){var t;try{(t=(t=n.load("groups"))&&JSON.parse(t))&&"object"==typeof t&&(Chapel.debug("Session Loaded (Groups) -> ",t),Fast.forEach(Object.keys(t),function(e){Fast.map(t[e],function(e){return Chapel.Audio.classes.Track.get(e)})}),Chapel.Audio.groups.custom=t)}catch(e){console.error(e.message)}}}}(),function(){"use strict";var e=Chapel.options;e.globalA&&void 0===window.A&&(Chapel.debug("Created global A interface."),window.A=window.Chapel.Audio),Chapel.Get.fromPassage&&(Chapel.debug("Loading tracks from track def special passage -> ",Chapel.Get.fromPassage),Chapel.Get.fromPassage.forEach(function(e,t){Chapel.Audio.newTrack.apply(null,[t].concat(e))})),$(document).on("unload",function(){Chapel.debug("User Prefs Saved"),window.Chapel.Audio.savePrefs()}),Chapel.Audio.classes.Track.renew(),Chapel.Audio.controls&&Chapel.Audio.controls.updateVolume(),Chapel.Get.isHarlowe3OrLater&&($(window).on("unload",function(){Chapel.debug("HAL State Saved"),Chapel.Audio.state.saveTracks(),Chapel.Audio.state.savePlaylists(),Chapel.Audio.state.saveGroups()}),Chapel.debug("HAL State Loaded"),Chapel.Audio.state.loadTracks(),Chapel.Audio.state.loadPlaylists(),Chapel.Audio.state.loadGroups()),e.persistPrefs&&(Chapel.debug("User Prefs Loaded"),Chapel.Audio.loadPrefs())}(),function(){"use strict";var s,u,e,l,t;Chapel.options.showControls&&(s=Engine,u=Chapel.Audio.controls.$user,e=function(){return"none"!==u.css("display")},l=function(){return e()||u.css("display","block"),u},t=function(){return e()&&u.css("display","none"),u},Chapel.Audio.menu={hide:t,show:l,isShown:e,links:{add:function(e,t,o){var n,a;if(!e||"string"!=typeof e){var r="undefined";return alert(r),void console.error(r)}o||"function"!=typeof t?(t&&"string"==typeof t&&(n=t),o&&"function"==typeof o&&(a=o)):(a=t,n=null);var i=$(document.createElement("tw-link")).append(e).attr({tabindex:"0",name:e.toLowerCase().trim()}).on("click",function(){n&&s.goToPassage(n),a&&a()}).addClass("story-menu").appendTo(u);return l(),i},clear:function(){return u.empty(),t()},hide:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').addClass("hide")},show:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').removeClass("hide")},toggle:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').toggleClass("hide")},remove:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').remove()}}})}(),function(){"use strict";var n=Chapel.Audio;function o(e){return e&&"function"==typeof e}function a(e,t){if(!e||"string"!=typeof e)return null;switch(e=e.toLowerCase().trim()){case"isplaying":e="isPlaying";break;case"playwhenpossible":e="playWhenPossible";break;case"ismuted":e="isAMuted";break;case"togglemute":e="toggleMute";break;case"getvolume":e="getVolume";break;case"islooping":e="isLooping";break;case"toggleloop":e="toggleLoop";break;case"fadein":e="fadeIn";break;case"fadeout":e="fadeOut";break;case"fadeto":e="fadeTo";break;case"stopall":e="stopAll"}if("isPlaying"===e&&"master"===t&&(e="audioPlaying"),"group"===t){if(o(n.group.prototype[e]))return e}else if("master"===t){if(o(n[e]))return e}else if(o(n.classes[t].prototype[e]))return e;throw new ReferenceError('Cannot run the command: "'+e+'" on the API "'+t+'". The command may be invalid, or this may be a bug in HAL.',"macros.js -> getCommand()",10)}var e={newtrack:function(){var e=[].slice.call(arguments);try{return n.newTrack.apply(null,e)}catch(e){alert("Error in the (newtrack:) macro: "+e.message)}},newplaylist:function(e,t){t=[].slice.call(arguments).slice(1);try{return n.createPlaylist(e,t)}catch(e){alert("Error in the (newplaylist:) macro: "+e.message)}},newgroup:function(e,t){t=[].slice.call(arguments).slice(1);try{return n.createGroup(e,t)}catch(e){alert("Error in the (newgroup:) macro: "+e.message)}},masteraudio:function(e){try{return e=a(e,"master"),n[e].apply(null,[].slice.call(arguments).slice(1))}catch(e){alert("Error in the (masteraudio:) macro: "+e.message)}},track:function(e,t){try{var o=n.track(e);return o[t=a(t,"Track")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (track:) macro: "+e.message)}},playlist:function(e,t){try{var o=n.playlist(e);return o[t=a(t,"Playlist")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (playlist:) macro: "+e.message)}},group:function(e,t){try{var o=n.group(e);return o[t=a(t,"group")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (group:) macro: "+e.message)}}};window.Chapel.Macros.add(e)}();
/** End of HAL code */</script><tw-passagedata pid="1" name="main" tags="" position="328,162.5" size="100,100">1996년 4월 8일 (click: ?page)[==월요일

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 파란 연필을 손에 든 채, 팔을 살짝 뻗어 자그맣게 기지개를 켰다.
 
&amp;nbsp&amp;nbsp(click: ?page)[==블라인드를 걷어놓은 총무부 동쪽 창문에서 해맑은 햇살이 파고들어와 책상 위에 작은 빛을 뿌리자, 볼펜과 스탬프, 서류의 인영을 확인하기 위한 확대경들이 가느다란 빛의 입자를 받아 화려한 빛을 뿜어냈다.
 
&amp;nbsp&amp;nbsp(click: ?page)[==창문 밖으로 눈길을 돌리자 도쿄의 하늘은 새파란 그림물감을 풀어놓은 듯했고, 군데군데에 솜뭉치 같은 새하얀 구름이 빨려들어갈 듯이 자리잡고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==상쾌한 아침 공기를 가슴으로 들이마시고 나서, 신지는 또다시 산더미처럼 쌓여 있는 사망보험금 청구서류에 시선을 고정시켰다.

&amp;nbsp&amp;nbsp(click: ?page)[==[[서류 읽기-&gt;서류]]</tw-passagedata><tw-passagedata pid="2" name="서류" tags="" position="328,313.5" size="100,100">&amp;nbsp&amp;nbsp28세 목수.
&amp;nbsp&amp;nbsp(click: ?page)[==피를 토하고 입원하여 위암 선고를 받다.

&amp;nbsp&amp;nbsp(click: ?page)[==60세 회사 임원.
&amp;nbsp&amp;nbsp(click: ?page)[==골프를 치던 도중 의식을 잃고 쓰러지다.
&amp;nbsp&amp;nbsp(click: ?page)[==검사 결과 뇌종양이 발견됨.

&amp;nbsp&amp;nbsp(click: ?page)[==올해 성년을 맞은 대학생.
&amp;nbsp&amp;nbsp(click: ?page)[==차를 몰고 가던 도중 과속으로 인해 커브길을 제대로 돌지 못하고 전봇대에 부딪히다...


&amp;nbsp&amp;nbsp(click: ?page)[==그가 마주하고 있는 것은 일면식조차 없는 사람들의 죽음이었다. 이른 아침을 가장 먼저 여는 일치고 그다지 기분 좋은 일은 아니였다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;오늘도 죽은 사람이 무지막지하게 많군.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==옆자리에 앉은 요시오가 신지의 책상 위에 쌓은 서류더미를 쳐다보면서 말을 걸었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;화창한 봄날에 요단강을 건너야 하다니, 정말 안됐어.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그 말을 듣고 보니, 분명히 이상할 정도로 죽은 사람이 많았다. 통계적으로 볼 때 사람들이 가장 많이 세상을 떠나는 시기는 겨울이다. 체력이 약해진 노인이나 환자들이, 살을 에는 추위를 견뎌내지 못하기 때문이다.

&amp;nbsp&amp;nbsp(click: ?page)[==그런데 추위가 물러간 따뜻한 봄날에 이렇게 사망 건수가 많다니! 거기에는 무슨 특별한 이유가 있을 것이다. 서류다발을 들추자 보험금 수취인이 기입한 사망보험금 청구서 밑에 의사의 사망진단서와 교통사고 증명서, 호적등본이 첨부되어 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==수수께끼는 쉽게 풀렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아아, 사쿄구에서 일어난 화재 때문입니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==3주일 전쯤 사쿄구에서 목조가옥이 전소되는 바람에 일가족 다섯 명이 불에 타 죽은 사건이 발생했다. 그로 인해 15건이나 되는 사망보험금이 한꺼번에 청구되어 건수가 늘어난 것이리라. 대부분은 저축성이 높은 5년 만기 노인복지보험이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==아마 부탁을 받으면 거절하지 못하는 사람들이 아니었을까. 할당량을 채우지 못했다고 눈물로 호소하는 생활성계사들의 애원을 거절하지 못하고 계속해서 보험에 가입한 것이 틀림없다. 일본 생명보험 가입률에 세계 최고인 것은 그러한 사람들의 기여도가 높기 때문이다.

(click: ?page)[==[(goto: &quot;서류2&quot;)]</tw-passagedata><tw-passagedata pid="3" name="서류2" tags="" position="481,313.5" size="100,100">&amp;nbsp&amp;nbsp&quot;그게 아마 방화 사건이었지? 범인은 잡았나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아직 잡지 못했습니다. 하지만 수취인이 관여했을 가능성이 거의 없으니까, 보험금 지급에는 문제가 없을 겁니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;나 원, 장난 삼아 남의 집에 불을 지르는 녀석들은 모두 사형에 처해야 하는데.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 혼잣말처럼 나지막하게 중얼거렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==이때 다른 누군가가 신지에게 말을 걸어왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 주임님, 부탁합니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==입사 5년째에 접어드는 베테랑 여직원 사카가미 히로미가 1차 확인을 끝낸 입원급부금의 지급청구 서류다발을 책상 위에 올려놓았다. 이미 그 외에도 종류에 따라 색깔로 구분된 서류가 높다랗게 쌓여 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==만기보험금 지급, 생존급부금 지급, 연금 지급, 계약자 대부금, 해약, 인감 신고, 해약자와 수취인 변경, 주소 및 생년월일 같은 해약 내용의 정정, 보험증권의 재발행 등등.

&amp;nbsp&amp;nbsp(click: ?page)[==예로부터 사람과 종이만으로 일한다고 하는 생명보험회사인 만큼, 서류의 종류도 눈이 핑핑 돌아갈 정도로 많아서 우물쭈물 할 틈이 없다, 신지는 서류에 빠져들어서 확인 작업을 진행했다. 화재에 따른 사망보험금 청구 외에 대부분은 오랜 병환에 따른 사망이어서, 문제의 소지가 될 만한 점은 발견되지 않았다. 그러나 확인 작업이 거의 끝나갈 무렵 한 가지 마음에 걸리는 것이 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==1,000만 엔짜리 평생보험이었다. 가입한 지 20년이 지난 것으로, 일반적으로는 문제될 만한 해약이 아니었다. 다만 &#39;사망진단서&#39; 라는 글자에 두 줄을 긋고 &#39;사체검안서&#39; 라고 쓴 점에는 주의할 필요가 있었다. 양쪽의 차이는 사채를 검안하는 의사가 사망하기 24시간 이내에 진단했느냐, 하지 않았느냐 하는 점이다. 사체검안서는 의사가 처음부터 사체밖에 보지 않은 것이므로, 사인에 대해서도 의심할 여지가 전혀 없다고는 할 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==[[사체검안서 확인하기-&gt;사체검안서]]</tw-passagedata><tw-passagedata pid="4" name="사체검안서" tags="" position="483,462.5" size="100,100">&amp;nbsp&amp;nbsp1. 이름: 다나카 사토
&amp;nbsp&amp;nbsp(click: ?page)[==2. 생년월일: 1922년 4월 21일


&amp;nbsp&amp;nbsp(click: ?page)[==만약에 살아 있었다면 앞으로 2주일 뒤에는 74세의 생일을 맞이했으리라. 신지는 머릿속으로 계산하면서 계속 읽어나갔다.


&amp;nbsp&amp;nbsp(click: ?page)[==3. 주소: 교토 조요시 구세…….

&amp;nbsp&amp;nbsp(click: ?page)[==…

&amp;nbsp&amp;nbsp(click: ?page)[==11. 사망 종류: 외인사(外因死)―자살.


&amp;nbsp&amp;nbsp(click: ?page)[==여기까지는 별로 특이한 점이 없었다. 지난 1년 동안 하루도 빼놓지 않고 사망진단서를 본 사람이라면, 일본 사람들이 어떤 원인으로 죽음을 맞이하는지 어렴풋이나마 알게 된다.

&amp;nbsp&amp;nbsp(click: ?page)[==12번의 사망 원인을 보니 &#39;비정형 액사(扼死)&#39;로 되어 있었다. 즉, 목을 매달아 죽었다는 뜻이다. 13번의 외인사 추가사항을 읽은 신지는 들고 있던 파란 연필의 움직임을 멈추었다. &#39;높이 70센티미터의 서랍장 손잡이에 줄을 묶어서 목을 매달다&#39;라고 되어 있었던 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==사망진단서에 신체조건에 대해서 적는 난은 없지만, 참고 표시를 하고 사망한 노파의 키가 145센티미터라고 적혀 있었다. 과연 자기 키보다 절반이나 낮은 높이에서 목숨을 끊을 정도로 목을 매다는 일이 가능할까.


&amp;nbsp&amp;nbsp(click: ?page)[==그리고 갑자기 전화벨이 울렸다. 잠시 동안 히로미의 &#39;네, 네.&#39; 하는 대답이 이어지더니 그녀는 보류 버튼을 누르고 신지 쪽으로 다가왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==히로미의 얼굴을 쳐다본 순간, 그는 꺼림직한 느낌을 지울 수 없었다. 평소에는 거의 표정의 변화가 없는 그녀의 눈가에 어렴풋한 긴장감이 떠다니고 있었던 것이다. 애당초 전화를 돌리기만 한다면 인터폰을 연결해도 상관없는데, 일부러 일어서서 온 것은 보통 일이 아니기 때문이리라.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 주임님. 고객이 문의할 것이 있다고 하는데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어려운 일이야?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==5년 동안 줄곧 창구일을 맡아온 히로미는, 보험에 관한 지식만큼은 누구에게도 뒤지지 않았다. 따라서 대부분의 질문은 자신이 직접 대답할 수 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;자살하는 경우, 보험금이 나오냐고 물으시는데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==생명보험회사에는 그런 죵류의 전화가 자주 걸려온다. 그러나 히로미의 심각한 표정을 보아하니 단순한 장난전화 같지는 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==[[전화 받기-&gt;전화 받기]]</tw-passagedata><tw-passagedata pid="5" name="전화 받기" tags="" position="484,613.5" size="100,100">&amp;nbsp&amp;nbsp&quot;알았어. 내가 이야기하지.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고개를 끄덕이는 신지를 보고 히로미는 안도의 표정을 지으며 자기 자리로 돌아갔다. 여직원들은 보통 정해진 업무나 주어진 일을 빈틈없이 해내지만, 책임을 동반하는 일에서는 멀리 도망치고 싶어한다. 그러한 때에는 일단 직책이 있는 사람에게 지시를 받으라고 배웠기 때문이다. 그 결과 필연적으로 신지와 요시오에게 무거운 책임이 걸리게 되는데, 여직원들과는 비교과 되지 않을 정도로 많은 월급을 받는 이상 그것은 어쩌면 당연한 일인지도 모른다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 책상 서랍에서 대외비로 되어 있는 보험계약 약관 해설서는 꺼냈다. 물론 대부분의 질문은 극히 초보적인 것으로, 생명보험회사에 적을 두고 있는 사람이라면 누구든지 즉시 대답할 수 있다. 그러나 대답에는 신중에 신중을 요했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;기다리게 해서 죄송합니다. 창구 주임으로 일하고 있는 신지라고 합니다. 문의할 것이 있으시다고 하던데요. 무슨 일이십니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;조금 전에도 말했는데, 자살을 해도 보험금이 나오나요?

&amp;nbsp&amp;nbsp(click: ?page)[==알아듣기 힘든, 숨을 죽은 듯한 목소리였다. 상당히 긴장하고 있는 것이리라.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;지금 당장 조사해 보겠습니다만, 저…… 어느 분이 돌아가셨습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==상대는 또다시 입을 다물었다. 다시 메마른 기침소리만이 귀를 파고들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;만약에 보험증권을 가지고 계시다면 그곳에 쓰여 있는 번호로 말씀해 주십시오. 즉시 조사해 보겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==잠시 침묵을 지키고 나서 무거운 것을 떼어놓듯이 천천히 여자가 입을 열었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;……그런 게 없으면 알 수 없나요?&quot;


&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 지급할 수 있는 경우와 지급할 수 없는 경우가 있으니까요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;지급할 수 없는 경우라니요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그때까지 대답을 지연시켰지만 질문을 받은 이상 대답하지 않을 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;일단 가입한 지 1년 이내의 자살은 면책 사항으로 되어 있습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;면책 사항이요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;보험금을 지급할 수 없다는 뜻입니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어째서요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;상법에서는 자살을 모두 면책 사항으로 분류하고 있지만, 보험 약관에서는 일단 1년으로 정해 놓았습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그러니까 이유가 뭐냐구요!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==초조함을 느껴서인지, 여자의 목소리에서는 신경질이 묻어나왔다.

(click: ?page)[==[(goto: &quot;전화 받기2&quot;)]</tw-passagedata><tw-passagedata pid="6" name="전화 받기2" tags="" position="714.5,470" size="100,100">&quot;생명보험이 자살을 조장해서는 안 된다는 취지로 정해진 것입니다만…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==여자는 또다시 침묵을 유지했다.

&amp;nbsp&amp;nbsp(click: ?page)[==자살에 따른 면책 규정은 생명보험회사에게도 가장 골치 아픈 부분이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;보험증권이 없어도 고객의 이름과 생년월일만 말씀해 주시면, 지급할 수 있는지 없는지 즉시 알아볼 수 있습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지로서는 이미 자살이 일어났다고 믿는 척하면서, 상대방의 이름을 알아내려고 노력하는 수밖에 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==여자는 아무 말이 없었지만 곤혹스러움을 감출 수 없는지 희미한 숨소리가 들려왔다. 수화기 건너편에서는 강렬한 긴장감이 주위의 공기를 압도하고 있으리라.

&amp;nbsp&amp;nbsp(click: ?page)[==어떻게 해야 할까. 수화기를 들고 있는 손에 촉촉이 땀이 베어나왔다. 상대는 진심으로 목숨을 끊으려고 하고 있다. 신지는 이미 그 사실을 추호도 의심하지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==물론 전화를 끊은 직후 상대방이 창문으로 뛰어내린다고 해도, 그에게 법적, 도의적 책임은 없다. 그는 어디까지나 고객의 문의에 대답했을 뿐이니까. 회사 규칙에도 자의적인 판단에 따라 고객의 질문에 대답하지 않는 것은 있을 수 없는 일이라고 되어 있다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 이대로 지나칠 수는 없다. 전화를 건 것은 물론 자살 면책에 대해서 묻고 싶기도 했겠지만, 그 이전에 무의식적으로 누군가에게 도움을 받고 싶다는 마음이 작용했기 때문 아닐까. 어떻게 하면 스스로 목숨을 끊으려는 사람을 만류할 수 있을까.

&amp;nbsp&amp;nbsp(click: ?page)[==여자의 입에서 가슴 깊은 곳으로부터 나오는 한숨이 터져나왔다. 그와 동시에 전화를 끊으려는 기척을 느끼고 신지는 말을 이을까 고민한다.

&amp;nbsp&amp;nbsp(click: ?page)[==[[계속해서 말하기-&gt;말하기]]</tw-passagedata><tw-passagedata pid="7" name="말하기" tags="" position="710.5,615" size="100,100">&amp;nbsp&amp;nbsp&quot;죄송합니다만, 끊지 말고 잠시만 기다리십시오.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;쓸데없는 참견일지도 모르지만, 잠시 제 말을 들어보시지 않겠습니까?

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;……무슨 말인데요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==여자의 목소리에서 갑자기 경계심이 흘러나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;만약에 아니라면 죄송합니다만, 손님께스는 지금 스스로 목숨을 끊으려고 하지 않습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==지금 내가 무슨 말을 하는 걸까. 자칫하면 명예회손으로 고소달할 수도 있는 일이다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 여자는 그의 질문에 대답하지 않았다. 만약에 자살이라는 것이 단순한 지레짐작이라면 여자는 화를 낼 것이고, 적어도 한 마디 정도는 반박할 것이다. 그런데 지금 잠자고 있다는 것은…….

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;만약에 그렇다면 다시 한 번 생각해 보시기 바랍니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[=그래도 여자는 침묵만을 지킬 뿐이었다. 그러나 가느다란 수화기를 타고, 그의 말에 귀를 기울이는 분위기가 전해졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;주제넘은 참견 같지만 이것만은 들어주시기 바랍니다. 분명히 목숨을 끊으면 가족에게는 보험금이 돌아갈지도 모릅니다. 그러나 남은 사람에게는 평생 치유할 수 없는 마음의 상처를 남겨주게 됩니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 잠시 주위를 둘러보았다. 회사 내의 분위기는 다소 소란스러운 상황이었다. 지금이라면 그 누구도 자신의 말에 귀를 곤두세우지는 않을 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이것은 보험회사 담당자 입장에서 하는 말이 아닙니다. 사랑하는 가족이 스스로 목숨을 끊는 상황을 지켜본 입장에서 드리는 말씀입니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그 누구에게도 한 적 없는 말을, 얼굴도 보지 못한 사람에게 고백하다니! 그는 자신의 입 밖으로 튀어나온 말을 믿을 수가 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;누가 돌아가셨죠?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==여자의 말투에서 희미한 변화가 느껴졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;형입니다. 초등학교 6학년이었지요. 그 당시 나는 4학년이었습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;……이유는요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;잘 모르겠습니다. 친구들에게 괴롭힘을 당한 것 같지만 학교에서는 끝까지 인정하지 않았습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==여자는 다시 침묵을 지켰다. 무슨 생각을 하는 것일까. 여자는 작게 한숨을 내쉬더니 다시 입을 열었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이름이 뭐라고 했지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지입니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 씨? 그 일을 한지 오래 되었나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아닙니다. 아직 1년밖에 되지 않았습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==몇 초의 침묵이 몇 시간처럼 느껴졌다. 여자는 쉰 듯한 목소리로 &quot;고마워요&quot;라고 중얼거리면서 불쑥 전화를 끊었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 수화기를 올려놓으면서, 과연 이것으로 좋았을까 하고 생각했다. 아직 흥분이 가시지 않고 마치 불이라도 붙은 듯이 귀가 화끈거렸다.

(click: ?page)[==[(goto: &quot;말하기2&quot;)]</tw-passagedata><tw-passagedata pid="8" name="말하기2" tags="" position="710.5,757" size="100,100">&amp;nbsp&amp;nbsp물론 자신의 말을 듣고 자살을 포기하지는 않았으리라. 그래도 과감하게 말한 것은 좋았을지도 모른다. 마지막 부분에서 미약하기는 하지만 진심이 통한 듯한 느낌이 들었기 때문이다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 지금의 전화 내용을 요시오에게 말해야 할지, 잠시 생각해 보았다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 결국 말하지 않기로 결심했다. 정상적인 업무에서 벗어나서 쓸데없는 부분까지 참견했다는 것이 마음에 걸렸고, 어차피 자신이 할 수 있는 일은 아무것도 남아 있지 않았다. 누가 전화를 걸었는지 밝혀낼 도리가 없기 때문이다.

&amp;nbsp&amp;nbsp(click: ?page)[==이제 남은 것은 본인에게 살아가려는 의지가 있느냐, 없느냐 하는 것이다. 다만 당분간은 사망보험금의 청구서류에 신경을 쓰기로 하자.

(click: ?page)[==[(goto: &quot;사망보험금&quot;)]</tw-passagedata><tw-passagedata pid="9" name="사망보험금" tags="" position="710.5,898" size="100,100">&amp;nbsp&amp;nbsp&quot;요시오 과장님, 잠시 의논드릴 것이 있는데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오가 자리에 앉자, 신지는 다른 방해가 끼여들기 전에 조금 전의 사망보험금 서류를 가지고 왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무슨 일이 있나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이것 말인데요, 조금 이상하지 않나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어느 부분이?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 사망의 단계와 상황을 가리키며 키 145센티미터의 노파가 높이 70센티미터밖에 되지 않는 서랍장 손잡이에 끈을 묶고 목을 매달았다는 것은 너무 이상하지 않느냐고 물었다.

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 사망진단서를 천천히 흝어보았지만 특별히 흥미가 솟구친 것 같지는 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이것은 흔히 있는 일 아닌가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==틀림없이 살인 사건이라고 생각하던 신지는 왠지 맥이 풀려 버렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;흔히 있는 일이라구요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;높은 곳에서만 목을 매다는 것은 아니야. 오히려 자기 키보다 낮은 곳에서 목을 매는 편이 더 많을 정도지. 예전에 센다이 지사에 있었을 때인데, 알츠하이머 진단을 받고 고민하던 어느 할머니가 병원 침대에 있는 쇠파이프에 환자복의 허리띠를 묶고 목을 맨 일이 있었어. 그런데 그 높이가 고작해야 40, 50센티미터 정도나 되었을까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래요……?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇지만 마음에 걸린다면 영업소장에게 관할 경찰서에 가보라고 하게. 그런 다음 의심할 여지가 없다고 하면 자네도 납득할 수 있을 게 아닌가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇게 하겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 씁쓸한 미소를 지으며 서류를 받아들였다. 안도와 낙담이 뒤섞여 있는 듯한, 이상한 느낌의 쓴웃음이었다.

(click: ?page)[==[(goto: &quot;5월 7일&quot;)]</tw-passagedata><tw-passagedata pid="10" name="5월 7일" tags="" position="1103,403" size="100,100">&amp;nbsp&amp;nbsp5월 7일 화요일

&amp;nbsp&amp;nbsp(click: ?page)[==연휴가 끝나고 처음 출근하는 날은 아침부터 정신이 없고 어딘가 안정되지 않은 분위기가 떠다니는 법이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==10시가 지났을 때 세무서 직원이 찾아와서 플라스틱 케이스 안에 들어 있는 신분증명서를 보여주고, 고객의 자세한 보험 계약 내용을 보여달라고 졸라댔다.

&amp;nbsp&amp;nbsp(click: ?page)[==프라이버시에 관한 것이기 때문에 서면을 통해 정식으로 요청해 달라고 해도 세무서 직원은 꼼짝도 하지 않았다. 그는 도저히 공문원이라고는 생각할 수 없는 거만한 태도로, 어디에서나 신분증명서만 내면 보여준다고 오히려 큰소리를 쳤다. 세무서나 복지사무소에서는 거의 매일같이 보험계약 내용에 고나한 요청이 들어오는데, 본인의 동의서나 관공서의 정식 요청서가 없으면 알려줄 수 없다는 것이 보험회사의 기본 원칙이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==세무서 직원의 목소리는 점점 거칠어졌지만, 그 정도 목소리에는 이미 익숙해진 터였다. 결국 옥신각신한 끝에 세무서 직원은 두고 보자는 식으로 발을 쿵쾅거리며 돌아갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==그가 나가자마자 도쿄에서 쇼와생명의 고문변호사가 찾아와서 기타니와 요시오, 신지 세 사람이 그를 맞았다. 현재 교토지방재판소에 계류중인 사건의 제1차 구두변론이 내일 벌어지게 되어 있는데, 그것을 협의하기 위해 찾아온 것이다. 보험금 수취를 둘러싼 상속인들 간의 골육쟁탈전으로, 쇼와생병은 그들의 분쟁에 휘말려 있는 상태였다.

&amp;nbsp&amp;nbsp(click: ?page)[==하지만 제1차 구두변론에서는 다음 일정을 정할 뿐, 실질 심리는 행하지 않는다. 신지와 나이 차이가 별로 나지 않는, 앞머리를 길게 기른 변호사는 여행 온 기분인지, 차를 마시고 세상 이야기를 하더니 이윽고, 관광지로 가는 길을 물어서는 열심히 메모하기 시작했다.

&amp;nbsp&amp;nbsp(click: ?page)[==점심시간이 끝나고 가장 먼저 창구에 나타난 고객은 언뜻 보기에도 동양인이 아니라는 것을 알 수 있엇다. 곱슬거리는 머리칼은 검은색이었지만, 피부는 쟂빛 구름처럼 창백했다. 그가 발길을 들여놓자마자 신지는 자기도 모르게 자리에서 벌떡 일어났다. 물론 교토에는 외국인 관광객이 많기는 하지만 보험회사 창구에 나타나는 일은 거의 없기 때문이다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 조금 곤혹스러운 표정을 지으며 카운터 앞에 앉았다. 20대 초반으로 보이는 남자로, 얼굴만 보아서는 국적을 알 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==남자는 궁지에 몰린 듯한 절박한 표정으로 입을 열자마자, 외국인은 보험에 가입할 수 없느냐고 물었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 기억에 남아 있는 대학 입시 영어를 끌어내면서, 반드시 일본 국적은 필요하지 않지만 일본에 거주해야 하는 것이 원칙이라고 대답했다. 그러자 남자는 보험 가입시 검사가 필요하느냐고 물었다.

&amp;nbsp&amp;nbsp(click: ?page)[==가입하는 보험의 종류와 금액에 따라서 의사의 진단이 필요한 경우와 고지서에 기입하는 것으로 충분한 경우가 있다고 대답하자마자, 남자는 거듭해서 검사가 필요하느냐고 물었다. 무슨 검사냐고 물어도 분명한 대답은 하지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 굳은 미소를 떠올리며 마음속에 일어난 동요를 감추었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 신중하게 말을 선택하면서, 혈액 검사는 필요 없지만 보험에 가입할 당시 병에 걸린 경우에는 알려줄 의무가 있고, 사망한 다음에 고지 의무를 위반했다는 사실이 밝혀지면 보험금은 지급되지 않는다고 대답했다.

&amp;nbsp&amp;nbsp(click: ?page)[==남자가 납득한 표정을 짓는 것을 보고 신지는 안도의 한숨을 내쉬었다. 그런 다음 남자가 탄 엘리베이터 문이 닫히는 것을 바라보고 가만히 고개를 끄덕였다.

&amp;nbsp&amp;nbsp(click: ?page)[==실제로 에이즈는 점차 치명적인 병에서 제외되고 있고, 미국에서는 HIV 항체의 양성 판정을 받아도 보험에 가입할 수 있도록 하려는 움직임이 있다는 말도 들었다. 그러나 일본에서 그것이 실제로 적용도리 때까지는 아직 많은 세월이 필요하지 않을까.

&amp;nbsp&amp;nbsp(click: ?page)[==자리로 돌아오자 요사오가 이상한 표정을 지으며 수화기를 놓으려고 하다가 문득 신지를 쳐다보고 손짓을 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 주임, 자네를 지명한 사람이 있어.&quot;

(click: ?page)[==[(goto: &quot;고모다 사치코&quot;)]</tw-passagedata><tw-passagedata pid="11" name="고모다 사치코" tags="" position="1103,550" size="100,100">&amp;nbsp&amp;nbsp요시오는 휘갈겨쓴 메모지와 보험계약의 내용을 주었지만, 신지는 그것이 무슨 뜻인지 알 수 없었다. 보험계약의 내용은 세 장으로 이루어져 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==계약자 고모다 사치코, 피보험자 고모다 사치코, 보험금 수취인 고모다 시게노리의 3,000만 엔짜리 정기 종신보험. 피보험자가 고모다 시게노리로 되어 있는, 역시 3,000만 엔짜리 정기 종신보험. 그리고 또 하나는 500만 엔짜리 어린이용 학자금보험으로, 피보험자는 고모다 가즈야로 되어 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고모다 시게노리라는 사람에게서 전화가 왔었다네. 아는 사람인가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아닙니다. 처음 듣는 이름인데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 고객이 불만을 제기하면 우선 상대방의 나이를 보는 버릇이 있었다. 45세. 경험으로 보아 가장 위험한 나이는 39대 초반이지만, 이 정도의 나이라고 해도 아직은 방심할 수 없다.

&amp;nbsp&amp;nbsp(click: ?page)[==주소를 보자 아라시야마 근처로, 비교적 고급 주택가가 밀집한 지역이었다. 그는 기억을 더듬어 보았지만 그 이름과 지역에서는 아무것도 나오지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래? 그럼 왜일까……? 일부러 신지 주임을 지명하면서 와달라고 하는데?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;불만 내용은 뭡니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;워낙 중얼거리듯이 말해서 잘 모르겠어. 아무래도 수금하러 오는 생활설계사의 태도가 나쁘다는 것 같아.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;화가 머리끝까지 치밀어 있던가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 고개를 조금 갸우뚱거리며 대답했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇지는 않았어. 담당 지역 영업소장에게 가라고 할 수도 있지만, 그쪽에서 일부러 자네를 지명했으니까 미안하지만 가줄 수 있겠나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;알겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==어차피 사무실에 있어도 뒤를 이어 끊임없이 성가신 고객만 찾아오고 있어서, 대단한 불만이 아니라면 오히려 밖으로 나그는 것은 두 손을 들고 환영하고 싶은 기분이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==수금은 우즈마사 영업소에서 담당하고 있는데, 일단 영업소장에게 전화를 걸었지만 외출해서 사무실에 없다는 대답이 돌아왔다. 그는 별다른 문제가 없을 것이라고 생각하고, 지도를 펼쳐서 해당 페이지를 복사했다.

&amp;nbsp&amp;nbsp(click: ?page)[==밖으로 나가자 상큼한 5월의 푸르른 하늘이 드넓게 펼쳐져 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 근처에 있는 쇼와생명 단골 제과점에서 선물용 과자를 샀다. 고충 내용에 따라서 선물의 크기가 다르지만, 이번에는 가장 작은 것으로 충분할 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==한 량밖에 없는 낡은 전차는 넓은 길에서 좁은 골목길로 파고들어, 일반 주택의 처마 끝이나 울타리를 스치듯이 달려갔다. 목적지에 다가갈수록 신지는 왠지 안정이 되지 않아 다리를 덜덜 떨었다.

&amp;nbsp&amp;nbsp(click: ?page)[==종점인 아라시야마의 한 정거장 앞에 사가역전이라는 이름의 역이 있는데, 고모다의 집은 그곳에서 걸어서 10분 정도 걸리는 거리에 있었다.

(click: ?page)[==[(goto: &quot;고모다 사치코2&quot;)]</tw-passagedata><tw-passagedata pid="12" name="고모다 사치코2" tags="" position="1103,703" size="100,100">&amp;nbsp&amp;nbsp그 주변에는 오랜 옛날부터 부유한 집들이 많아서, 고풍스러운 커다란 담장 안쪽에서는 햇살에 반짝거리는 볼보나 벤츠 같은 외제차를 볼 수 있었다. 지도를 한 손에 들고 커브길을 돌아 가자,


(click: ?page)[==&lt;img src=&quot;./img/house.png&quot; alt=&quot;house&quot;&gt;&lt;br&gt;&lt;br&gt;커다란 울타리가 있는 맞은편에서 거의 썩어들어가는 새카만 집이 보였다.

&amp;nbsp&amp;nbsp(click: ?page)[==그 순간, 그는 갑자기 날카로운 칼로 심장을 도려내는 듯한 괴로움을 맛보았다.

&amp;nbsp&amp;nbsp(click: ?page)[==지도에 의하면 그 집이 틀림없었다. 집 자체는 쓰러지기 일보 직전이었지만, 대지만은 상당히 넓었다. 넓은 담 안쪽에 있는 정원에서는 목이 터져라 짖어대는 개들의 울음소리가 들려왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==대문만은 비교적 새로 만든 것 같았는데, 주위에 있는 집들과는 어울리지 않는 날림 공사였다. 문패를 보니 &#39;고모다 시게노리&#39; 라는 이름이 걸려 있었다. 틀림없다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 마음속으로 싶은 숨을 토해내고 인터폰을 눌렀다. 잠시 기다려보았지만 아무런 대답이 없었다. 다시 한 번 누르면서 실례한다고 소리를 질렀지만, 개들이 짖어대는 소리 말고는 아무런 반응도 느낄 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 문득 등뒤에에서 시선을 느끼고 뒤를 돌아보았다. 건너편 대문에서 나온 중년의 여자가 자신을 쳐다보고 있었다. 아마 그 집에 사는 주부이리라. 그러나 그각 인사를 하자 여자는 당황한 표정을 지으며 황급히 안으로 들어갔다. 여자가 소리내어 문을 닫아버리는 바람에 그 집에 대해서는 물어볼 수도 없었다.

(click: ?page)[==[(goto: &quot;검은집&quot;)]</tw-passagedata><tw-passagedata pid="13" name="검은집" tags="" position="1104,861" size="100,100">&amp;nbsp&amp;nbsp음침한 집에서 다가오는 막연하나마 꺼림칙한 느낌. 그리고 앞집 여자의 수상쩍은 태도, 그는 고모다가 주위로부터 고립되어 있다는 인상을 받았다.

&amp;nbsp&amp;nbsp(click: ?page)[==그나저나 어떻게 된 것일까. 요시오가 즉시 가라고 했는데, 시간 약속은 하지 않은 것일까. 그러고 보니 고모다가 중얼거리듯이 말해서 잘 알아들을 수 없다고 하지 않았는가. 어쩌면 두 사람의 대화에서 어떤 오해가 있었는지도 모른다.

&amp;nbsp&amp;nbsp(click: ?page)[==어쨌든 집에 없다면 하는 수 없다. 다른 때 같으면 잠시 기다렸다가 만나고 가겠지만, 오늘은 그런 마음이 들지 않았다. 한시라도 빨리 그 자리에서 떠나고 싶다는 마음밖에 없었던 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==빨리 이 자리에서 떠나라! 그러지 않으면 위험하다!

&amp;nbsp&amp;nbsp(click: ?page)[==조바심과 같은 불쾌한 감각이 그를 황급히 재촉했다. 그러나 뒷걸음질치던 신지의 눈에 (click: ?page)[=={(track: &#39;scary1&#39;, &#39;playwhenpossible&#39;)}(text-color: red)[그 집으로 다가오는 중년의 남자가 들어왔다.]

&amp;nbsp&amp;nbsp(click: ?page)[==기름때에 찌든 작업복을 입은 남자가 그를 향해 똑바로 다가오고 있는 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==키는 신지와 비슷했지만, 가슴이 빈약하고 팔다리가 가늘어서 초라한 인상을 주었다. 머리는 벗겨졌지만 그렇게 나이가 많은 것 같지는 않고, 새카만 두 눈은 무엇인가를 응시하는 것처럼 미동조차 하지 않았다. 얼굴 전체에 비해서 어울리지 않을 정도로 작은 입에는 이해할 수 없는 야릇한 미소가 떠올라 있었다. 남자의 얼굴을 쳐다보고 있자 왜 진작에 그 자리를 떠나지 않았는지, 후회가 밀물처럼 밀려들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;누구슈?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==남자가 먼저 입을 열었다. 말을 자주 하지 않는 탓인지 발음이 정확하지 않았다. 중얼거리는 듯이 말하는 바람에 몹시 알아듣기 힘들었다는 요시오의 말은 틀림없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;쇼와생명 교토 지사에 근무하고 있는 신지라고 합니다. 고모다 씨인가요? 조금 전에 전화를 주셨다고 해서 찾아왔습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아아, 그러슈. 집에 아무도 없나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 아무도 없는 것 같은데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이상하네…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 작업복 주머니에 오른손을 넣고 열쇠를 꺼냈는데, 왼손에는 때가 꼬질꼬질 묻어 있는 장갑을 끼고 있었다. 그가 문을 열고 안으로 들어가자, 신지는 하는 수 없이 그 뒤를 따라갔다.

(click: ?page)[==[(goto: &quot;검은집2&quot;)]</tw-passagedata><tw-passagedata pid="14" name="hal.tracks" tags="" position="699,100" size="100,100">scary1: ./sound/scary1.mp3

scary2: ./sound/scary2.mp3

break: ./sound/break.mp3

ring: ./sound/ring.mp3</tw-passagedata><tw-passagedata pid="15" name="검은집2" tags="" position="1102,1001" size="100,100">&amp;nbsp&amp;nbsp고모다가 돌아온 것을 알았는지 몇 마리의 개들이 마당에서 달려왔다. 갈색의 잡종과 귀가 축 늘어진 새하얀 잡종, 가련한 눈을 가진 덩치 큰 검은 개……. 버림받은 개들을 모조리 주워 온 듯한 느낌이 들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 그 자리에 웅크리고 앉아서 순서대로 개를 껴안고 뺨을 비볐다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;오오, 젠타. 심심했니? 이 아빠가 보고 싶었어? 그래그래? 준코, 너도 이리로 오렴.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==애완동물이라고 하기보다는 마치 자식을 대하는 것 같았다. 그렇게 끊임없이 개를 상대하는 동안, 고모다는 신지의 존재를 완전히 잊어버린 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==개들이 다시 마당으로 뛰어가자 고모다는 열쇠 다발을 들고 현관문을 열더니, 신지에게 먼저 안으로 들어가라고 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;지저분하지만 들어가시오.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그러면 실례하겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==어두컴컴한 집 안으로 발을 들이민 순간, 이상한 냄새가 코로 파고들었다. 그러자 다음 순간, 마치 정체를 알 수 없는 짐승의 소굴로 들어가고 있는 듯한 착각마저 일어났다.

&amp;nbsp&amp;nbsp(click: ?page)[==오래 된 집에는 어디에나 독특한 냄새가 배어 있는 법이지만, 이 집의 경우는 그 정도가 아니었다. 음식물 쓰레기가 썩은 것 같은 불쾌한 냄새와 함께 산성의 부패 냄새와 비릿한 사향 냄새가 복잡하게 뒤섞여서 갑자기 구토가 치밀었다.

&amp;nbsp&amp;nbsp(click: ?page)[==무슨 냄새인지는 짐작도 되지 않았지만 그 냄새는 오랜 세월에 걸쳐 집 전체에 덕지덕지 달라붙어 있었다. 누구나 자기 집의 냄새에는 둔감한 법이지만, 이런 상태에서 태연히 있을 수 있는 것은 이상하다고밖에 할 수 없었다. 신지는 주머니에서 손수건을 꺼내 코와 입을 막고 싶다는 욕망과 치열하게 싸워야 했다. 불만의 내용이 어떠한 것이든, 한시라도 빨리 처리하고 떠나는 것이 상책이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==복도 바닥에서 뿜어나오는 검은 빛은, 코를 찌르는 악취 속에서 때마저도 숨을 못 쉬고 엉겨붙었다고밖에 볼 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그때 신발장을 내려다보던 고모다가 들릴 듯 말 듯 나지막하게 중얼거렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;뭐야? 가즈야가 있잖아? ……벌써 학교에서 돌아왔나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신발장 구석에는 초등학생 정도의 어린이용 운동화가 가지런히 놓여 있었다. 할 수만 있다면 집 아능로 들어가고 싶지 않았지만, 그는 신발을 벗어 그 옆에 나란히 놓았다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 안으로 들어가면서 집 안을 향해 소리쳤다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가즈야, 가즈야……!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==안에서 아무런 대답이 없자, 고모다는 갑자기 뒤를 돌아보고 히죽거렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무슨 냄새라도 나시오?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 얼굴을 찡그리면서 고개를 가로젓는 수밖에 없었따.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다의 코가 전혀 작동하지 않는 것은 아닌 것 같다. 적어도 악취의 존재는 인식하고 있다. 그렇다면 왜 냄새를 없애려고 노력하지 않는 것일까.

(click: ?page)[==[(goto: &quot;검은집3&quot;)]</tw-passagedata><tw-passagedata pid="16" name="검은집3" tags="" position="1102,1154" size="100,100">&amp;nbsp&amp;nbsp신지는 마당과 마주하고 있는 거실을 지나갔다. 그곳에서도 냄새는 지독했지만 창문을 통해 들어오는 바람 때문에 조금은 참을 수 있을 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 탁자 앞에 앉더니, 신지에게 그 앞쪽에 앉으라고 손짓했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;오래 기다렸나 보군요. 일이 생각보다 늦게 끝나 이렇게 됐소.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;저도 이제 막 도착했습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 잠시 말을 멈추고 선물로 가져온 과자를 앞으로 내밀었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;전화를 주신 고모다 시게노리 씨인가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇소.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;저희 영업소 직원이 실례를 저지른 것 같은데, 정말 죄송합니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이렇게 일일이 찾아다니려면 당신도 힘드시겠소.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 과자를 받으면서도 다른 생각을 하고 있는지, 집 안으로 들어왔는데도 왼손에 낀 장갑을 벗지 않았다. 게다가 가장 중요한 불만 사항에 대해서도 전혀 말을 꺼내려고 하지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==무엇 때문에 자신을 여기까지 부른 것일까. 신지는 고모다가 자신을 지명했다는 요시오의 말을 떠올렸다. 이름은 기억하지 않아도 얼굴을 보면 알 것이라고 생각했지만, 회사 창구에서도 고모다를 본 적은 한 번도 없는 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==그렇다면 어떻게 해서 자신의 이름을 알고 있었던 것일까.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;얘야, 가즈야. 집에 있다면 이쪽으로 나와보렴.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 갑자기 고개를 길게 빼고 신지의 등뒤에 있는 방을 향해 소리쳤다. 그 동작이 기묘하게도 어색해 보였다. 그래도 안에서는 대답이 없고, 집 안은 쥐죽은듯이 고요했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가즈야, 손님이 오셨으면 인사를 해야지? 그러면 실례잖아!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아니, 괜찮습니다…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 다랠듯이 말했지만, 고모다는 불만스러운 듯 혀를 끌끌 찼다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;저 문을 좀 열어보지 않겠소?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예예?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그곳은 공부방인데, 가즈야는 아마 그 방에 있을 거요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 하는 수 없이 일어서서 &#39;실례한다&#39;는 말과 함께 문을 빠끔히 열었다.

(click: ?page)[==[(goto: &quot;검은집4&quot;)]</tw-passagedata><tw-passagedata pid="17" name="검은집4" tags="" position="1102,1302" size="100,100">&amp;nbsp&amp;nbsp그 순간 그는 새하얀 눈을 치켜뜨고 자신을 쳐다보고 있는 소년과 시선이 마주쳤다. 열 살쯤 됐을까 창백한 얼굴에 입을 절반쯤 벌린 데다가 코에는 콧물이 말라붙어 있었다.


(click: ?page)[==&lt;img src=&quot;./img/hanging.png&quot; alt=&quot;hanging&quot; width=&quot;100&quot;&gt;{(track: &#39;scary2&#39;, &#39;playwhenpossible&#39;)}
&lt;br&gt;&lt;br&gt;&amp;nbsp&amp;nbsp그는 한동안 눈을 깜빡거렸다. 소년은 두 손과 두 발을 축 늘어뜨린 채 바닥에서 50센티미터 정도 되는 허공에 대롱대롱 매달려 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==다음 순간, 안쪽에 있는 쇠파이프와 소년 사이에 있는 팽팽한 끈 같은 존재가 그의 시선으로 뛰어들었다. 소년의 바로 밑에 있는 바닥은 물을 엎지른 것처럼 색이 변해 있었고, 그 뒤에는 바퀴 달린 의자가 쓰러져 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그것이 목을 매달아 죽은 시체라는 것을 깨달은 다음에도, 얼마 동안이나 망연자실하게 서 있었는지 모른다. 신지는 문득 제정신으로 돌아왔다. 어느 사이엔가 고모다가 그의 옆에 와서 서 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다에게 얼굴을 향산 순간, 새카만 눈동자와 시선이 부딪쳤다. 한순간 고모다의 무표정한 얼굴에 낭패스러운 기운이 스치면서, 그는 신지에게서 눈길을 돌렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==막연한 위화감은 눈 깜짝할 사이에 경악으로 바뀌었다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 목을 매달고 죽어 있는 자기 자식은 전혀 쳐다보지 않고, (click: ?page)[==(text-color: red)[놀랍게도 신지의 반응을 살피고 있었던 것이다. ](click: ?page)[==그것도 감정의 동요 따위는 티끌만큼도 찾아볼 수 없는 냉정한 관찰자의 눈으로!

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 신지의 눈길을 피하면서 허공에 매달려 있는 시체 옆으로 걸어갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가즈야, 왜 이런 짓을…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그의 입에서 나지막한 중얼거림이 새어나왔다. 그러나 그 대사는 일부러 지어내는 것처럼 너무나 건성으로 들려왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==그곳에는 마치 두 종류의 다른 시간이 흐르고 있는 것 같았다. 고모다의 연극적인 행동은 주위 세계의 시간이 정상적으로 흐르고 있다는 것을 보여주었고, 가슴을 찢는 공포로 눈을 크게 뜨고 있는 소년 주위의 시간은 얼어붙어 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 벌린 입을 다물지 못하고, 경악한 표정으로 고모다를 쳐다보았다. 고모다는 결코 시체에는 손을 대려고 하지 않았다. 마치 시체에 자신의 지문이 남는 것을 두려워하는 것처럼.

&amp;nbsp&amp;nbsp(click: ?page)[==문득 목구멍에서 구토가 치밀어올라와서, 신지는 황급히 손수건으로 입을 틀어막았다. 코를 찌르는 시큼한 냄새 때문인지, 눈에서 눈물이 배어나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 그 자리에서 꼼짝도 하지 않고 멈추어선 채, 죽을힘을 다해 구토하고 싶은 욕망과 싸워야 했다.

(click: ?page)[==[(goto: &quot;수사&quot;)]</tw-passagedata><tw-passagedata pid="18" name="수사" tags="" position="1304,402" size="100,100">&amp;nbsp&amp;nbsp5월 7일 화요일&amp;nbsp(click: ?page)[==늦은 오후&amp;nbsp(click: ?page)[==검은 집

&amp;nbsp&amp;nbsp(click: ?page)[==고모다의 저택 주위에는 출입금지라는 팻말이 붙은 밧줄과 함께 수많은 경찰관으로 북적거렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==조금 전까지는 감식계가 잠시도 쉬지 않고 끊임없이 플래시를 터뜨렸지만, 이미 사진 촬영이 끝났는지 지금은 &#39;KYOTO POLICE&#39; 라고 적힌 기동복에 모자를 눌러 쓴 뚱뚱한 경관이 어슬렁거리며 플라스틱 사다리를 올라가는 참이었다. 요시오만큼은 되지 않았지만 제법 몸무게가 나가는 경관이 사다리에 올라가자 차가운 방 안 공기를 뚫고 삐걱거리는 금속성 소리가 울려 퍼졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==천장이 높아서 그런지, 끊을 묶어놓은 쇠파이프는 2미터 정도의 높이에 있었다. 뚱뚱한 경관이 커다란 칼로 끈을 자르자 아래에 있던 두 명의 경관이 사체를 받아서 방수포 같은 천 위에 내려놓았다. 그들은 남아 있던 끈도 매듭을 풀지 않고 잘라서 투명한 비닐 주머니 안에 넣었다. 아마 나중에 매듭을 조사하려는 것이리라.

&amp;nbsp&amp;nbsp(click: ?page)[==사체의 팔다리는 인형처럼 축 늘어져 있고, 이미 사후 경직이 시작되었는지 아무리 흔들어도 미동조차 하지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 조금 떨어진 곳에서 우두커니 서 있었다. 마치 영화나 연극의 한 장면 같아서, 실제로 일어난 일아라고는 믿어지지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==그런 다음 사체 앞에서 멍하니 서 있는 고모다의 뒷모습을 힐끔 쳐다보았다. 아마 언뜻 보면 자식을 잃어버린 아버지가 고개를 떨구고 망연자실하고 있는 것처럼 보일 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==아이의 어머니는 아직 집에 돌아오지 않았다. 집에 와서 이 사태를 본다면 기절하지 않을까.

&amp;nbsp&amp;nbsp(click: ?page)[==누군가 어깨를 치는 바람에 신지는 제정신을 돌아왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==뒤를 돌아보자 사복을 입은 형사 같은 남자가 서 잇었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;당신이 연락한 사람이지요? 잠시 얘기를 들을 수 있을까요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==평소 같으면 형사가 이야기를 나누자는 것만으로 엄청난 스트레스를 받았을 것이다. 그러나 지금의 신지에게는, 형사의 말이 자신을 구해주는 구원의 목소리처럼 들려왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==처럼한 장면을 가슴에 담아두고 있는 것은 견딜 수 없는 일이다. 지금 그의 온몸에는 가슴을 쥐어뜯는 불쾌한 긴장감이 덕지덕지 달라붙어 있었다. 안정을 잃고 쿵쾅거리는 심장의 고동, 손바닥에 배어나온 끈적거리는 비지땀, 그는 빨리 누군가에게 털어놓아 마음의 부담을 덜어버리고 싶은 생각밖에 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 여기에서는 곤란하다. 멍한 표정으로 서 있는 고모다가 자기 쪽으로 귀를 쫑긋 세우고 있는 듯한 기분이 들었기 때문이다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 타는 듯한 목으로 침을 집어삼켰다.

(click: ?page)[==[(goto: &quot;수사2&quot;)]</tw-passagedata><tw-passagedata pid="19" name="수사2" tags="" position="1302,554" size="100,100">&amp;nbsp&amp;nbsp&quot;저……, 될 수 있으면 아무도 없는 곳에서 이야기를 하고 싶은데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래요? 그러면 바끙로 나갈까요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==형사는 신지의 말을 별로 뜻밖이라고 받아들이지 않고 앞장을 섰다. 그리고 밖으로 나가자 커다랗게 심호흡을 하고 나서 미소를 지으며 뒤를 돌아보았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;나도 사실, 저렇게 썩은 냄새가 나는 집에는 오래 있고 싶지 않았거든요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==형사는 순찰차 뒷자석을 열고 신지를 안으로 들여보낸 다음 나란히 앉았다.

&amp;nbsp&amp;nbsp(click: ?page)[==순찰차에 탄 것도, 형사와 이야기를 하는 것도 태어나서 처음이었다. 막상 순살차에 올라타니 일반 자동차와 별로 다르지 않았다. 그때 갑자기 예전에 들은, 순찰차의 문은 자기 마음대로 열 수 없다는 말이 떠올랐다. 형사가 풀어주지 않으면 밖으로 나갈 수 없다고 생각하니, 이상한 압박감이 가슴을 내리누르는 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 수첩을 꺼낸 형사를 새삼스럽게 쳐다보았다. 30대 중반이나 됐을까, 형사치고는 조금 가냘픈 몸을 셔츠와 양복으로 감싸고 있었다. 말투는 부드럽고 얼굴 표정도 온화한 편이지만, 꼬불꼬불한 아줌마 파마를 했기 때문인지 평범한 샐러리맨으로 보이지는 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지가 명함을 내밀고 자신을 소개하자, 형사도 명함을 주었다. 명함에는 도쿄 경찰서 수사1과, 마쓰이 기요시라고 되어 있었다. 고나할 파출소가 아니라 본서의 형사로, 더구나 수사1과는 살인 같은 흉악한 범죄를 담당하는 부서이다. 경찰에서는 처음부터 사건성이 있다고 보는 것이 아닐까. 그는 갑자기 든든한 아군을 얻은 듯한 기분이 들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==기요시는 신지가 건네준 명함을 뚫어지게 쳐다보면서 입을 열었다,

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;쇼와생명 교토 지사의 보전담당…… 주임이라구요? 그러면 보험 영업을 하는 것은 아닌가요? 보험회사에 다니시는 분이 이 집에는 어떻게 오신 거지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고모다 씨가 전화로 나를 직접 지명해서, 불만이 있으니까 와달라고 했습니다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;불만이 있다구요? 어떤 불만인가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그게…… 잘 모르겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;모른다구요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;보험료를 받으러 온 직원에 관한 불만 같은데, 전화로는 도저히 이해할 수 없는 말만 했다고 합니다. 그런 다음 나를 직접 지명했기 때문에, 어쨌든 이야기를 들으려고 찾아온 거지요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;일부러 신지 씨를 지명했다니, 예전부터 알고 있는 사이였나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아닙니다. 오늘 처음 만났습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래요? 그러면 신지 씨의 이름을 어떻게 알고 있었던 것일까요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그것도 잘 모릅니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==무엇인가를 느꼈는지, 기요시의 눈에서 예리한 빛이 뿜어나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런데 생명보함은 얼마나 들어 있지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고모다 씨 부부가 각각 3,000만 엔, 아이가 500만 엔입니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;3건이나 들어 있어요? 다달이 내는 보험금도 만만치 않겠는데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇습니다. 모두 합치면 한 달에 5,6만 엔은 될 겁니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;나중에 자세한 자료를 받을 수 있을까요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 다만 서면으로 요청해 주셨으면 좋겠는데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==보전담당자는 이런 때에도 원칙을 잊어서는 안 된다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;물론 서면으로 요청하구말구요. ……그런데, 사체를 발견했을 때의 경위를 듣고 싶은데요.&quot;

(click: ?page)[==[(goto: &quot;수사3&quot;)]</tw-passagedata><tw-passagedata pid="20" name="수사3" tags="" position="1301,703" size="100,100">&amp;nbsp&amp;nbsp신지는 자동차 시트 위에서 엉덩이를 움직여 자세를 바로잡았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;안으로 들어갔더니, 고모다 씨가 &#39;가즈야&#39; 하고 아이의 이름을 불렀습니다. 그런데 아무런 대답이 없자 나에게 아이가 있는 방의 문을 열어달라고 하더군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고모다 씨가 신지 씨에게 직접 문을 열어달라고 했나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==기요시는 연필에 침을 묻히며 부지런히 수첩에 메모했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런 다음에요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;자리에서 일어나서 아이의 방문을 열었지요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래서 시체를 발견하셨군요? 그렇군, 그래요…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 크게 숨을 들이쉰 다음 머뭇거리며 말을 꺼냈다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;저, 그때의 상황이 말이죠…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그때, 고모다 씨의 모습을…… 말씀드리는 편이 좋을 것 같아서요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==기요시의 눈에서 번쩍 빛이 나는 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;말씀하세요. 무엇이든지 좋습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 두 손에 배어난 땀을 신경질적으로 바지에 닦았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;처음에는 사체에 정신을 빼앗기는 바람에 고모다 씨를 쳐다 볼 여유가 없었습니다. 그런데 어느 순간 고모다 씨가 내 옆에 서 있더군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래서요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;문득 고모다 씨를 쳐다보았습니다. 무슨 말을 하려고 한 것이지요. 무슨 말인지를 잊어버렸지만요. 그 순간, 고모다 씨가 나를 보고 있다는 것을 깨달았습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 씨를 보았다구요? 무슨 뜻이지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==기요시의 눈빛이 한층 더 날카로워진 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;자식의 시체를 보지 않고 나를 쳐다보는 것이었습니다. 이런 말을 해도 좋을지 모르겠지만…… 자식의 시체보다도 내 반응에 신경을 쓰고 있다는 느낌을 받았습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 자기 말의 무게를 곱씹어 보았다. 그는 지금 고모다를 살인 혐의로 고발하는 것이나 마찬가지다. 잠시 침묵을 지키다가 입을 연 기요시의 목소리에서는 싸늘한 긴장에 묻어나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;분명합니까? 혹시 착각일 수도 있잖습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아닙니다. 분명합니다.&quot;

(click: ?page)[==[(goto: &quot;수사4&quot;)]</tw-passagedata><tw-passagedata pid="21" name="수사4" tags="" position="1301,853" size="100,100">&amp;nbsp&amp;nbsp&quot;신지 씨가 고모다 씨를 쳐다보았을 때, 우연히 고모다 씨도 신지 씨를 쳐다보았을 수도 있지 않습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아닙니다. 그 전부터 계속 나를 관찰했다는 느낌을 받았습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어떻게 알지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;눈이 마주친 순간, 고모다 씨가 시선을 피했으니까요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==사람은 어떻게 대처해야 할지 알 수 없는 순간, 무의식적으로 상대방의 눈을 쳐다보는 법이다. 그리고 상대방의 눈 속에서 자신과 똑같은 공포와 놀라움을 읽어내고 안도의 한숨을 토해내는 것이다. 그러나 고모다는 자신에게서 시선을 피했다. 그 시선에서는 신지의 반응을 알고 싶지만 자신의 표정은 보이고 싶지 않다는 의지를 똑똑히 느낄 수 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==바야흐로 기요시의 얼굴에는 분명한 긴장감이 새겨졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==언젠가 형사들은 보통 물증보다는 심증에 무게를 둔다는 말 을 들은 적이 있다. 지레 짐작해서 범인으로 모는 것은 위험한 일이기는 하지만, 의외로 첫인상은 빗나가지 않는다는 것이다. 

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 마음 깊은 곳에서 안도의 한숨을 내쉬었다. 어쨌든자 신은 책임을 다했다. 경찰 기구라는 조직의 버튼을 누른 지금, 기계가 작동하기만 기다리면 된다. 그리고 모든 것은 머지 않아 표면으로 드러날 것이다.

(click: ?page)[==[(goto: &quot;5월 15일&quot;)]</tw-passagedata><tw-passagedata pid="22" name="5월 15일" tags="" position="1502,401" size="100,100">&amp;nbsp&amp;nbsp5월 15일 수요일

&amp;nbsp&amp;nbsp(click: ?page)[==고모다 가즈야의 사망보험금 청구서류가 도착한 것은, 사건이 일어난 지 일주일 뒤의 일이었다. 교토 3대 축제의 하나인 아오이 축제의 시작으로, 등나무 꽃으로 장식한 우마차가 넓은 대로를 활보하는 날이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다의 서류는 히로미가 일차적으로 확인한 산더미 같은 서류 속에, 그것도 내동댕이친 것처럼 파묻혀 있었다. 아마 오늘 아침 영업소에서 온 오토바이 택배편에 들어 있었으리라.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 서류를 들추가 가장 먼저 사체검안서를 확인했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&#39;11. 사망의 종류&#39;를 살펴보니 역시 자살이 아니라 &#39;기타 및 불분명&#39;의 난에 동그라미가 쳐져 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==13번의 수단 및 상황에 시선을 고정하자, 짐을 묶는 나일론 끈을 천장에 있는 쇠파이프에 묶고, 직경 30센티미터의 고리를 만들어 목을 매달았다고 생각된다고 쓰여 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 잠시 생각에 잠겼다. 그는 고모다 시게노리가 가즈야를 죽이고, 그런 다음에 쇠파이프에 매달았다고 믿어 의심치 않았다. 그러나 이 사체검안서는, 그의 예상과는 완전히 딴판이었다. 이 부분만은 읽으면 목을 매달아 자살했다고밖에 생각할 수 없지 않은가.

&amp;nbsp&amp;nbsp(click: ?page)[==그때 옆을 지나가던 요시오가 눈을 크게 떴다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아! 이게 바로 문제의 그 사건인가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 드디어 보험금을 청구했습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어떻게 된 일이지? 나는 아무 말도 듣지 못했는데.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==벽 쪽에 빼곡히 늘어선 컴퓨터 단말기 앞에서 마침 히로미가 입력을 마치고 입원급부금 관계 서류 다발을 들고 일어서는 참이었다. 요시오가 재빨리 히로미에게 손짓을 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;히로미 씨, 잠시 이쪽으로 와보겠어? 이 사망보험금 청구서류 말인데, 오늘 아침 택배편에 들어 있었나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==히로미는 이상한 표정으로 물끄러미 서류를 쳐다보았다. 창구 역직원들에게 선입견을 주어서는 안 되기 때문에, 그녀들에게는 가즈야의 사망에 모럴 리스크의 의심이 있다는 이야기는 일체 하지 않았던 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이거 말인가요? 아닌데요. 오늘 아침에 우편으로 왔어요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==우편! 신지는 그때까지 우편의 가능성은 전혀 생각하지 않았다. 보통 사망보험금의 청구서류는 영업소 직원이 청구자의 집으로 직접 가지러 가는 것으로 되어 있다. 그러면 잘못 기입하거나 첨부서류가 갖추어지지 않았을 때, 그 자리에서 발견할 수 있기 때문이다. 그러나 고모다는 일부러 우편으로 보냈다. 틀림없다는 자신감이 있어서일까. 어쩌면 보험금을 청구하는 것은 이번이 처음이 아니리라.

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 심각한 표정으로 사체검안서를 노려보았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이렇다면 어느 쪽으로도 결론을 내릴 수 없군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래. &#39;기타 및 불분명&#39;이라서 말이야……. 아마 사법 해부를 했을 거야. 하지만 보통 제출된 서류에는 사법 해부 보고서까지 들어 있지는 않으니까.&quot;

(click: ?page)[==[(goto: &quot;사치코&quot;)]</tw-passagedata><tw-passagedata pid="23" name="사치코" tags="" position="1504,553" size="100,100">&amp;nbsp&amp;nbsp&quot;오후에 경찰서에 가서 요전에 만난 형사를 만나고 오겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;부탁하네.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 보험증권을 참조하면서 청구서를 자세히 확인했다. 우선 필적이 똑같은지 비교하고 나서, 확대경을 사용해서 도장의 직경이나 글씨의 각 부분을 비교했다.

&amp;nbsp&amp;nbsp(click: ?page)[==어린아이처럼 유치한 글씨였지만 문제는 전혀 없었다. 날짜를 기입하지 않은 곳도 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 첨부서류인 호적등본을 펼쳤다. 본적지는 W현 K마을로 되어 있고 가즈야는…….

&amp;nbsp&amp;nbsp(click: ?page)[==역시 그렇다! 그러한 생각이 얼굴에 나타났는지 전화를 마친 요시오가 가까이 다가오면서 소리쳤다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;왜 그래?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;죽은 가즈야는 사치코가 데리고 온 아이였습니다. 아버지는 알 수 없지만요 고모다는 2년 전에 사치코와 결혼했는데 결혼 하기 이전의 이름은 고사카 시게노리입니다. 특이하게도 남자가 여자 성(性)으로 바꾸었군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 무섭게 일그러진 얼굴로 고개를 끄덕였다. 보험금 살인의 역사를 보면 자식을 희생양으로 삼는 경우는 재혼 부의 한쪽이 다른 쪽에서 데려온 아이를 죽이는 양자(養子) 살인의 예가 가장 많다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;요전에 고모다 시게노리, 사치코, 가즈야를 조회했는더 무것도 나오지 않았잖는가? 만일을 위해 고사카 시게노리도 조회해 볼까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 생년월일을 메모한 다음, 체구에 걸맞지 않는 가벼운 걸음걸이로 컴퓨터 앞에 앉아 키보드를 두들겼다.

&amp;nbsp&amp;nbsp(click: ?page)[==지금 책상 위에 올려져 있는 것은 사망보험금 관계 서류뿐이다. 일이 밀려들지 않는 것은 지금뿐이라고 생각하고, 신지 회사 전임 의사인 스즈키로부터 빌려온 두터운 법의학 전문서를 펼쳤다.

&amp;nbsp&amp;nbsp(click: ?page)[==이런 종류의 책은 옛날부터 질색이었지만 오늘만큼은 보지 않을 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==책을 펼치자 온몸의 털이 거꾸로 솟구치는 듯한 사진이 눈으로 뛰어들어왔다. 물에 빠진 익사체인 것 같았다. 명의변경 서류를 가지고 온 도모코가 사진에 눈길을 멈추더니 어찌할 바를 모르고 우뚝 멈추어섰다.

&amp;nbsp&amp;nbsp(click: ?page)[==황급히 매끄러운 아트지를 넘겼지만, 그 뒤에 있는 것도 차마 눈 뜨고는 볼수 없는 처참한 사진뿐이었다. 그는 눈 끝으로 항목만을 좇았다.

(click: ?page)[==[(goto: &quot;사치코2&quot;)]</tw-passagedata><tw-passagedata pid="24" name="사치코2" tags="" position="1504,706" size="100,100">&amp;nbsp&amp;nbsp&quot;신지 주임, 이 녀석은 그런 전과가 있어!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==내팽개치듯이 수화기를 내려놓은 요시오가, 마치 호랑이가 울부짖는 것처럼 소리를 질렀다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고사카 시게노리로 알아봤더니, 이미 소멸되었지만 예전의 계약이 남아 있더군. 이 녀석은 &#39;손가락 절단족&#39;의 잔당이야!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;손가락 절단족이요?&quot;


&amp;nbsp&amp;nbsp(click: ?page)[==&lt;img src=&quot;./img/finger.png&quot; alt=&quot;house&quot;&gt;&lt;br&gt;&lt;br&gt;&quot;꽤 유명한 사건인데, 들어본 적 없나? 장애급부금을 받기 위해 직접 자기 손가락을 자르는 녀석들이지.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 고모다가 집 안에서도 왼손의 장갑을 벗지 않은 것을 떠올렸다. 그것은 잘린 손가락을 감추기 위해서였을까.

&amp;nbsp&amp;nbsp(click: ?page)[==생명보험 특약 가운데 장애특약이라는 것이 있다. 부상으로 인해 소정의 장애를 입은 경우, 주계약인 보험금의 몇 %의 급부금이 지급된다.

&amp;nbsp&amp;nbsp(click: ?page)[==요시오의 설명에 따르면 10여 년 전에 어느 지방의 작업현장에서 장애급부금 청구가 끊이지 않은 적이 있었다고 한다. 그런데 청구한 사람들은 한결같이, 작업 도중 사고를 당해 손가락을 잘렸다고 호소하는 것이었다. 당시 대부분의 생명보험사에서 손가락 절단의 경우 지급하는 금액은 전체 보험금의 10%에 지나지 않았지만, 엄지의 경우는 20%나 되었다. 그런데 모든 사람이 왼손의 엄지를 잘리는 진기한 사고가 뒤를 이어 발생한 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그러나 장애급부금 정도로는 타산이 안 맞지 않습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 그 정도의 돈을 받기 위해 자신의 손가락을 자른다는 사실이 믿기지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==물론 그것만이 아니지. 일단 일을 하다가 부상을 당한 것이기 때문에 산업재해의 휴직보상급부금을 받을 수 있지. 뭐니 뭐니 해도 그것이 가장 크다네. 그 밖에도 간이보험의 상병급부금과 농협의 후유장애공제금도 받아낼 수 있지. 그러면 일석이조가 아니라 삼조, 사조가 되니까. 그것을 전부 합치면 400~500만 정도는 되지 않을까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아무리 그렇더라도……. 끔찍할 정도로 아프지 않나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;물론 아프겠지. 하지만 이 세상에 사람처럼 지독한 동물이 또 어디 있나? 돈에 시달리다보면 어떻게든 방법을 생각해 내는 법이지.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그런 다음 요시오는 구체적인 절단 방법에 대해 설명하기 시작했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;절단하는 순간의 고통을 업새는 데는 몇 가지 방법이 있지. 가장 좋은 것은 역시 마취를 하는 것이지만, 그것은 의사나 간호사의 도움이 없으면 상당히 어렵다네. 예전에는 기생에게 반한 남자가 자신의 마음을 보여주기 위해 손가락을 잘랐다고 하는데, 그것은 알고 있지?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 그런 이야기를 들어본 적이 없었기 때문에 힘없이 고개를 가로저었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그것도 모르나? 연실로 손까락의 뿌리 부분을 묶어서 피가 통하지 않게 만든 다음, 감각이 사라지고 나면 단숨에 잘랐다고 하더군.그보다는 얼음이나 드라이아이스를 사용하는 편이 낫지만, 손가락 절단족 녀석들은 스프레이를 애용하는 것 같아.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;스프레이요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;운동한 다음에 근육에 뿌리는 차가운 스프레이 있찌 않은가? 그것을 손가락에 뿌리는 것일세. 그것도 손가락 하나에 한 통을 전부 사용해서 말이야. 그렇게 뒤범벅을 해놓으면 손가락의 감각은 완전히 사라지고 말지. 그렇게 되기를 기다려 부엌칼이라든지 손도끼를 대고 체중을 실어 누르면, 물고기 머리를 자르는 것 정도로 쉽게 끝난다고 하더군.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==말을 듣기만 해도 속이 울렁거려서 신지는 황급히 입을 틀어막았다.

&amp;nbsp&amp;nbsp(click: ?page)[==여기에도 그가 이해할 수 없는 사람들이 존재한다. 돈 때문에 자기 자신의 일부를 잘라버리다니! 배가 고프면 자신의 발을 씹어먹는 문어와 다를 것이 무엇인가!

(click: ?page)[==[(goto: &quot;사치코3&quot;)]</tw-passagedata><tw-passagedata pid="25" name="사치코3" tags="" position="1501,852" size="100,100">&amp;nbsp&amp;nbsp그런 짓까지 하는 사람이 다른 사람의 목숨을 어떻게 귀중하게 생각하겠는가. 사망보험금의 사정에는 가입한 지 1년이 되지 않는 조기사망과 고액보험금만을 본사에서 취급하고, 그 이외는 지사에서 모두 판단하게 되어 있다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 가즈야의 경우는 본사의 보험금과의 의논한 결과 예외적으로 본사에서 취급하기로 해서, 도쿄에 있는 쇼와보험서비스라는 회사의 조사를 받게 되었다. 쇼와보험서비스는 쇼와생명의 자회사로, 미요시가 속해 있는 회사와 달리 순수하게 조사만을 하는 회사이다. 그런 만큼 결정이 나기까지는 시간이 많이 걸리게 된다.

&amp;nbsp&amp;nbsp(click: ?page)[==보험금 청구서류를 보낸 지 일주일이 지난 무렵부터, 고모다는 하루에도 몇 번씩 전화를 걸었다. 모두 보험금이 언제 나오느냐는 독촉 전화였다.

&amp;nbsp&amp;nbsp(click: ?page)[==여전히 무슨 말인지 알아들을 수 없었고, 다른 고객들처럼 고래고래 소리를 지르는 일도 없었다. 그러나 고모다의 전화는 상당한 압력으로 다가왔다. 여직원에게는 일제 사정을 설명하지 않았지만, 고모다의 전화를 끊은 다음 신지나 요시오가 기타니와 의논하는 모습에서 추측했는지, 그의 전화를 상당히 긴장한 모습으로 대하는 것을 알 수 있었다.

(click: ?page)[==[(goto: &quot;5월 29일&quot;)]</tw-passagedata><tw-passagedata pid="26" name="5월 29일" tags="" position="1697,401" size="100,100">&amp;nbsp&amp;nbsp5월 29일 수요일

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 주임님. 저쪽에 계신 분이 고모다 가즈야의 보험금 지급에 대해서 묻고 싶다는데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미유키의 얼굴이 기묘하게 일그러져 있었다. 평소에는 은행구좌에서 직접 들어오는 보혐료를 관리하고 있는데, 일손이 바쁠 때는 창구에 나오는 일도 있었다. 그러나 창구에서 화를 내는 사람도 없는데 왜 이렇게 예민하게 반응하는 것일까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;누군데?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;네 번째 분이에요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미유키는 건너편에서 보이지 않도록 몸으로 가리며, 가장 끝에 앉아 있는 고객을 가리켰다. 신지는 일단 명함을 빼들고 자리에서 일어섰다. 멀리에서 보기에는 극히 평범한, 어디에서나 만날 수 있는 중년 여성으로밖에 여겨지지 않았지만 고모다 사치코라는 것은 한눈에 알 수 있었다. 그는 작업적인 미소를 지으며 한 걸음 한 걸음 카운터로 다가갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==그 순간, 강렬한 냄새가 그의 콧구멍을 엄습했다. 그는 자신의 미소가 그대로 얼어붙는 것을 느꼈다. 향수 냄새였다. 그것도 사향처럼 비린내가 나는 동물적인 냄새였다. 조금 전부터 사무실을 휘감던 이상한 화장품 내새의 정체는 바로 이것이었던가.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 향수를 적당히 뿌리면 좋지만 너무 강렬하면 악취에 불과하다는 것을 처음으로 깨달았다. 카운터에 있는 사치코는 향수 한 병을 통째로 뒤집어슨 것처럼 코를 찌르는 냄새를 발산하고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 검은 집을 휘감던 이상한 냄새의 정체를, 이제야 가까스로 알게 된 듯한 느낌이 들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;기다리게 해서 죄송합니다. 보전을 담당하고 있는 신지라고 합니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 명함을 내밀면서 재빨리 상대방의 얼굴을 관찰했다.

&amp;nbsp&amp;nbsp(click: ?page)[==아직 영업소장으로 일한 경험은 없지만 생명보험이라는 업종에 근무하는 동안 상당히 많은 중년 여성을 보아왔다. 그 결과, 언뜻 보고도 보험 업무를 잘할 수 있을지 없을지 판단할 자신이 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그리고 어느 사이엔가 거리를 돌아다니는 중년 여성을 보면, 자신도 모르게 프로야구 스카우터가 고교야구 선수를 보는 듯 한 시선으로 등급을 매기게 되었다. 모든 지사에는 실적우수자 로 이름을 날려서 사장을 능가하는 수입을 얻는 생활설계사가 한 사람씩 있기 마련인데 그녀들에게는 한결같이 티없이 밝은 천성과 강력한 심지가 풍겨나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러한 관점에서 본다면, 이 여성은 실격이다.

&amp;nbsp&amp;nbsp(click: ?page)[==사치코는 둔중한 음습함이 뜰뜰 뭉쳐 있다는 느낌을 거리낌 없이 풍기고 있었다. 이중으로 늘어진 턱은 길쭉한 얼굴과 부조 화를 이루고 있고, 눈은 조각칼로 그어놓은 것처럼 쭉 찢어져 있어서 마치 아무 표정이 없는 가면을 연상시켰다.

&amp;nbsp&amp;nbsp(click: ?page)[==향수의 악취는 그렇다 치더라도 옷매무새는 더욱 얼굴을 찌 푸리게 만들었다. 아침에 일어나서 빗지도 않았는지 이리저리로 뼈죽뼈죽 튀어나온 머리칼이 가느다란 잔물결을 이루고, 무더운 날씨에도 불구하고 붉은색 원피스의 긴소매는 손목까지 뒤덮고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가즈야의 보험금…… 아직 나오지 않았나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그녀의 메마른 목소리를 들었을 때, 그는 고개를 가우뚱거렸다. 분명히 기억의 밑바닥에 자리하고 있는 목소리였다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;실례지만, 사치코 씨입니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;본인이라고 증명할 만한 것을 가지고 계십니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==여자는 잠자코 핸드백을 열더니, 주도면밀하게 준비해 온듯 한 의료보험 카드를 꺼냈다. 세대주의 이름이 고모다 사치코로 되어 있는 것을 확인하고 나서, 그는 보험증을 돌려주었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이번 일로 상심이 크셨죠? 삼가 조의를 표합니다. 가즈야 군의 생명보험에 대해서는 현재 본사에서 사정을 하고 있으니, 조금만 더 기다려주시기 바랍니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;왜 이렇게 시간이 걸리는 거죠?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;조금 확인할 필요가 있어서입니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무슨 확인을 한다구요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;실은 제출하신 사망진단서 말인데요, 사인이 자살이 아니라 미상으로 되어 있더군요. 저희로서는 그 점을 경찰에 확인해 보아야 합니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런 건 빨리빨리 확인하면 되잖아요.&quot;

(click: ?page)[==[(goto: &quot;5월 29일 2&quot;)]</tw-passagedata><tw-passagedata pid="27" name="5월 29일 2" tags="" position="1703,553" size="100,100">&amp;nbsp&amp;nbsp&quot;경찰에 몇 차례 문의를 했지만 좀처럼 결론을 내려주지 않는군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 모든 책임을 경찰에 떠넘기기로 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무슨 말이에요? 당신이 눈으로 직접 확인했잖아요!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 흠칫 몸을 떨었다. 사치코의 목소리는 조금 전과는 달리, 날카로운 칼날을 곧추세운 것처럼 소름 끼치게 들렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가즈야의 시체는, 당신이 발견한 게 아닌가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==사치코의 비난 섞인 말투에 갑자기 얼굴이 화끈 달아올랐다. 조금 전, 명함을 보았을 때부터 자신이 신지라는 것을 알아차렸을까.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예에. 물론 그렇지만 그것만으로는 도저히 알 수 없어서요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;보험금을 빨리 주지 않으면 곤란해요. 그 아이의 장례식도 치러야 하고, 그 밖에도 돈 쓸 데가 한두 군데가 아니라구요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==사치코는 다시 표변하여, 울며 매달리는 작전으로 바꾸었다. 

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 헛기침을 하고 나서 가볍게 코를 막았다. 사치코의 향수 냄새는 이미 그 자리에 서 있기조차 힘들게 만들어서, 어느 사이엔가 카운터에 앉아 있는 고객은 그녀 한 사람밖에 없었다. 다른 고객들은 냄새에 진절머리를 내며 일찌감치 발길을 돌려 버린 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;정말 죄송합니다. 가능한 한 빨리 결론을 내리도록 본사에 독촉하겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==사치코는 그래도 끈질기게, 빨리 보험금을 주지 않으면 곤란 하다는 말을 계속 중얼거렸다. 

&amp;nbsp&amp;nbsp(click: ?page)[==이러한 경우, 절대로 해서는 안 되는 것은 도중에서 말을 가 로막는 것이다. 고객에게는 하고 싶은 말을 모두 할 수 있게 만들어 주어야 한다. 신지는 지옥불을 견더내는 인내와 끈기로 사치코의 눈물 섞인 호소를 끝까지 들어주었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그녀는 핸드백에서 손수건을 꺼내어 몇 번이나 눈에 갖다댔다. 정말로 슬퍼하는지도 모르지만 눈물이 나온 것 같지는 않았다. 그러나 오른손에 들고 있던 손수건을 바꿔들려고 왼손을 들어올린 순간, 원피스 소매가 올라가면서 숨기고 있던 손목 안쪽 이 그대로 드러났다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 &#39;후욱&#39; 하고 숨을 들이마셨다. 사치코는 실수를 깨닫 고 황급히 소매를 내렸지만, 때는 이미 늦었다.


(click: ?page)[==&lt;img src=&quot;./img/scar.png&quot; alt=&quot;scar&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp&amp;nbsp그녀의 손목에는 칼로 그은 것 같은 상처 자국이 몇 개나 평행으로 달리고 있었던 것이다. 그것은 모두 새하얀 상처로 튀어 나와 있어서, 상당히 깊은 찰과상이었다는 것을 알 수 있었다. 

&amp;nbsp&amp;nbsp(click: ?page)[==그때, 신지는 기억에 남아 있던 사치코의 목소리를 떠올렸다. 분명히 전화로 통화한 적이 있었다. 아마 4월 초였으리라, 자살한 경우 보험금이 나오느냐고 물었던 바로 그 여자의 목소리 였던 것이다.

(click: ?page)[==[(goto: &quot;6월 12일&quot;)]</tw-passagedata><tw-passagedata pid="28" name="6월 12일" tags="" position="1904,404" size="100,100">&amp;nbsp&amp;nbsp6월 12일 수요일

&amp;nbsp&amp;nbsp(click: ?page)[==구식 엘리베이터의 삐걱거리는 소리가 유달리 신경을 자극하 는 날이었다. 2미터 앞에는 쇼와생명이라는 글자와 회사의 마크가 그려져 있는 자동문이 있고, 자동문 너머에서는 카운터 앞 에 앉거나 소파에 앉아 있는 고객들이 눈에 들어왔다. 

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 똑바로 눈길을 고정시켰다. 그리고 소파 가장 안쪽에 서 황토색 작업복을 입은 사내를 확인한 순간, 뱃속에 무거운 돌이 들어 있는 것처럼 가슴이 무거워졌다. 점심 때 먹은 국수 가 갑자기 납덩어리로 변한 것은 아닐까.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 왼쪽에 있는 직원용 문을 통해 살그머니 총무부로 들어 자리에 앉자마자 히로미가, 확인할 필요가 있는 서류 다발을 들고 다가왔다. 그리고 카운터에 등을 돌리고 서류를 놓으면서 그에게만 들리도록 목소리를 낮추었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;오늘도 왔어요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==사치코가 교토 지사에 고개를 들이민 다음날부터 이번에는 고모다가 모습을 드러냈다. 오늘로 벌써 2주일이나 되는데, 찾아오는 것은 모두 점심시간이었다. 

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;몇 시에 왔어?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;12시 5분 정도요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 오늘도 1시간이나 기다린 것이다. 점심시간에 자리 를 지킨 직원들에 따르면, 고모다는 언제나 카운터 앞에 앉아서 꼼짝도 하지 않고 그를 기다린다고 한다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;요시오 과장님이 대응하려고 했지만, 신지 주임님과 말하겠 다고 고집을 부려요. 요시오 과장님은 다른 건 때문에 지금 회의실에 있어요. 만약에 무슨 일이 있으면 부르라고 하던데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 지금까지 몇 번이나 고모다를 상대하려고 했지만, 그때마다 자기는 한가하니까 몇 시간이라도 기다리겠다고 하면 서 그의 말을 일축했다.

&amp;nbsp&amp;nbsp(click: ?page)[==고객이 그렇게까지 나오면 물러서는 수 밖에 다른 도리가 없다. 고모다는 요시오에 비해서 신지가 더 다루기 쉽다고 생각한 것이리라. 유감스럽게도 그 판단은 정확했다고 인정하지 않을 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 각오를 새롭게 하고 카운터를 향해 걸어갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 뚫어지게 신지를 쳐다보았지만, 눈이 마주쳐도 표정에는 아무런 변화도 나타나지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;많이 기다리셨지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 아무리 노력해도 굳어지는 웃음을 어찌할 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==지저분한 장갑을 낀 고모다의 왼손이 카운터 위에 올려져 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==무엇을 채워넣었는지, 엄지손가락 부분이 부자연스럽게 부풀어올랐다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 카운터로 몸을 내밀면서, 입 안으로 삼키는 듯한 독특한 발음으로 말을 꺼냈다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가즈야의 보험금 말인데, 지금쯤이면 나오지 않을까 해서 찾아왔지.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그게 저 아직 본사에서 사정을 하고 있어서요. 조금 더 기다려주시지 않겠습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 한순간 아무 말도 하지 않더니 쥐어짜는 듯한 목소리로 말했다. 

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;음, 아직도 안 됐다……?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==최근 2주일 동안, 정해진 의식처럼 매일 똑같은 문답이 반복 되었다. 그는 천천히 일어서면서 신지에게 등을 돌렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아무튼 죄송합니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;본사에 재촉해서 결정이 나오는 대로 연락 드리겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;음…… 그래? 아직도 안 됐다…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다의 표정을 살펴보았지만 새카만 눈동자는 유리구슬처 럼 공허해서 아무런 감정도 읽을 수 없었고, 기이할 정도로 작은 입 주위에는 이해할 수 없는 불가사의한 미소가 떠올라 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 천천히 일어나면서 신지에게 등을 돌렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아무튼 죄송합니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지의 말을 들었는지 듣지 못했는지, 고모다는 그대로 발을 끄는 것처럼 걷더니 잠자코 밖으로 나갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==자동문이 닫히는 것을 보면서 신지는 지금까지 느낀 적이 없 는격심한 피로에 휩싸였다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 지금까지 폭력을 휘두른 적도 없고 협박적인 태도를 보인 적도 없었다. 즉, 법에 저촉되는 일은 무엇 하나 하지 않는다는 뜻이다. 표면적으로는 보험금이 늦게 나오는 이유를 문의하기 위해 뻔질나게 찾아오고 있을 뿐이다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 이것은 분명히 신경전이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 회사에 찾아와서는 마치 심부름을 온 어린애처럼 순순히 돌아간다. 고객에게 쓸데없는 발걸음을 하게 만드는 것이 자신들에게 심리적인 부담을 준다는 것을 알고 있는 것이다.

(click: ?page)[==[(goto: &quot;6월 13일&quot;)]</tw-passagedata><tw-passagedata pid="29" name="6월 13일" tags="" position="2103,399" size="100,100">&amp;nbsp&amp;nbsp6월 13일 목요일

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어제 전화 드린, 쇼와생명 교토 지사에서 근무하는 신지라고 합니다. 오니시 미쓰요 씨이시죠?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예, 들어오세요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 신지를 안으로 청하면서도 그와 눈길을 마주치려고 하지 않았다. 원래 사교적인 성격이 아닐지도 모른다. 그렇다면 역시 생활설계사라는 일이 잘 맞지 않았으리라.

&amp;nbsp&amp;nbsp(click: ?page)[==안으로 들어가자 네 살 정도 된 남자아이가 의자에 앉아서 얌전하게 그림책을 보고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;집이 좀 지저분하지만…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요의 말은 결코 겸손이라고 하기 어려웠다. 원래 공간이 좁은 데다가 많은 가구들이 자리를 차지하고 있을 뿐만 아니라 두 아이의 장난감이 여기저기에 흩어져 있어서, 너저분한 분위기가 그대로 전해졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==거실에 있는 싸구려 소파에 걸터앉자 뭔가 끈적끈적한 것이 손에 묻었다. 팔걸이 부분에 빨다 만 사탕이 달라붙어 있었던 것이다. 그는 손수건을 꺼내 손을 닦았지만 그렇게 불쾌하지는 않았다. 어린아이가 있는 이상 이 정도는 어쩔 수 없는 일이고, 무엇보다 고모다의 집을 방문했을 때 느낀 이상한 전율을 떠올리면 이 집의 평범함이 오히려 마음 편하게 느껴진 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;교토에서 일부러 찾아오셨는데도 별로 드릴 말씀이 없네요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 홍차를 내면서 혼잣말처럼 중얼거렸다. 레몬 슬라이스와 스틱 설탕이 함께 나왔다. 신지는 고맙다는 인사를 하면서, 가방 안에 몰래 넣어둔 소형 녹음기의 스위치를 켰다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가입할 때의 상황은 오사카 남지사에 계신 야스다 씨에게 거의 다 말씀드렸구요…….&quot;

그녀는 무턱대고 계약을 받는 사람은 생활설계사이지만, 심사를 하는 것은 지사의 역할이라고 말하고 싶은 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;오늘 찾아온 것은 그 이외의 일을 알고 싶어서입니다. 사치코 씨와는 어린 시절부터 친구라고 하던데요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 하지만 초등학교를 졸업한 후, 한 번도 만나지 못했어요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;초등학교라고 하면 어느 초등학교입니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;K초등학교요. 와카산 K시에 있어요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 그곳이 사치코의 본적지라는 것을 떠올렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그곳에서 6년 동안 함께 공부하셨나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 하지만 솔직히 말하자면 별로 말을 나눈 적은 없어요. 사치코에게는 자폐증 같은 증상이 있었기 때문에, 우리 반에서는 거의 누구하고도 말을 하지 않았거든요. 그리고 고사카는 남자라서 그런지 조금 무서운 데가 있었어요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고사카라니, 사치코 씨의 남편도 같은 반에 있었습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==깜짝 놀라는 신지의 표정을 쳐다보면서 미쓰요는 조용히 고개를 끄덕였다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다 부부가 어린 시절 친구라고는 생각도 하지 못했다. 결혼하기 전에 고모다의 본적은 분명히 후쿠오카로 되어 있지 않았던가.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;게다가 전 남편도 학년은 다르지만 역시 K시 사람이었을 거예요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;전 남편이라고 하면, 사치코 씨는 재혼하셨나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 세 번째인지 네 번째인지는 잊어버렸지만요. 전 남편은 분명히 &#39;시라카와&#39; 라는 이름이었을 거예요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 재빨리 &#39;시라카와&#39; 라는 이름을 수첩에 메모했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런데 고모다 씨에게 무서운 데가 있다고 하셨는데, 어떤 점이었나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 잠시 말하기를 주저하는 듯이 입술을 할았다. 

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;여기에서 들은 것은 절대로 다른 사람에게 말하지 않을 테니까 마음 놓고 말씀하십시오.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇게 특별한 것은 아닌데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요의 말이 잠깐 끊어지는 동안 신지는 끈질기게 기다렸다. 

&amp;nbsp&amp;nbsp(click: ?page)[==그녀가 말하고 싶어하지 않는 것은 분명했다. 정확하지 않은 소문을 말하기에 마음이 내키지 않는 것이리라.

&amp;nbsp&amp;nbsp(click: ?page)[==그렇다면 망설임을 없앨 수 있는 시간을 주기만 하면 된다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;마이, 잠시 저 방에 가 있으렴.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 거실 구석에 있던 딸을 방으로 들여보내고 나서야 비로소 스스럼없이 말하기 시작했다.


(click: ?page)[==&lt;img src=&quot;./img/chicken_corpse.png&quot; alt=&quot;chicken_corpse&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp&amp;nbsp&quot;5학년 때인데요, 학교에서 기르던 토끼와 오리, 닭들이 연이어 죽어나간 적이 있어요.&quot;

(click: ?page)[==[(goto: &quot;미쓰요&quot;)]</tw-passagedata><tw-passagedata pid="30" name="미쓰요" tags="" position="2096,600" size="100,100">&amp;nbsp&amp;nbsp&quot;그것을 고모다, 즉 고사카 씨가 했다는 겁니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 확실한 증거는 없지만 그런 소문이 나돌았어요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런데 왜 고사카 씨가 했다는 소문이 돌았나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그건…… 고사카는 학교에 자주 오지도 않고 수업시간에 이 상한 소리도 지르고…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;하지만 그것만으로 범인으로 몰 수는 없지 않습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그 밖에도 있어요. 동물들이 사는 철조망 근처에서 얼찡거리는 것을 보았다는 사람도 있구요. 그리고 애당초 동물들을 죽인 방법이…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 끔찍한 장면을 떠올렸는지 갑자기 몸을 부르르 떨며 입을 다물었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어떤 방법으로 죽였는데요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[=={(text-color: red)}[&quot;토끼나 오리를 모두 철사로 목을 매달아서 죽였어요.&quot;]

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 미지근해진 홍차를 마시며 가까스로 마음의 동요를 감추었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;왜 고사카 씨가 그렇게 했다고 단정하지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아마 초등학교 1학년 때였을 거예요. 고사카의 아버지가 목을 매달아 스스로 목숨을 끊었거든요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 잠시 할말을 잃어버렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==물론 그것만으로 고사카를 범인 취급할 수는 없을 것이다. 아버지의 자살과 동물의 죽음과는, 직접적으로 아무런 관계가 없으니까.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 비슷한 경험을 가진 신지로서는, 아버지의 죽음이 어린 고사카에게 얼마나 파괴적인 영향을 미쳤는지 쉽게 상상할 수 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==가족이나 육친 가운데 자살한 사람이 있는 경우, 나중에 아이 가자살할 가능성이 크다는 것은 통계적인 수치가 증명하고 있다.

&amp;nbsp&amp;nbsp(click: ?page)[==자살이라는 현상은 분명히 전염성을 가지고 있었다. 고사카 의 아버지가 어떠한 상황에서 세상을 떠났는지는 모르지만, 만약에 어린 고사카가 시체를 직접 보았다고 하면 그 영향은 훨씬 더 엄청날 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==또한 심리학적으로 자살과 살인은 표리 일체라고 할수 있다.

&amp;nbsp&amp;nbsp(click: ?page)[==살인의 충동이 안으로 들어가서 자살에 이르는 경우도 빈번하고, 반대로 자살하고 싶다는 욕망이 투영된 살인도 존재한다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다의 경우, 모든 출발점은 아버지의 자살이 아니었을까.

&amp;nbsp&amp;nbsp(click: ?page)[==분명 K초등학교에서 퍼진 소문은 비약된 상상에 따른 무책임한 소문에 불과하리라.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 무책임하기는 해도 전혀 틀리다고는 할수 없다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런데 왜 그런 것까지 물으시는 거예요? 사치코의 아들은 자살한 것이 아닌가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요의 목소리에는 처음으로 의심이 묻어 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;경찰에서 결론을 내리기 전까지는 이무도 모릅니다. 그런데 고사카 씨의 아버지가 세상을 떠난 다음에 어떻게 살았지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어머니는 고사카가 태어나자마자 병으로 세상을 떠났어요. 그래서 할머니와 둘이서 살았는데…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;할머니는 아직 살아 계시나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지가 반갑게 물어보자 미쓰요는 고개를 가로저었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이미 이 세상 사람이 아니에요. 아마 암이었을 거예요. 내가 고등학교에 다닐 때였으니까. 고사카도 열여섯이나 열일곱 정도 되었겠지요. 그 이전에는 집에서 빈둥빈둥 놀았는데, 할머니가 세상을 떠난 다음에 고사카의 모습이 보이지 않게 되었다는 말을 들었어요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어디로 갔지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;잘 모르겠어요. 나중에 관동 지방으로 갔다는 이야기를 들었을 뿐이에요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그런 다음 고사카는 전국을 전전하며 돌아다닌 것이 틀림없다.

&amp;nbsp&amp;nbsp(click: ?page)[==그리고 규슈에서 손가락 절단족 사건과 관계를 맺고, 관서 지방으로 돌아와서 우연히 사치코를 만나서 결혼하게 되었다……. 일단 흐름을 알 것 같은 생각이 들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 사치코는 왜 하필이면 그런 남자를 재혼 상대로 선택한 것일까.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;조금 전에 사치코 씨에게 자폐 증상이 있다고 하셨는데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;막연하게 그런 느낌이 들었어요. 우리 반에서는 언제나 외톨박이였구요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;친구는 전혀 없었나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;모두 약속하고 따돌린 것은 아니지만 사치코와는 거의 말을 하지 않았어요. 어머니가 없어서 언제나 누더기처럼 허름한 옷을 입었거든요. 왜 어린애들은 조금 독특한 아이가 있으면 즉시 따돌리는 경향이 있잖아요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 마치, 자신은 그러한 어린아이가 아니었다는 듯이 말했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;사치코 씨의 어머니는 어떻게 되셨나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==조금 전에 거실에서 나간 마이라는 여자아이가 돌아와서, 엄마에게 안기고 싶은 듯이 칭얼거렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 딸을 달래면서 다시 방으로 데리고 들어갔다. 잠시 후에 돌아온 그녀는 갑자기 목소리를 낮추었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이것도 소문인데요, 어머니가 남자와 도망치는 바람에 아버지는 술독에 빠져서 사치코를 전혀 돌봐주지 않았어요. 가끔 사치코의 팔과 등에서는 회초리로 맞은 흔적 같은 것이 보이기도 했구요…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==맞은 흔적이 있었다니, 그렇다면 학대를 당했다는 것일까.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 문득 사치코의 손목에 있던 상처를 떠올렸다. 언뜻 보기는 했지만 깊은 상처가 몇 개씩이나 평행으로 달리고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==조금 망설이면서 칼을 그었다면 그렇게 깊은 흔적은 남지 않았으리라. 그렇다면 사치코는 진심으로 몇 번이나 자살을 시도했다는 뜻이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;사치코 씨가 자살을 시도한 적이 있다는 말은 들었습니다 만…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지의 질문은 정확히 표적을 꿰뚫은 것 같았다. 미쓰요는 어떻게 알고 있느냐는 듯이 의아한 표정을 지었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그것은 중학생이 된 다음인데, 한때 그러한 소문이 떠돌았어요. 칼로 손목을 그었다구요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;왜 죽으려고 했을까요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;글쎄요. 소문만 들어서 자세한 것은 모르지만…… 아마 발 작적으로 한 것이 아닐까요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==모두 소문, 소문, 떠돌아다니는 소문이었다. 그러나 일단 사람의 입을 통한 말들은 어느 사이엔가 사실로서 인지되고 기억 되는 일이 많다. 미쓰요가 지금도 근거가 희미한 소문들을 사실 이상으로 똑똑히 기억하고 있는 것이 좋은 증거다. 고사카와 사치코가 자란 30여 년 전의 시골 분위기는 대체 어떠했을까

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;저, 이렇게 직접 찾아오셔서 묻는 것은, 어쩌면 가즈야의 죽음이 고사카, 아니 사치코의 남편과 관계가 있기 때문인가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요의 목소리가 불안한 듯이 가늘게 떨렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==그녀는 지금, 생활설계사를 했던 것조차 잊어버리고 싶어하는 것 같았다. 아마 쇼와생명에 재직하던 1년 동안 계약을 성사 시킨 보험은 모두 친척과 친구들 것뿐으로, 10건 정도가 고작이 아닐까.

&amp;nbsp&amp;nbsp(click: ?page)[==그런데 겨우 10건 가운데 1건이 살인으로 이어졌다면, 뒷맛이 씁쓸한 정도로 끝나지는 않을 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;특별히 그래서 찾아온 것은 아닙니다. 다만 아무래도 절차 상조사할 필요가 있어서요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 미쓰요를 안심시키려고 했지만, 그녀는 오히려 무엇인가 생각난 것처럼 꺼림칙한 표정을 지었다.

&amp;nbsp&amp;nbsp(click: ?page)[==(text-color: red)[&quot;하지만 고사카가 죽인 것은 동물만이 아니었을지도 몰라요.&quot;]

&amp;nbsp&amp;nbsp(click: ?page)[==그 말에 신지는 쇠망치로 뒤통수를 얻어맞은 듯한 충격을 받았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무슨 뜻이지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이런 말을 해도 될지 잘 모르겠지만…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 잠시 주저했지만, 말하고 싶은 기분을 억제할 수없다는 것은 불을 보듯 뻔했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;6학년 때 소풍을 갔는데, 다른반 여학생이 행방불명된 적이 있어요. 마을 사람들이 모두 나서서 찾는 대소동이 벌어졌는데, 결국 연못에 떠 있는 것이 발견되었지요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==방 안은 상당히 후덥지근했는데도 불구하고 신지의 등줄기에는 차가운 바람이 스치고 지나갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;사고가 아니었나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;소풍을 간 곳에서 연못까지는 500미터나 떨어져 있었어요. 얌전한 아이라서 혼자서 그런 곳까지 가지는 않았을 거에요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런데 고사카 씨와 그 사건을 구체적으로 연결짓는, 특별한 무엇이 있었나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고사카가 얼마 전부터 그 아이를 끈질기게 따라다녔거든요. 그래서 선생님에게 야단도 맞았구요. 그런데 누군가가 고사카 옆에 있었다고 증언해서 혐의가 풀렸어요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지의 입에서는 자신도 모르게 안도의 한숨이 새어나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇다면 알리바이가 있었던 거군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;하지만 지금 막 생각이 났는데…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요는 눈을 크게 뜨고 신지를 뚫어지게 쳐다보았다.

&amp;nbsp&amp;nbsp(click: ?page)[==(text-color: red)[&quot;그때 증언한 사람이 바로 사치코였어요.&quot;]

(click: ?page)[==[(goto: &quot;하시모토&quot;)]</tw-passagedata><tw-passagedata pid="31" name="하시모토" tags="" position="2100,800" size="100,100">&amp;nbsp&amp;nbsp비는 가늘게 흩뿌리는 보슬비로 변해서 여전히 대지를 적시고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==곤고역 앞에 있는 공중전화에서 일단 교토 지사에 전화를 건 다음, 신지는 난파로 돌아가지 않고 반대 방향의 지하철을 탔다. 

&amp;nbsp&amp;nbsp(click: ?page)[==미쓰요에게서 당시 고모다의 담임이었던 하시모토 선생이 우 연히 같은 초등학교로 전근 왔다는 이야기를 듣고, 여기까지 올 기회는 다시 없을 것 같아서 들러보려고 한 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==종점인 고야산의 한 정거장 앞에서 내리자, 북쪽에는 가쓰라기 산맥이 이어지고 남쪽에는 고야산이 우뚝 솟아 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==녹음이 푸르러서 그런지, 교토 시내에서는 느낄 수 없는 상큼한 공기가 폐부 깊숙한 곳까지 스며들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==K초등학교는 걸어서 20분 정도 걸리는 곳으로, 교문을 통과 할 때는 비가 완전히 그쳐 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==군데군데 물용덩이가 생긴 교정에서는 아이들이 축구를 하며 뛰놀고 있었다. 아이들은 흙탕으로 뒤범벅이 되어도 개의치 않고, 까까머리 남자아이가 날카로운 슛을 날리자 환호성을 지르며 떠들어댔다 생명과 활력으로 뜰뜰 뭉쳐 있는 아이들을 보자, 문득 악취에 가득 찬 어둠침침한 집 안에서 세상을 떠나야 했던 가즈야가 생각났다. 뛰어다니는 아이들이 모두 가즈야와 비슷한 또래였기 때문이리라.

&amp;nbsp&amp;nbsp(click: ?page)[==교직원실에 가서 하시모토를 만나고 싶다고 하자 즉시 회의실로 안내해 주었다. 역시 미쓰요에게 부탁해서 전화를 걸어달라고 하기를 잘한 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==잠시 후, 이미 반백이 다 된 머리에 코 위에 돋보기를 걸쳐 쓴 50대 중반의 여성이 나타났다.

&amp;nbsp&amp;nbsp(click: ?page)[==나이로 보아 교감이나 교장이 되었을 법도 하지만, 명함에는 다만 선생이라고 되어 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;보험회사에서는 그렇게 옛날 일까지 조사하시나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==하시모토는 신지의 명함을 들여다보며 수상쩍다는 마음을 감추지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 개인적인 문제라서 무엇을 조사하고 있다는 것까지는 말씀드릴 수 없지만요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;상속에 관한 것인가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런 것도 포함되어 있습니다. 번거롭게 하지는 않을 테니까, 고사카 씨와 사치코 씨에 관해 알고 계신 것을 말씀해 주시면 감사하겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==경찰이나 변호사와 달리 신지에게는 수사상의 권한이 전혀 없어서, 상대가 협조해 주지 않으면 진행되지 않기 때문에 능숙하게 이야기를 끌어가야만 한다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;벌써 30년이나 지난 일이라서요. 고사카라는 아이에 대해서는 어렴뜻이 생각이 나는군요. 여러 가지 문제가 있었던 아이였으니까요. 그런데 미안하지만 사치코라는 아이는 별로 생각이 나지 않는군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==하시모토는 신지의 질문에 열심히 대답해 주었지만 그것은 거의 신임교사 시절의 고생담에 지나지 않아서, 미쓰요의 이야기를 일부분 뒷받침할 정도의 수확밖에 얻을 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==여기까지 온 것을 후회하기 시작했을 때, 하시모토는 잠시 기다리라고 하더니 회의실에서 나갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==얼마나 기다렸을까, 그녀는 한참 뒤에야 작은 책자를 들고 나타났다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이것은 5학년 때 만든 그 반의 문집이에요. 국어 실력을 키워주기 위해, 제가 담임을 맡은 반에서는 반드시 문집을 만들고 있거든요. 하지만 아직까지 남아 있을 줄은 몰랐네요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==문집은 갱지에 등사판으로 인쇄한 것으로, 30년 사이에 종이가 산화되어 불에 탄 것처럼 끝이 너덜너덜했다.

&amp;nbsp&amp;nbsp(click: ?page)[==더구나 잉크가 희미해져서 몹시 알아보기 힘들었다. 철하고 있는 스테이플러 침에도 녹이 잔뜩 끼어 당장이라도 부러질 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==문집의 제목은 &#39;꿈&#39;이었다. 처음에는 장래의 꿈이라고 생각 했지만 페이지를 넘기다보니 아무래도 실제로 꾸었던 꿈 이야기를 쓴 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==작문을 싫어하는 아이들에게는 아주 적절한 주제라고 할수 있다. 너무나도 어린아이다운 소박한 꿈도 있고, 일부러 꾸며냈다 고밖에 볼 수 없는 기이한 이야기도 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==이상하게도 맛있는 음식을 먹는 꿈이 많았고, 그것도 한결같이 비프스테이크라는 것이 당시의 분위기를 연상시켰다.

&amp;nbsp&amp;nbsp(click: ?page)[==천천히 넘기다 보니 고사카의 작문은 앞에서 여섯, 일곱 번째 쯤에 나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==[[고사카의 산문 읽기-&gt;산문]]</tw-passagedata><tw-passagedata pid="32" name="산문" tags="" position="2100,950" size="100,100">(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X=&quot;)[&#39;&#39;//꿈//&#39;&#39;]

(click: ?page)[==(align:&quot;==&gt;&quot;)+(box:&quot;X=&quot;)[//고사카 시게노리//]


//&amp;nbsp&amp;nbsp(click: ?page)[==할머니가, 죽은 사람은 꿈에서 만나러 온다고 했는데, 꿈속에서 아빠랑 엄마가 나를 보고 있어서 기분이 좋았다.//

//&amp;nbsp&amp;nbsp(click: ?page)[==그리고 &#39;고사카, 할머니 말씀을 잘 들으렴, 장난을 치면 안 된다&#39;고 말해서, &#39;장난은 치지 않아요&#39; 하고 말하니까 사라졌다.//

//&amp;nbsp&amp;nbsp(click: ?page)[==그리고 이제 만날 수 없다. 다시 만나러 오면 좋을 텐데, 두 번 다시 꿈에서 나타나지 않을 것 같은 생각이 들었다.//

(click: ?page)[==[(goto: &quot;산문2&quot;)]</tw-passagedata><tw-passagedata pid="33" name="산문2" tags="" position="2103,1103" size="100,100">&amp;nbsp&amp;nbsp초등학교 5학년 학생의 작문치고는 놀라울 정도로 유치했다. 고작해야 1, 2학년 수준이나 될까, 문장다운 문장은 눈을 씻고 찾아볼려야 찾아볼 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 유치한 표현에도 불구하고 가슴에는 뜨거운 불덩이가 올라오는 것 같았다. &#39;슬프다&#39;는 단어는 한 마디도 쓰지 않았지만, 이 작문에서 느껴지는 것은 부모를 잃어버린 어린 소년의 깊은 슬픔이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==가령 아주 어린 시절의 작문이기는 해도, 어린아이를 태연하게 죽이고 보험금을 사취하는잔인한 마음의 소유자와는 어딘지 어울리지 않는다는 느낌이 들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 문득 예전에도 똑같은 느낌을 받았다는 것을 떠올렸다. 고모다라는 인물이 가지고 있는 기묘한 이중성이 무엇인가와 어울리지 않는다는 느낌. 그러나 그것이 무엇이었는지는 생각나지 않는다.

&amp;nbsp&amp;nbsp(click: ?page)[==사치고의 작문은 고모다의 바로 뒤에 있었다. 출석번호가 하나 다른 것을 보면, 앉은 자리도 바로 앞뒤였거나 옆이었을 수도 있다.

&amp;nbsp&amp;nbsp(click: ?page)[==[[사치코의 산문 읽기-&gt;산문3]]</tw-passagedata><tw-passagedata pid="34" name="산문3" tags="" position="2103,1253" size="100,100">(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X=&quot;)[&#39;&#39;//그네의 꿈//&#39;&#39;]

(click: ?page)[==(align:&quot;==&gt;&quot;)+(box:&quot;X=&quot;)[//고모다 사치코//]


//&amp;nbsp&amp;nbsp(click: ?page)[==어젯밤에 꾸었던 꿈에 대해서 쓰겠습니다. 사실은 어제뿐만 아니라, 훨씬 오래 전에도 꾼 적이 있습니다. 훨씬 예전에, 대 여섯번 꾼 적이 있습니다.//

//&amp;nbsp&amp;nbsp(click: ?page)[==꿈속에서, 내가 중앙공원에 갔을 때는 아무도 없었습니다. //

//&amp;nbsp&amp;nbsp(click: ?page)[==나는 그네를 타고 발을 굴렀습니다.//

//&amp;nbsp&amp;nbsp(click: ?page)[==그네를 타고 있었더니, 자꾸자꾸 속도가 붙어서 높이 올라가게 되었습니다. 그래도 계속 탔더니, 더욱, 훨씬 높은 곳까지 가게 되었습니다.//

//&amp;nbsp&amp;nbsp(click: ?page)[==그래서 재미있어서, 계속 자꾸자꾸 발을 굴렀더니 결국에는 아주 높이 올라갔습니다.//

//&amp;nbsp&amp;nbsp(click: ?page)[==그리고 계속 높아져서, 한 바퀴를 돌 것처럼 높아졌습니다.//

//&amp;nbsp&amp;nbsp(click: ?page)[==가장 높아진 다음에, 나는 미끄러져서 그네에서 떨어졌습니다.//

//&amp;nbsp&amp;nbsp(click: ?page)[==그리고 어두운, 아무것도 없는 곳으로 계속 떨어져 갔습니다.//

(click: ?page)[==[(goto: &quot;산문4&quot;)]</tw-passagedata><tw-passagedata pid="35" name="산문4" tags="" position="2103,1400" size="100,100">&amp;nbsp&amp;nbsp고모다에 비하면 조금은 작문다웠지만, 역시 초등학교 5학년 치고는 국어 실력이 빈약하다고 볼 수밖에 없다.

&amp;nbsp&amp;nbsp(click: ?page)[==사치코를 만난 것은 교토 지사에 나타났을 때 단 한번뿐이었지만, 그 글은 그때의 인상과 기묘하게 일치되는 점이 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;저, 만약에 괜찮다면 이것을 복사해도 될까요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;괜찮아요. 가지고 가세요. 글씨가 희미해서 복사하면 잘 보이지 않을 테니까, 다 보신 다음에 돌려주시면 돼요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그는 정중하게 인사를 하고 나서 초등학교를 뒤로 했다. 도중에 분식집에 들러 라면과 만두를 먹은 다음 시바스 리갈을 사서 아파트로 돌아왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 술잔에 시바스 리갈과 물을 조금 따르고, 손가락으로 얼음을 돌리며 적당히 뒤섞었다. 한 모금을 마시자 긴장이 풀리는 것을 느낄 수 있었다. 최근에 들어서는 술을 마시지 않으면 잠을 이룰 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그때 갑자기 울리는 전화벨 소리가 밤의 정적을 깨뜨렸다. 신지는 쿵쾅거리는 심장을 진정시키며 침대 옆에 있던 무선전화기를 들어올렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;여보세요. 신지입니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==수화기 건너편에서는 아무 말이 없었다. 그는 잠시 귀를 기울여 보았다. 전화가 끊어진 것 같지는 않지만 아무런 소리가 나지 않았다. 그는 잠시 기다렸다가 전화를 끊었다.

(click: ?page)[==[(goto: &quot;6월 14일&quot;)]</tw-passagedata><tw-passagedata pid="36" name="6월 14일" tags="" position="2301,398" size="100,100">&amp;nbsp&amp;nbsp&quot;사치코가 그 집으로 이사 간 것은 17년 전인 1979년 5월이었습니다. 그 이전에 살았던 사람은 &#39;가쓰라&#39;라는 부부였지요. 가쓰라는 이라시야마에 있는 고급 요정에서 주방장으로 일했는데, 부인이 자궁암으로 세상을 떠난 이후 술에 절여서 설더거 건경변에 의한 식도정맥류 파열로 세상을 떠났습니다. 당시 아직 쉰 살밖에 되지 않았는데요. 그들 부부에게는 자식이나 가까운 친적이 없어서, 집이나 가재도구는 모두 가쓰라의 먼 친척에 해당하는 사치코가 상속하게 되었습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그러면 그 집은 셋집이 아니라 고모다의 집이란 말인가. 그 사실이 신지에게는 몹시 의외로 느껴졌다. 구조로 볼 떄, 원래는 상당히 훌륭한 저택이었으리라. 손질을 게을리했기 때문에 불과 17년 만에 그렇게 악취를 뿌릴 정도로 황폐해진 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가쓰라 부부의 사인에는 수상한 점이 없습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그 점은 문제 없습니다. 두 사람 모두 분명한 병으로 세상을 떠났고, 사치코의 존재도 변호사가 겨우 찾아냈다고 하니까요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==말을 하는 쇼와보험서비스의 조사원 나카무라의 입에서 히죽거리는 웃음이 새어나왔다. 자신의 조사가 완벽하다는 자부심 때문이리라.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그러나 이사 오자마자 연속적으로 무넺가 터졌다고 합니다. 그 주변은 오래 전부터 부유한 사람들이 살던 조용한 주택가잖습니까? 그 전의 가쓰라 부부에 비해도, 사치코는 분명히 받아들이기 힘든 이방인이었나 봅니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==사치코의 성격을 생각하면 충분해 주변에게 배척받을 만 한 것은 사실이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;사치코와 고모다는 1993년에 결혼했는데, 기르던 개의 울음소리가 문제가 되었나 봅니다. 고모다가 여기저기에서 버려진 개를 주워왔다고 하는데, 그것이 장난이 아니었다고 하더군요. 거의 20마리에서 30마리나 되었다고 하니까요. 먹이를 줄 시간이 되면 개들이 목이 터져라 한꺼번에 짖어대는 통에 옆집의 주부는 정신이 이상해지는 줄 알았다고 하더군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이웃 사람들이 어떻게 참았지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그것 말인데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==나카무라는 다시 불을 붙인 담배를 재떨이에 비벼끄고 몸을 앞으로 내밀었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;도저히 참지 못한 이웃 사람이 고모다에게 상당히 강력하게 불만을 제기했습니다. 그래도 상대해 주지 않자 한밤중에 대문에 페인트로 짓궃은 낙서를 했다더둔요. ……하긴 그 사람도 조금 독특한 사람이기는 합니다만.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그는 잠시 마음을 진정시키려는지 새로운 담배에 불을 붙이고 나서 말을 이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그러나 얼마 후, 그 사람은 갑자기 이사를 가버렸습니다. 무슨 일이 있었는지는 아무에게도 말하지 않았지만, 금방이라도 숨이 넘어갈 것처럼 바들바들 떨었다고 합니다. 그런데 고모다가 몇 번인가 그 집을 찾아가는 것을 보았다는 사람이 있습니다. 무서운 협박을 받지 않았을까 하는 소문입니다만, 진상은 아무도 모른 채 베일에 싸여 있습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==이야기에 빠져들자 나카무라는 말이 많아졌다. 신지는 그로부터 20분 남짓 고모다에 대한 이웃 사람들의 평판을 들었지만 좋은 이야기는 하나도 없었다.

(click: ?page)[==[(goto: &quot;고모다&quot;)]</tw-passagedata><tw-passagedata pid="37" name="고모다" tags="" position="2296,598" size="100,100">&amp;nbsp&amp;nbsp8층에서 엘리베이터가 멈추는 소리가 들린 것은 마침 점심을 먹으러 자리에서 일어섰을 때였다. 

&amp;nbsp&amp;nbsp(click: ?page)[==다음 순간. 자동문이 열리고 고모다가 들어왔다. 오늘은 여느 때보다 조금 빠르다. 어제는 신지가 없다는 것을 알고는 일찌감치 철수했지만, 허탕을 쳤다고 생각하고 기습할 시간을 바꾼 것일까. 직원용 문을 통해 점심을 먹으러 나가려던 요시오가 아무렇지 않은 표정으로 자리로 돌아와서 서류를 정리하기 시작했다. 신지는 옆눈으로 그것을 확인하고 나서 카운터로 향했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어서 오십시오.&quot; 신지가 카운터 자리에 앉아도 고모다는 입을 열지 않았다. 마치 넋이 나간 사람처럼 꼼짝도 하지 않고 허공의 한 점을 물끄러미 응시하고 있었다. 신지는 선제 공격으로 나가기로 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가즈야의 보험금 때문에 오셨을 텐데 대단히 죄송합니다. 아직 본사에서 결정이 나오지 않았으니까 조금만 더 기다려 주 시기 바랍니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==말하는 도중에 힐끔 표정을 살펴보았지만 고모다에게서는 아 무런 반응도 돌아오지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;매일 회사까지 찾아오시는데 정말 죄송합니다만, 결정이 나 오는 대로 이쪽에서 연락을 드리겠습니다.&quot;

이제 더 이상 오지 말라는 것을 깨달았는지, 고모다의 시선은 가까스로 신지의 얼굴에 초점을 맺었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그리고 두세 번 입술을 달싹이더니, 가래가 섞인 듯한 껄끄러운 목소리로 입을 열었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;다음에…… 오라는 건가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예. 많이 기다리셨는데 대단히 죄송합니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==카운터 위에서 장갑을 낀 고모다의 왼손이 희미하게 떨렸다. 신지는 자신도 모르게 흠칫 입을 다물었다. 이것도 연기란 말인가.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;돈이…… 돈이 필요하다네.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예에…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;사야 할 물건도 많고, 아직 장례식도 치르지 못했지. 스님에 게 독경을 해달라고 부탁할 돈도 없어서 말일세. 적어도 장례식 정도는 정성껏 치러주고 싶은데…… 가즈야는 참으로 가였게 살다가 죽었으니까.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==마지막 말은 너무나 나지막해서 들릴락말락했지만, 신지는 등줄기에 차가운 오한이 내달리는 느낌을 지울 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이제 한푼도 없어서 어찌할 수가 없네. 그래서 오늘은 보험 금이 나오지 않을까 해서 찾아왔지.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 오른손을 입가로 가지고 가더니 검지의 뿌리 부분을 잘근잘근 씹기 시작했다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 무슨 말을 해야 좋을지 몰라서 잠자코 고모다의 모습 을 바라보고 있을 수밖에 없었다. 상식적으로 볼 때, 잘못은 자기 쪽에 있다고 할 수 있었다. 일반적으로 보험금 지급 결정을 이렇게 오래 끄는 법은 없으니까 말이다.

&amp;nbsp&amp;nbsp(click: ?page)[==얼마나 침묵이 오래 지속되었을까, 어쩌면 1분일지도 모르고 어쩌면 10분일지도 모른다. 어쨌든 그 동안 고모다는 눈도 깜 빡거리지 않았고, 카운터 주위에는 이상한 긴장감이 감돌았다. 고모다가 들어온 다음에 두 사람이 들어왔지만, 어떤지 경원하는 것처럼 그의 옆자리는 모두 비어 있었다. 여직원들이나 요시오도 숨을 죽이고 있는 것이 느껴졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;자네 ……나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다가 무슨 말을 했지만 목소리가 워낙 작아서 잘 들리지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;잘 들리지 않았는데, 다시 한번 말씀해 주시지요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 고모다가 침묵을 깨뜨린 것에 안도의 한숨을 내쉬었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;자네, 어디에서 살고 있나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==한순간 어떻게 대답해야 좋을지 말문이 막혔다.

&amp;nbsp&amp;nbsp(click: ?page)[==고객 대응 매 뉴얼에서는 사생활에 관한 질문에는 일체 대답하지 말라고 되어 있다. 그러나 대답할 수 없다고 말할 수는 없었다. 

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;저, 시내에 사는데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;시내라…… 어디 말인가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 바싹 마른침을 꿀꺼 심켰다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그것은…… 대답할 수 없게 되어 있습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어째서?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;회사 규정에 그렇게 되어 있습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 &#39;후욱&#39; 하고 땅이 꺼져라 한숨을 내쉬었다. 마치 깊은구멍에서 솟구쳐 나온 듯한 소리였다. 턱의 근육이 사과라도 같아먹고 있는 듯이 움찔거렸다.

&amp;nbsp&amp;nbsp(click: ?page)[=={(track: &#39;break&#39;, &#39;playwhenpossible&#39;)}그때 고모다의 입가에서 붉은 피가 한줄기 흘러나왔다. 그러 자카운터에서 조금 떨어진 자리에 앉아 있던 중년 여성이 비명 을질렀다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고모다 씨……!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지가 소리를 높여 불러도 고모다는 아무런 반응이 없었다. 검붉은 피는 턱의 끝을 타고 작업복의 가슴 부분으로 떨어지면 서 짙은 얼룩을 만들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고모다 씨! 제발 그만두세요!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 어정쟁하게 일어선 채 굳어 있었다. 고모다는 가까스 로 신지와 눈길을 마주쳤지만, 그래도 자신의 손을 깨무는 것은 멈추지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==다음 순간. 갑작스러운 고통에 놀란 짐승처럼 고모다는 입에서 오른손을 떼어냈다. 검지 주위에 타액에 젖어 빛나는 깊은 이빨 모양이 생기고, 개가 물어뜯은 흔적 같은 검은 구멍에서 피가 넘쳐을렀다.

&amp;nbsp&amp;nbsp(click: ?page)[==무거운 발소와 함께 요시오가 다가와서 휴지를 통째로 내밀었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;괜찮습니까? 어떻게 된 일이지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다는 장갑을 낀 왼손으로 요시오가 내민 휴지를 상처에 대었다, 그 즉시 휴지에는 검붉은 피가 배어들고, 끼고 있던 장갑까지 희미하게 얼룩이 배기 시작했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;고맙수. 그리고 미안하구려. 가즈야를 생각했더니……. 갑자기 불쌍한 아이라는 생각에 가슴이 복받쳐와서 나도 모르게 손을 깨물고 말았구려.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==피가 많이 나옵니다. 병원에 가는 편이 좋겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;괜찮수. 별 이상은 없을 거요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;우리 의무실에 의사 선생님이 계시니까 일단은 그곳으로 가서 치료를 받으시지요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 재빨리 카운터 밖으로 나가서, 어이없는 표정으로 서 있는 다른 고객의 시선을 피하면서 고모다의 등을 떠밀었다.

&amp;nbsp&amp;nbsp(click: ?page)[==자동문을 나설 때, 고모다가 고개를 돌려 신지를 쳐다보았다. 피로 물든 붉은 입술이 웃는 것처럼 위로 치켜올라가 있고, 유리구슬 같은 새까만 눈동자는 형광등에 반사되어 작은 짐처럼 수축되어 있었다.

(click: ?page)[==[(goto: &quot;전화&quot;)]
</tw-passagedata><tw-passagedata pid="38" name="편지" tags="" position="2302,1308" size="100,100">&amp;nbsp&amp;nbsp아파트에 도착한 신지는 입구에 있는 우편함에서 석간 신문을 빼들었다. 그 밖에도 우편물이 들어 있는 감촉이 손끝에 전해졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==다이얼을 돌리자 안에서 편지 봉투가 세 개 나왔다. 그 가운 데 두 통은 외제차 영업사원과 결혼 중매업자의 전단이었지만, 세 번째는 그도 잘 알고 있는 필적의 편지였다. 신지의 여자친구 메구미…….

&amp;nbsp&amp;nbsp(click: ?page)[==인간이란 얼마나 간사한지 그는 갑자기 발걸음이 가벼워진 것 을 느끼고, 현관 자물쇠를 잠그자마자 부엌에 선 채로 편지 봉투 를 뜯었다.

&amp;nbsp&amp;nbsp(click: ?page)[==다음 순간, 봉투를 뜯던 그의 손길이 갑자기 멈추었다. 봉투의 윗부분이 이상하게 부풀어올라 있었기 때문이다.

&amp;nbsp&amp;nbsp(click: ?page)[==편지 자체는 별다른 내용이 아니었다. 요전에 파피루스 앞에 서 어색하게 헤어진 것에 대해서 화해할 생각이었으리라. 그러나 직접적으로는 그 말을 언급하지 않고, 집에서 기르고 있는 두 마리의 고양이, 슈레딩거와 페트로시안 사이에 새끼가 태어 났다는 내용이 편지지 두 장에 걸쳐서 빼곡히 쓰여 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그때 문득 편지의 날짜가 마음에 걸렸다. 편지에는 6월 15일, 토요일이라고 되어 있었다. 즉시 편지를 부쳤다고 하면 월요일 쯤에는 도착했을 것인데, 왜 사흘이나 늦게 배달되었을까.

&amp;nbsp&amp;nbsp(click: ?page)[==다음 순간, 봉투의 감촉이 이상했다는 생각이 떠올라서, 그는 탁자 위에 뜯어버린 봉투의 윗부분을 집어들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==종이가 일단 물에 젖은 다음에 마른 것처럼 윗부분이 조금껄 끄러웠다. 하긴 장마철이기도 하니 배달하는 도중에 비에 젖을 수도 있으리라.

&amp;nbsp&amp;nbsp(click: ?page)[==이번에는 봉투의 풀 붙이는 부분을 신중하게 떼어서 살펴보 았다. 그러자 봉투 입구에 빈틈없이 풀이 붙어 있다는 것을 알 수 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==메구미는 언제나 물로 봉함하기 때문에 풀을 사용하는 일은 거의 없었다. 물론 절대로 풀을 사용하지 않는다고는 단언할 수 없다. 그러나 늦어진 배달과 봉투의 젖은 자국을 종합적으로 생각해 보면, 누군가가 뜨거운 김을 씌어 편지를 뜯어보고 다시 풀로 봉함했을 가능성이 높다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 두 번째 편지를 들고 밖으로 뛰어나가, 우편함에 넣고 투함구에 손가락을 집어넣어 보았다. 손가락 끝에 닿은 편지는 아무런 문제없이 쉽게 딸려나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==그것은 채 10초도 걸리지 않는 작업이었다. 갑자기 머리끝까지 불끈 피가 솟구쳤다. 고모다가 메구미의 편지를 읽었다고 생각하자 속이 부글부글 끓는 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==그때 문득 또 다른 생각이 머리를 스쳤다. 과연 이것이 처음일까. 기억을 더듬어 보았지만 요즘에는 메구미를 포함하여 친구들에게 편지가 오는 일이 거의 없었다. 그러나…….

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 전화국에서 보내는 전화요금 통지서를 떠올렸다. 그러고 보니 이번 달에는 아직 전화요금 통지서를 받아보지 못했다.

&amp;nbsp&amp;nbsp(click: ?page)[==그렇구나! 이제야 머릿속을 맴돌던 하나의 수수께끼가 풀렸다. 고모다는 전화요금 통지서를 보고 그의 전화번호를 알아냈던 것이다. 메구미의 편지는 돌려주지 않으면 들통난다고 생각했겠지만, 전화요금 통지서는 없어져도 알아차리지 못할 것이라고 무시한 것이리라.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 사실을 알아도 구체적인 대응책은 떠오르지 않았다. 우선 메구미에게 전화를 걸어 당분간 편지는 회사로 보내라고 하는 것밖에는…….

(click: ?page)[==[(goto: &quot;6월 24일&quot;)]</tw-passagedata><tw-passagedata pid="39" name="전화" tags="" position="2303,1104" size="100,100">&amp;nbsp&amp;nbsp취기는 집에 도착한 다음 갑자기 온몸을 파고들어서, 아파트 문을 열 때는 걸음도 내딛을 수 없는 상태로 빠져들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 부엌으로 달려가서 수도꼭지에 입을 대고 물을 들이켰다. 건물의 급수 탱크에 무엇이 들어 있는지 알 수 없다는 이야기를 들었지만, 지금은 그런 것에 신경 쓸 틈이 없었다. 그런 다음 양복을 벗어던지고 넥타이를 느슨하게 한 채 침대 위에 쓰러졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==파피루스를 나온 다음 택시에 올라탈 때까지 메구미는 한 마디도 하지 않았다. 오늘은 그녀와 함께 근사한 호텔에라도 투숙할 생각이었지만 고모다 사건은 생활의 모든 곳에 악영향을 미치기 시작했다.

&amp;nbsp&amp;nbsp(click: ?page)[==메구미를 보낸 다음 포장마차에서 혼자 술을 마신 것이 좋지 않았는지, 골치가 지끈거리고 구토가 치밀었다.

&amp;nbsp&amp;nbsp(click: ?page)[==한숨을 쉬며 양말을 벗고 넥타이를 빼냈을 때, 책상 위의 무선 전화기가 눈에 들어왔다. 자동응답기의 버튼이 깜빡이고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 침대에 그대로 드러누운 채 무선전화기를 들고 재생 버튼을 눌렀다. 그러자 &#39;용건은 30건입니다&#39; 라는 차가운 기계음이 들려왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==갑자기 온몸에 싸늘한 기운이 감돌고 단숨에 잠 기운이 날아가는 것 같았다. 이 숫자는 심상치 않다. 기계가 기록할 수 있는 상한선이 아니었던가.

&amp;nbsp&amp;nbsp(click: ?page)[==전화기에서는 계속해서 30건의 메시지가 흘러나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==아무 말도 하지 않는 침묵 메시지는 발신음이 울린 다음 5초에서 10초 간 녹음되어 있었다. 10시가 지난 이후 거의 5분마다 걸려온 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==도중에 다른 메시지가 섞여 있을 가능성도 있기 때문에 일단은 마지막까지 다 듣고 나서, 그는 용건을 모두 삭제했다.

&amp;nbsp&amp;nbsp(click: ?page)[==장난전화치고는 도가 지나치다. 분명히 자신을 알고 있는 사람이 한 짓이다. 그것도 이렇게 집요하게 짓궃은 짓을 할 사람은 한 사람밖에 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==어떻게 내 전화번호를 알아낸 것일까. 자신의 전화번호는 전화번호부에도 실려 있지 않았고, 자사에서 만든 직원의 집 전화번호는 한정된 사람에게만 나누어줄 뿐이어서 외부 사람의 눈에 띈느 것은 생각할 수 없는 일이다.

&amp;nbsp&amp;nbsp(click: ?page)[=={(track: &#39;ring&#39;, &#39;playwhenpossible&#39;)}그는 침대 위에서 몸을 일으켰다. 그러자 마치 기다리고 있던것처럼 고요한 정적을 깨고 전화벨이 시끄럽게 울어댔다. 한 박자 뒤늦게 무선전화기도 울리기 시작해서 껄끄러운 불협화음을 이루었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 반사적으로 무선전화기를 들어올리고 온몸의 신경을 컷 가에 집중했다. 마음 한쪽 구석에서는 여자친구 메구미의 전화라는 것을 알고 가슴을 쓸어내리는 자신의 모습을 상상했다. 

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 전화기 건너편에서는 아무 말이 없다. 날카로운 불안과 초조한 긴장이 등줄기를 가로질렀다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지 역시 아무 말도 하지 않았다. 자기가 먼저 정보를 전해 줄 필요가 없기 때문에, 상대방이 초조함을 이기지 못해서 무슨 말을 할 때까지 기다릴 생각이었다. 전화 건너편에서 역시 누군 가가 숨을 죽이고 자신의 기척을 살피고 있다는 것이 느껴졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==오랜 시간처럼 느껴졌지만, 전화는 걸려왔을 때와 마찬가지 로 느닷없이 끊겨버렸다. &#39;뚜뚜&#39; 하는 신호음을 확인하고 그도 수화기를 내려놓았다. 손바닥에는 진땀이 촉촉이 배어 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==와이셔츠와 바지를 벗고 있는데 또다시 전화벨이 울려퍼졌다. 설마!

&amp;nbsp&amp;nbsp(click: ?page)[==그는 반사적으로 전화기를 들어올렸다. 이번에야말로 메구미가 아닐까 하는 아련한 기대를 품으면서. 그러나 상대는 역시 아무 말이 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 내동댕이치듯 이 무선전화기를 내려놓았다. 그러자 이번에는 불과 30초도지 나기 전에 다시 전화벨이 울리기 시작했다. 수화기에 대고 소리를 지르고 싶은 충동에 휩싸였지만, 상대 의 함정에 휘말리면 안 된다고 스스로를 타일렀다. 

&amp;nbsp&amp;nbsp(click: ?page)[==잠시 양쪽의 침묵이 이어진 다음 전화를 끊자, 그 즉시 귀를 찢는 듯한 전화 벨이 울려퍼졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==이번에는 전화기를 들어올리자마자 즉시 끊어졌다. 그리고 다음 순간 또다시 전화벨이 울려퍼졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==잠시 다람쥐 첫바퀴 돌 듯이 똑같은 상황이 반복된 다음. 그는 전화기 플러그를 뽑아버렸다. 그러자 죽음처럼 고요한 정적이 돌아왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==심장이 세차게 두근거렸다. 신경이 몹시 날카로워졌다는 것을 알 수 있었다. 그는 냉장고에서 캔맥주를 꺼내어 단숨에 들이켰다. 캔맥주는 마치 약용 알코올처럼 혀를 찌르면서, 알루미늄 캔의 금속 냄새밖에는 아무 맛도 나지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==더 이상 마시고 싶은 마음은 없었지만 그것 이외에 불쾌한 긴장을 완화시킬 만한 방법이 생각나지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==다행히 500밀리터 캔을 비울 무렵에는 취기가 몰려와서, 그는 높으로 가라앉는 것처럼 깊은 잠에 빠져들었다.

(click: ?page)[==[(goto: &quot;편지&quot;)]</tw-passagedata><tw-passagedata pid="40" name="6월 24일" tags="" position="2498,402" size="100,100">&amp;nbsp&amp;nbsp6월 24일 월요일

&amp;nbsp&amp;nbsp(click: ?page)[==요시오의 책상 옆에는 천으로 만든 지저분한 자루 몇 개가 아무렇게나 내팽개쳐져 있었다. 어린애 하나가 완전히 들어갈 정도의 크기로, 하루에 두번, 본사나 영업소로 가는 우편물을 넣는 자루였다.

&amp;nbsp&amp;nbsp(click: ?page)[==책상 위에는 자루에 들어 있던 봉투나 서류 다발들이 높다랑 게 쌓여 있었다. 요시오는 조금 전까지 우편 봉투를 뜯어 안에 있는 서류에 날짜 도장을 찍는 작업을 하고 있었던 것 같다. 본래 여직원들이 하는 일이지만, 평소보다 일찍 출근했을 때는 요시오가 대신 하는 경우도 많았다.

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 수화기를 귀에 댄 채 신지에게 손짓을 하며 책상 위를 가리켰다. 책상 위에는 한 장짜리 인쇄물이 놓여 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그것은 본사에서 온 보험금 지급 결정 통지서로, 신지는 볼펜으로 쓰여 있는 이름을 읽어보았다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다 가즈야, 1985년 5월 28일생, 어린이 보험 &#39;쑥쑥&#39; 기호번호…….

&amp;nbsp&amp;nbsp(click: ?page)[==말도 안 돼! 신지는 쇠망치로 뒤통수를 얻어맞은 것처럼 입을 다물지 못했다. 고모다에게 보험금을 지급하라니, 본사에서는 대체 무슨 생각을 하는 것인가!

&amp;nbsp&amp;nbsp(click: ?page)[==잠시 후에 요시오가 불퉁한 표정으로 수화기를 내려놓았다. 

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어떻게 된 거지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 안색을 바꾸며 요시오를 추궁했다. 요시오에게 불만을 터뜨리는 것이 이치에 맞지 않는다는 사실은 알고 있지만, 솟구쳐 오르는 불만을 토로할 곳이 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;보다시피 본사에서는 보험금을 지급하라고 결정했네. 잘못 된 것은 아니야.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;하지만…… 어떻게?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;본사에서 문의하자, 경찰에서는 정식으로 가즈야의 죽음이 자살이라는 결론을 내렸다고 하더군. 경찰에서 그렇게 단언한 이상, 우리가 무슨 수로 그것을 뒤엎겠나? 재판을 한다고 해도 이길 수 있는 확률은 제로에 가까운데.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==이럴 수가……! 신지는 무너지듯이 의자에 털썩 주저앉았다. 그렇다면 지금 까지 버틴 것은 무엇 때문이었을까. 사람을 죽인 살인자에게 눈을 뻔히 뜨고 생명보험금을 지급하기 위해서였을까.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 운명의 장난처럼, 이제 그토록 신지를 괴롭혔던 문제는 모두 해결된 것이다. 앞으로 점심시간마다 고모다의 방문에 간이 철렁 내려앉는 일도 없고, 아파트 우편물을 도난당할 우려도 없다. 무엇보다 고모다의 복수를 두려워하여 전근을 신청할 까하던 고민도 없어질 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 그것은 진심으로 기다리던 결과는 아니었다. 위궤양에 걸리기 일보 직전인 긴장을 견디어낸 끝에 결국 찾아온 것이 카타르시스가 아니라 단순한 허탈감뿐이라니! 

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;마음은 이해하지만 조금 있다가 고모다 아저씨에게 전화하게. 오랫동안 기다리신 끝에 보험금 지급이 결정되었으니, 앞으로 여기까지 오실 필요는 없다고 말이야.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==장난스러운 말투와는 반대로, 요시오는 벌레라도 씹은 듯한 표정을 지었다. 문득 싸늘한 시체로 변한 가즈야의 모습이 뇌리에 떠올랐다. 미안하다. 결과가 이렇게 되리라고는 꿈에도 생각지 못했다…….

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 눈을 감고 마음속으로 가즈야의 명복을 빌었다.

(click: ?page)[==[(goto: &quot;보험금 지급&quot;)]</tw-passagedata><tw-passagedata pid="41" name="보험금 지급" tags="" position="2491,601" size="100,100">&amp;nbsp&amp;nbsp

&amp;nbsp&amp;nbsp(click: ?page)[==보험금 지급 결정을 전화로 통보했을 때. 고모다의 목소리는 예전과는 딴판으로 친근함이 철철 넘쳤다. 그는 몇 번이나 미안하다, 이제 살았다는 말을 반복했다. 마치 생명의 은인이라도 대하는 듯한 과장스러운 말투였다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 이를 악물고 살인자에게 인사를 받는 굴욕감을 견디 었지만, 고모다는 그런 마음을 아는지 모르는지 끈질길 정도로 고맙다는 말을 반복하면서 전화를 부여잡고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==500만 엔은 그날 오전에, 사치코의 명의로 되어 있는 신용금 고구좌에 이체되었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그나저나 정말 다행이야. 이것으로 한 건이 끝났으니까.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==고모다 사건에 휘말려 있었던 기타니,오사코 두 부장과 요시 오, 신지 네 명이 모인 회의에서 오사코가 무겁게 가라앉은 어두운 분위기를 날려보는 것처럼 입을 열었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;눈을 뻔히 뜨고 녀석에게 500이나 주는 것은 속이 부글부글 끓는 일이지. 그러나 하루도 빼놓지 않고 녀석을 보는 것도 참 을수 없는 일이 아닌가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그건…… 분명히 그렇지만요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지의 분명치 않은 대답에 기타니가 쓰디쓴 웃음을 지었다. 

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;자네가 고모다를 범인이라고 생각하는 것은 이해하네. 나도 현장에 있었다면 그렇게 생각했을지 모르지. 하지만 경찰에서 무죄라고 인정한 이상, 역시 무죄라고 할수 있지 않을까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아닙니다. 경찰에서는 고모다가 범인이라는 사실을 입증할 수 없었을 뿐이지. 무죄라는 확신을 가진 것은 아닐 겁니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==자신의 목소리가 딱딱하게 굳어 있다는 것은 스스로도 알 수 있었다. 교토 지사에 부임한 이후 말대답을 한 것은 이번이 처음이었기 때문에, 기타니는 조금 머쏙한 표정을 지었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어쨌든, 한 건은 낙착되지 않았나? 이제 고모다라는 남자와는 완전히 인연이 끊어졌어.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==오사코가 중재하듯이 큰소리로 말했을 때 생각지도 못한 곳 에서 반론이 제기되었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;정말 인연이 끊어졌다고 장담할 수 있을까요? 어쩌면 지금부터 시작일지도 모릅니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 팔짱을 낀 채 꼼짝도 하지 않고 입을 열었다. 건장한 팔의 근육이 긴장으로 인해 새하얗게 변해 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무슨 뜻인가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오는 탁자 위에 놓여 있는 계약 내용을 가리켰다.

&amp;nbsp&amp;nbsp(click: ?page)[==(text-color: blue)[&quot;고모다와 사치코에게는 아직 계약이 2건이나 남아 있습니다.] 더구나 이쪽은 제각기 3,000만 엔이지요. 얼마 전까지는 보험료를 납입하기도 어려운 것 같았지만, 500이나 되는 보험금이 들어간 이상 그것도 문제가 안 되겠지요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;잠깐만! 설마 또 저지른다는 것인가? 아무리 뭐라 해도, 이만큼 옥신각신한 다음이 아닌가? 그쪽도 바보가 아닌 이상 경찰이 주목하고 있다는 것 정도는 알지 않겠나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==오사코는 도저히 믿을 수 없다는 표정을 지었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그들은 보통 사람과는 차원이 다릅니다. 오히려 보험금이 지급되는 것을 보고, 증거만 남기지 안흥면 된다는 자신감을 가질지도 모르지요. 나는 가능성이 전혀 없다고 생각하지 않습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오의 말이 끝나기도 전에 신지의 온몸에는 가느다란 소름이 솟구쳤다. 어째서 더 빨리 그 가능성을 깨닫지 못했던가.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;저도 있을 수 있다…… 아니 거의 시간 문제라고 생각합니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이런! 자네까지도 말인가?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇게나 말할 근거가 있나?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==기타니의 온화한 표정이 순식간에 딱딱하게 굳어졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;애당초 그들은 보험에 가입할 필요가 없었습니다. 그런데도 불구하고 자진해서 보험에 가입하고, 더구나 그렇게 돈에 시달리면서도 고생고생해서 보험료를 납입한 것은, 처음부터 범죄를 저질러 보험금을 사취하겠다는 목적이 있었다고밖에 생각할 수 없습니다. 그렇지 않으면 벌써 해약했겠지요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==보험금을 노리는 범죄 가운데 가장 눈에 띄는 특징은, 똑같은 범행을 계속해서 반복한다는 것이다. 실제로 한 번뿐이라면 탄로나지 않았겠지만, 몇 번이나 똑같은 수법을 사용하다가 발각된 경우는 일일이 손으로 꼽을 수 없을 정도이다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다의 경제 사앹로 볼 떄, 500만 엔의 보험금을 다 사용하면 더 이상 보험료를 낼 수 없을 것이다. 즉, 다음 범행은 그 이전에 저지르지 않으면 안 되는 것이다. 아마 1년 이내에.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무서운 얘기지만, 있을 수 없는 일은 아니군. 그렇다면 이번에는 아내를 죽인다는 것인가……?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;오사코 부장. 말이 씨가 된다고 하니까 그런 말은 하지 마시구려.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==기타니가 떨떠름한 표정을 지으며 오사코를 질책했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;조금 전에도 말한 것처럼 고모다는 무죄라는 판명을 받았지 않았소? 그런데 억측만으로 살인자로 몰아세우면 명예훼손으로 고소당할 수도 있다오.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;하지만 실제로 그런 가능성이 높은 이상….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지가 말을 꺼내자마자 기타니가 파열음처럼 들리는 날카로운 목소리로 재빨리 가로막았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;착각해서는 안 돼! 우리는 경찰이 아니야. 경찰이라면 범죄를 미연에 방지해야겠지만 보험회사에게는 그러한 책임이 없어!&quot; 

&amp;nbsp&amp;nbsp(click: ?page)[==기타니의 목소리에는 두말을 꺼내지 못하게 만드는 힘이 있었다. 결국 그것이 그날의 결론이 되어. 사람들은 제각기 자기 자리로 돌아갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 어느 사이엔가 둔중하게 보이는 사치코라는 중년 여성에게 연민을 품기 시작했다. 고모다와 같은 끔찍한 남자와 결혼함으로써 하나밖에 없는 자식을 먼저 보내고, 이번에는 자신의 목숨까지 바람 앞에 흔들리는 등불이 된 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==그냥 내버려두어도 좋을 것인가. 그것은 기타니의 말처럼 분명히 보험회사의 영역을 초월한 일일지도 모른다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 전혀 보험회사에게 책임이 없다고 잘라 말할 수 있을까. 애당초 제대로 심사를 하지 않고 고모다 같은 사람과 보험 계약을 체결한 것 자체가 보험회사의 과실이라고 할 수 있지 않을까.

&amp;nbsp&amp;nbsp(click: ?page)[==그것으로 인해 살인이 일어난다면 보험회사는 간접적으로 범행에 가담한 것이나 마찬가지가 아닐까. 그는 일을 하면서도 하루종일 자문자답을 계속했다. 

(click: ?page)[==[(goto: &quot;6월 28일&quot;)]</tw-passagedata><tw-passagedata pid="42" name="메구미" tags="" position="2300,898" size="100,100">&amp;nbsp&amp;nbsp신지는 퇴근길에 여자친구인 메구미와의 동행길을 걸었다.

&amp;nbsp&amp;nbsp(click: ?page)[==여자친구와 거리를 걸으면서 그동안 있었던 고모다 일가의 이야기를 해주었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그녀는 역시 좋지 않은 이야기답게 조금 겁에 질려 있는 얼굴을 띄었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;왜 지금까지 말해주지 않았어요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;뭘?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;위험한 지경에 처해 있다는 것 말이에요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;특별히 한방 얻어맞은 것도 아니잖아.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;&#39;아직은&#39;이란 말은 붙여야 하지 않나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그는 메구미를 쳐다보았지만, 어두컴컴한 데다가 불빛을 등지고 있었기 때문에 자세한 표정까지는 알 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이 정도는 그렇게 드문 일이 아니야. 교토에 오기 전에 본사에서 그런 사람들을 전문적으로 다뤄온 베테랑 과장에게서 이야기를 들은 적이 있지. 시다라 씨라고 지금 보험금 과장으로 일하고 있는데, 고객에게 수도 없이 얻어맞았다고 하더군. 심한 부상을 입을 정도는 아니였던 것 같지만.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 너무나 온후한 표정을 짓고 있는 시다라의 얼굴을 떠올렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;맨 처음에는 역시 충격을 받았다고 하더군. 샐러리맨의 세계는 폭력과는 별로 인연이 없는 데다가, 다 큰 어른이 다른 사람들과 주먹질을 할 일도 없으니까. 그런데 어느 정도 시간이 흐르자, 시다라 과장은 상대가 주먹으로 나오면 &#39;옳거니!&#39;하고 무릎을 쳤다더군. 그러면 상대방에게 죄책감이 생겨 교섭이 유리해지고, 막상 문제가 생기면 경찰에 고소할 수도 있으니까 말이야. 그렇게까지 달관하면 이 세상에 무서운 것은 하나도 없겠지.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==두 사람은 언덕길을 올라가서 은각사 거리에서 왼쪽으로 꺾어졌다. 똑바로 가면 완만한 산길에 도착하는데, 그곳에서 몇 킬로미터만 지나면 시가현 오쓰시로 접어든다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;지금 당신이 상대하는 사람은. 시다라라는 과장을 때린 사 람들과는 조금 다른 것 같아요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==너무나 갑작스러운 말에 신지는 어안이 벙병해졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;다르다니, 어떻게 다르다는 거지?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그 사람은 피가 흐를 정도로 자기 손을 깨물었다고 했지요? 그것은, 보통 사람은 흉내도 낼 수 없는 짓이에요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그 남자는 분명히 이상해.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이상하다고 할까, 그것은 하나의 메시지라고 생각해요&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 발걸음을 늦추고 메구미의 얼굴을 뻔히 쳐다보았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무슨 뜻이지?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;자신의 육체에 상처를 내서 상대에게 과시하는 행동은 유사 이전부터 존재하는, 모든 인류에게 보편적으로 있는 보디랭귀지잖아요? 입술을 깨물거나 단단한 벽을 힘껏 치는 것과 마찬 가지로요…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 손을 깨물었을 때의 고모다의 모습을 떠올렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==궁지에 몰린 짐승처럼 미친 듯한 눈길, 동공은 마치 바늘 끝처럼 수 축되어 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그것은 고모다 자신도 대단한 고통을 느꼈다는 표현일 것이다. 그렇게까지 해서 신지에게 전해야 하는 메시지란 과연 무엇일까?

&amp;nbsp&amp;nbsp(click: ?page)[==메구미의 말을 들을 필요도 없이 그 자해 행위가 무엇을 의미하는지는 짐작이 되었다.

&amp;nbsp&amp;nbsp(click: ?page)[==분노, 협박, 또는 복수의 선언. 

&amp;nbsp&amp;nbsp(click: ?page)[==두사람은 잠시 아무 말도 않고 시라카와 거리를 걷다가 이옥고 지하 1층에 있는 파피루스라는 간판이 걸린 레스토랑의 문을 열었다.

&amp;nbsp&amp;nbsp(click: ?page)[==예약은 하지 않았지만 주인인 사사누마가 벽쪽에 있는 자리로 안내해 주었다.

&amp;nbsp&amp;nbsp(click: ?page)[==사사누마는 신지의 대학 선배로, 자전거로 전세계를 여행했을 때 각국에서 먹은 음식의 맛을 재현하기 위 해 레스토랑을 차렸다고 한다.

&amp;nbsp&amp;nbsp(click: ?page)[==짧은 기간이기는 하지만 대학 시 절에 아르바이트를 했다는 인연으로, 신지는 가끔 메구미와 함께 찾아오곤 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 장소가 바뀌면 기분도 바뀐다는 것을 새삼스럽게 실감했다. 와인으로 건배하고 나서 요리가 나올 무렵에는 메구미의 표정도 한껏 밝아졌기 때문이다.

&amp;nbsp&amp;nbsp(click: ?page)[==레스토랑의 벽에는 신인 작가의 도자기가 빈틈없이 진열되어 있었다. 메구미의 바로 뒤에 있는 작품은 사방팔방으로 뿔이 뻗어 있는, 고대의 제기(祭器)를 연상시키는 독특한 형태를 하고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==초록색과 노란색 유액이 조명 속에서 아름다운 빛을 뿌렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==메구미는 어깨 너머로 도자기를 감상하면서 탄성을 질렀다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이러한 작품을 보면, 사람은 참으로 여러 가지 생각을 하고 있다는 것을 알 수 있어요. 지금까지 심리학을 공부하면서 배운, 가장 중요한 진리가 무엇인지 아세요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;글쎄.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그는 메구미가 화를 낼 것 같은 대답밖에 생각나지 않아서 적당히 얼버무렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;사람은 한 사람 한 사람이 전혀 다른, 복잡하기 짝이 없는 우주라는 거예요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 메구미의 술잔에 와인을 따라주면서, 오늘은 여느 때보다 술을 들이키는 속도가 빠르다는 생각이 들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==이미 둘이서 와인을 세 병이나 비웠던 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아동심리학을 전공하고 아이들을 대하고 나서는 그것을 뼈저리게 실감했어요. 신지 씨는 어린애들은 모두 똑같다고 생각하지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇게 생각할 리가 있어?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 정색을 하며 항의했지만 메구미는 듣지 못한 척 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;모두들 그렇게 생각해요. 아이들은 어른처럼 복잡한 고민을 가지고 있지 않은, 단순히 척수반사(脊髓反射)로 살아가는 생물들 이라구요. 그러나 실제로 아이들과 이야기해 보면 그들은 그렇게 단순하지도 않고, 정말로 한 명 한 명이 모두 달라요. 심리학 교과서에 실려 있는 아이는 한 사람도 없지요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;무슨 말을 하고 싶은지 알겠어.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;따라서 자기 마음대로 사람에게 딱지를 붙여서 분류하는 것은 말도 안 돼요! 더구나 정성결여자라는 말은 괴물이라는 말과 마찬가지잖아요. 그리고 배덕증후군에 이르면 분노가 폭발할 정도예요. 구태의연함을 보아도 무신경함을 보아도, 그것은 심리학자보다는 경찰청이나 법무성 관료가 만들어냈을 법한 말 이에요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==메구미의 분노를 진정시키기 위해 그는 화제의 방향을 다른 곳으로 돌리기로 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신문에서 보았는데, 정신분열증이라는 병명을 바꾸자는 음직임이 있잖아? 원래 독일어를 잘못 번역한 것으로, 전혀 병태(病態)와도 일치하지 않고 다중인격과도 착각할 수도 있고 말이야. 게다가 불치병 같은 어두운 어감이 강해서, 그런 선고를 받으면 가족들은 절망의 뉴으로 빠져버리지. …그와 마찬가지로 정성결여에 대해서도 다른 표현을 쓰는 게 좋다고 생각해.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;잠깐만요. 당신까지 단순한 언어 문제라고 생각하는 거예요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 어떻게 대답해야 좋을지 몰라 잠자코 담배만 피웠다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;당신은 정말로 이 세상에, 인간다운 마음을 가지고 있지 않은 사람이 존재한다고 생각해요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그는 길게 한숨을 내쉬고 나서 담배를 비벼꼈다. 거짓말을 한다고 해도 메구미는 즉시 간파해 낼 것이 틀림없다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래, 있다고 생각해.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;왜죠? 고모다라는 사람 때문인가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그래.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어째서 그렇게 단정을 짓죠? 그 사람의 마음에 들어가본 것도 아니잖아요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;물론 누구나 다른 사람의 마음속으로 들어갈 수는 없어. 그러니까 밖으로 드러난 행동으로 판단하는 수밖에 없잖아?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇다 치더라도 분명한 증거는 없잖아요? 수상쩍다든지 막연한 상황 증거라든지, 그런 것만 가지고 한 사람을 괴물로 취급하다니!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇게 생각하는 것은 아마. 당신이 그런 사람을 실제로 만난 적이 없기 때문일 거야.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==말이 입에서 떠난 직후 실수했다는 생각이 들었지만 때는 이미 늦었다. 메구미는 날카로운 눈길로 신지를 노려보았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그런 말은 비겁해요. 본 적이 없으니까 모른다고 하면 반론할 여지가 없잖아요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;하지만 그것이 사실이니까 어쩔 수 없잖아? 이것은 실제로 정성결여자를 만난 사람. 그것도 그들의 맨 얼굴을 훔쳐볼 기회가 있었던 사람만이 실감할 수 있는 일이라고.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==메구미는 남아 있던 와인을 단숨에 들이켰다. 마치 눈물이라 도 흘린 것처럼 눈자위가 붉게 물들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;믿을 수 없어요……! 나는 그 고모다라는 사람에게 틀림없이 사람다운 감정이 있다고 생각해요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어째서 그렇게 생각하지?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그 작문을 보고도 모르세요? 그 글을 쓴 아이는, 절대로 괴물이 아니에요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==메구미는 얼굴로 내려온 머리칼을 올리려는 것처럼 고개를 흔들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그것이야말로 근거가 너무 회박하다는 생각이 드는데, 그리고 조금 전에 여기에 올 때 한 말과는 모순되잖아? 내가 상대하고 있는 사람은, 단지 머리에 피가 솟구쳐서 주먹을 휘두르는 단순한 녀석과는 다른 위험한 사람이라고 하지 않았어?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;모순되지 않아요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어째서?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그 순간, 메구미는 마치 조개가 입을 다물어 버리듯이 아무 말도 하지 않았다. 신지는 계속해서 추궁하려고 했지만 그녀의 어두운 표정을 보고 생각을 바꾸었다.

&amp;nbsp&amp;nbsp(click: ?page)[==오늘은 그대로 돌아가는 편이 좋을 것이다. 그는 살그머니 일어서서 계산을 마치고는 사사누마에게 택시를 불러달라고 부탁했다.

(click: ?page)[==[(goto: &quot;전화&quot;)]</tw-passagedata><tw-passagedata pid="43" name="6월 28일" tags="" position="2698,402" size="100,100">&amp;nbsp&amp;nbsp6월 28일 금요일

&amp;nbsp&amp;nbsp(click: ?page)[==신지의 주위에는 거의 한 달 보름만에 평화로운 나날이 돌아 왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==보험금을 지급한 이후, 고모다가 회사에 나타나는 일은 한 번도 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==매일 저녁 아무 말도 하지 않고 끊던 전화도 한 순간에 사라졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 온몸을 옥죄던 긴장에서 해방됨으로써 노이로제적인 행 동에서도 해방되었다.

&amp;nbsp&amp;nbsp(click: ?page)[==집에 있는 동안 끊임없이 음악을 틀거나 하루에 수십 번씩 문단속을 확인하는 일도 없어졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==그 변화를 가장 먼저 알아차린 사람은 바로 요시오였다. &quot;이제야 겨우 자네의 표정이 원래대로 돌아왔군. 자네는 느끼지 못했을지도 모르지만, 얼마 전까지는 말하는 도중에 얼굴이 움찔움찔 경련을 일으킨 적도 있었다네. ……뭐라고 할까. 이대로 있으면 노이로제라도 걸리지 않을까 걱정하던 참 이었지.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 몸으로 직접 부딪치는 위협은 사라졌다고 하지만 마음속의 갈등은 오히려 증폭되기만 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==분명히 어떠한 조치라도 취해야 한다는 경각심이 생겼다.

&amp;nbsp&amp;nbsp(click: ?page)[==구체적으로 어떻게 하는 것이 좋을까. 신지는 곰곰이 생각한 끝에 하나의 결론에 도달하고 워드 프로세서 앞에 앉았다.

&amp;nbsp&amp;nbsp(click: ?page)[==[[워드 프로세서 작동하기-&gt;워드]]</tw-passagedata><tw-passagedata pid="44" name="워드" tags="" position="2700,596" size="100,100">//&amp;nbsp&amp;nbsp안녕하십니까, 사치코 씨.

&amp;nbsp&amp;nbsp(click: ?page)[==갑자기 낯선 사람의 편지를 받고 많이 놀라셨으리라고 생각합니다.

&amp;nbsp&amp;nbsp(click: ?page)[==5월에 가즈야가 세상을 떠난 것에는 심심한 애도의 뜻을 표합니다. 분명히 땅이 무너지는 슬픔에 빠지셨으리라고 생각합니다. 그러나 가즈야는 스스로 목숨을 끊은 것이 아닙니다.

&amp;nbsp&amp;nbsp(click: ?page)[==나는 현재 경찰서에 근무하고 있는데 어떤 이유에서 가즈야 는 남편분인 고모다 씨가 살해했다고 믿고 있습니다.

&amp;nbsp&amp;nbsp(click: ?page)[==당신은 고모다 씨가 보험금을 타내기 위해 예전에 엄지손가락 을 잘랐다는 사실을 알고 있습니까?

&amp;nbsp&amp;nbsp(click: ?page)[==고모다 씨는 자신뿐만 아니라 남도 태연하게 죽이거나 상처입힐 수 있는 사람입니다.

&amp;nbsp&amp;nbsp(click: ?page)[==고모다 씨에게 있어서 가즈야는 피가 이어지지 않은 자식으 로, 그는 보험금을 사취하기 위해 가즈야를 죽인 것이 틀림 없습니다.

&amp;nbsp&amp;nbsp(click: ?page)[==제가 우려하는 것은 당신에게도 보험이 걸려 있다는 것입니다.

&amp;nbsp&amp;nbsp(click: ?page)[==따라서 고모다 씨는 당신도 살해할 것이 틀림없습니다.

&amp;nbsp&amp;nbsp(click: ?page)[==저희 경찰에서는 고모다 씨를 조사했습니다만, 유감스럽게도 확실한 증거가 없었습니다. 그러나 이대로 있으면 당신까지 살해할지도 모른다는 생각에 이 편지를 쓰게 되었습니다.

&amp;nbsp&amp;nbsp(click: ?page)[==도저히 믿을 수 없겠지만 한 번 곰곰이 생각해 보십시오. 그래도 고모다 씨와 헤어질 수 없다면 보험금 수취인을 다른 사람으로 한다든지 해약하는 편이 좋다고 생각합니다.

&amp;nbsp&amp;nbsp(click: ?page)[==아무쪼록 몸조심하시기 바랍니다.//

&amp;nbsp&amp;nbsp(click: ?page)[==가짜 신분을 사칭하고 더구나 아무런 증거도 없이 한 사람을 중상모략한 편지, 괴문서나 다름없는 그 편지를 쳐다보자 신지 의 입에서는 쓴웃음이 배어나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==사치코의 독해력을 염두에 두고 가능한 쉬운 말로 표현했기 때문에 더욱더 수상쩍은 느낌이 들었다.

&amp;nbsp&amp;nbsp(click: ?page)[==설마 자신이 그런 편지를 보내는 처지가 되리라고는 꿈에도 생각하지 못했다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 만일을 위해 비닐 장갑을 끼고 출력한 용지를 접었다. 그리고 흔하디흔한 갈색 봉투에 넣고, 워드 프로세서로 주소를 만들어서 붙였다.

&amp;nbsp&amp;nbsp(click: ?page)[==어디에서 넣을까 생각하다가 사흘 뒤에 있는 도쿄 연수를 떠올리고, 기차를 타기 전에 교토역에서 보내기로 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==설마 그 이전에 살인이 행해지는 일은 없으리라. 보험회사 직원으로서 지금 그가 하는 일은 상식에서 벗어나 있고, 자칫 잘못하면 징계를 받거나 해고되는 것은 불을 보듯 뻔한 일이다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 이것은 어디까지나 마음을 휘어잡고 있는 부담을 완 화시키기 위한 편법이라고, 신지는 자기 자신을 위로했다.

&amp;nbsp&amp;nbsp(click: ?page)[==사치코가 편지 내용을 믿지 않는 경우, 또는 믿어도 효과적인 수단이 없는 경우, 아마 그녀는 목숨을 잃고 말 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 그것까지는 자신의 책임이 아니다. 자신은 경고를 보내는 것으로 의무를 다했으니까.

&amp;nbsp&amp;nbsp(click: ?page)[==하지만 막상 그런 사태가 발생한다면 과연 그렇게 생각할 수 있을까.

(click: ?page)[==[(goto: &quot;7월 3일&quot;)]</tw-passagedata><tw-passagedata pid="45" name="7월 3일" tags="" position="2899,402" size="100,100">&amp;nbsp&amp;nbsp7월 3일 수요일

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 서류가방을 들고 아파트 계단을 올라가다가 문득 발길을 멈추었다. 검은 쓰레기 봉투 하나가 그의 집 앞에 놓여 있었던 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[==그가 쓰레기를 버릴 때 사용하는 것과 똑같은, 45리터짜리 봉투였다. 중간 부분을 새하얀 포장끈으로 묶어놓았는데, 입구 주변을 자세히 보니 봉투는 이중으로 되어 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 신발 끝으로 쓰레기 봉투를 툭툭 쳐 보았다. 내용물이 얼마 들어 있지 않은지 몹시 가벼운 느낌이 전해졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==무엇일까. 설마 이 아파트에 사는 사람이 밑에까지 내려놓기가 귀찮아서 그의 집 앞에 버려둔 것은 아니리라.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 웅크리고 앉아서 포장끈을 풀려고 했지만 워낙 단단하게 묶여 있어서 쉽게 풀릴 것 같지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[=={(track: &#39;ring&#39;, &#39;playwhenpossible&#39;)}봉투를 찢으려고 한 순간, 방에서 미친 듯이 전화벨 소리가 울렸다. 그는 벌떡 이러안서 문을 열쇠로 열고 안으로 들어갔다.

&amp;nbsp&amp;nbsp(click: ?page)[==연수를 받으러 가기 전에 멍청하게도 자동응답기 버튼을 눌러놓는 것을 잊어버려서, 호출음은 열 번이 넘도록 계속 울리고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==고적한 밤 공기 속에서 문을 여는 금속성이 차갑게 울려퍼졌다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 난폭하게 신발을 벗어던지고 성큼성큼 부엌을 가로 질러 침대 옆에 놓여 있는 수화기를 들어올렸다. 

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;여보세요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==수화기를 들자마자 처절한 울음소리가 새어나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==싸늘한 오한이 등줄기를 타고 스물스물 기어올라왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;여보세요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 씨……?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==메구미의 목소리였다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;여보세요? 무슨 일이야?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==목소리가 작은 데다가 끊임없이 숨을 들이마시고 있어서, 메구미의 말은 전혀 알아들을 수 없었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;잘 안들려. 마음을 가라앉히고 말해 봐, 무슨 일 있어?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 씨…… 페트로… 가요, 페트로… 얘들이……!&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==메구미는 다시 울음을 터뜨렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 그녀의 마음이 진정 되기를, 속을 바싹바싹 태우면서 기다렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==페트로? 그때서야 메구미가 기르는 두 마리 고양이 가운데 수컷의 이름이 페트로 시안이었다는 것이 떠올랐다.

&amp;nbsp&amp;nbsp(click: ?page)[==분명 요전에 온 편지에 암고양이가 새끼를 낳았다고 하지 않았던가.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;메구미. 울지만 말고 제대로 이야기를 해봐. 페트로시안은 당신이 기르는 고양이지? 고양이가 어떻게 됐어?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==그녀의 울음소리가 다시 크게 증폭되었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇게…… 그렇게 심한 짓을 어떻게?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==한 걸음 뒤에 다가올 충격을 예감했는지, 신지의 심장은 세차게 방망이질치기 시작했다.

&amp;nbsp&amp;nbsp(click: ?page)[==그리고 머릿속에서는 무슨 일이 일어났는지 서서히 형태가 잡혀갔다. 그때 전화 건너편에서 다른 목소리가 들려왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 씨지요? 내가 대신 말할게요… 여보세요. 신지 씨? 하루코인데요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==전화를 대신 받은 사람은 이시쿠라 하루코였다. 메구미가 대학시절부터 계속 살아온 집의 주인으로, 신지와도 얼굴을 알고 있는 사이였다.

&amp;nbsp&amp;nbsp(click: ?page)[==이미 쉰 고개를 넘긴 온화한 인품의 그녀는 고양이를 무척 좋아해서, 메구미가 그곳을 떠나지 않으려는 것도 고양이를 길러도 좋다는 조건이 있었기 때문이었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;아, 안녕하십니까? 오랜만입니다. 그런데 무슨 일이 있었나요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그게 말이에요. 뭐라고 해야 좋을지, 너무 끔찍해서요.&amp;nbsp(click: ?page)[==(text-color: red)[메구미의 고양이 목이…… 모두 잘려버렸어요.&quot;]

&amp;nbsp&amp;nbsp(click: ?page)[==뒤에서 메구미의 격렬한 울음소리가 들려오고, 하루코의 목소리에도 눈물이 섞여 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그것도 어미뿐만 아니라 새끼까지 모두. 조금 전에 경찰서에 전화를 했는데, 경찰에서는 기물손괴라고 하면서 대충 조사를 하더군요……. 세상에 고양이를 기물이라고 하는 거예요. 하지만 이것은 살인이나 마찬가지 아닌가요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 하루코의 떨리는 목소리를 건성으로 듣고 있다가 가까스로 말을 짜내었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;지금 당장 그쪽으로 가겠습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==하루코의 목소리에서는 안도가 묻어나왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그렇게 해주시겠어요? 메구미는 그저 울기만 해서…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 20분 안에 가겠다고 하면서 전화를 끊었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그러나 가기 전에 확인하지 않으면 안 될 것이 있다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 일단 현관으로 발길을 돌렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==발이 앞으로 나가지 않아서 좀처럼 첫 걸음을 내딛을 수 없었지만, 한시라도 빨리 메구미에게 가봐야 한다는 강박관념이 단호한 결심을 내리게 했다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 천천히 걸음을 내딛어 문을 열고, 쓰레기 봉투를 집 안으로 가지고 들어왔다.

&amp;nbsp&amp;nbsp(click: ?page)[==그리고 심호흡을 하고 나서 쓰레기 봉투 아랫부분을 거칠게 뜯었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그 순간 속을 뒤집는 악취가 피어올랐다.

&amp;nbsp&amp;nbsp(click: ?page)[==피냄새라는 것은 즉시 알 수 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==그는 숨을 멈추고 주머니 입구를 크게 펼쳤다.

&amp;nbsp&amp;nbsp(click: ?page)[==그리고 다음 순간 황급히 고개를 돌렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==그런데도 그 광경은 마치 사진이라도 찍힌 것처럼 눈꺼풀 안쪽에 깊이 새겨졌다. 

&amp;nbsp&amp;nbsp(click: ?page)[==희뿌연 공처럼 생긴 작은 물체, 커다란 공 주위를 몇 개의 작은 공이 감싸고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&lt;img src=&quot;./img/cat.png&quot; alt=&quot;cat&quot;&gt;&lt;br&gt;&lt;br&gt;
[==(text-color: red)[전부 몸통이 없는 고양이 머리였다.]

&amp;nbsp&amp;nbsp(click: ?page)[==새끼 고양이들은 모두 눈을 감고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==아마 무슨 일이 일어났 는지 깨닫기도 전에 죽어버린 것이리라.

&amp;nbsp&amp;nbsp(click: ?page)[==어미 고양이의 것 같은 중앙에 있는 커다란 목은 둔탁한 눈을 크게 뜨고 이빨을 드러내고 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==어떻게 해서라도 새끼를 지키려고 하는 것처럼 처절하기 짝이 없는 형상이었다.

(click: ?page)[==[(goto: &quot;7월 4일&quot;)]</tw-passagedata><tw-passagedata pid="46" name="7월 4일" tags="" position="2900,597" size="100,100">&amp;nbsp&amp;nbsp7월 4일 목요일

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;장난? 경찰에서는 이것을 단순한 장난으로밖에 보지 않습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[== 신지는 기요시의 말꼬리를 잡고 추궁했다. 그러자 기요시는 고개를 돌리며 황급히 말을 얼버무렸다.

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;물론 단순한 장난이라는 것은 아닙니다. 분명히 상상을 초월하는 악질적인 장난이지만…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;하지만 경찰에서는 이대로 방치해 두면서, 실제로 누군가 죽을 때까지 움직이지 않을 거잖아요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;도대체 누가 죽는다는 겁니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;조금 전에도 설명한 것처럼 사치코 씨입니다. 사치코 씨에 게는 3,000만 엔의 보험금이 걸려 있으니까요. 게다가 이 고양이 사건을 봐도 알수 있는 것처럼, 나와 메구미도 언제 살해될 지 모르는 상태입니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;잠시만요.&quot;

기요시는 왼손으로 의자 쿠션을 껴안더니 담배를 들고 있는 오른손을 치켜들었다.

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;나는 신지 씨의 말을 도저히 이해하지 못하겠습니다. 만약 에 만약에 말입니다. 만약에 고모다 씨가 부인을 죽이려고 한다고 합시다. 그런데 당신에게는 왜 이런 짓을 하는 거지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;그것은…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[== 신지는 갑자기 말문이 막혔다.

&amp;nbsp&amp;nbsp(click: ?page)[== 범인의 의도를 대체 어떻게 설명한단 말인가.

&amp;nbsp&amp;nbsp(click: ?page)[== &quot;그렇지 않습니까? 가즈야의 보험금은 이미 받았는데 지금에 와서 이런 짓을 할 이유가 어디 있습니까? 게다가 앞으로 사람을 죽이려는 사람이, 일부러 자신에게 시선이 고정되는 짓을 할 리가 없지 않습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[== ……편지다.&amp;nbsp(click: ?page)[==신지는 그제서야 겨우 깨달았다.

&amp;nbsp&amp;nbsp(click: ?page)[== 사치코 앞으로 보낸 편지가 고모다의 눈에 떤 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[== 일단 경찰 관계자로 사칭하기는 했지만, 그것이 거짓말이라 는 것은 불을 보듯 뻔하다.

&amp;nbsp&amp;nbsp(click: ?page)[== 따라서 사건에 대해서 알고 있는 사람을 찾다보면, 보낸 사람은 쉽게 짐작할 수 있다.

&amp;nbsp&amp;nbsp(click: ?page)[== 고모다는 그 편지를 보고, 쓸데없는 짓을 하면 너도 이렇게 된다는 경고의 메시지를 보낸 것이다.

&amp;nbsp&amp;nbsp(click: ?page)[== 그렇다면 역시 고모다는 일을 저지를 생각인가. 그렇지 않으면 이런 짓까지 할 필요는 없다.

&amp;nbsp&amp;nbsp(click: ?page)[== 신지는 온몸에 싸늘한 전율을 느꼈다. 고모다는 어디까지나 아내의 살해를 강행할 생각인 것이다.

(click: ?page)[==[(goto: &quot;알리바이&quot;)]</tw-passagedata><tw-passagedata pid="47" name="알리바이" tags="" position="2903,755" size="100,100">&amp;nbsp&amp;nbsp&quot;일단은 알리바이가 성립했습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;예?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;요전에 얘기하지 않았습니까? 고모다의 알리바이 말입니다. 가즈야의 사망추정 시각인 오전 10세에서 정오까지, 그 남자와 같이 있었다는 사람이 나타났습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==신지는 너무나 뜻밖의 대답에 입을 다물지 못했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;하지만……, 그 사람이 부탁을 받고 위증을 했을지도 모르지 않습니까?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그럴 가능성은 거의 없습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==기요시는 두말도 붙이지 못할 정도로 쌀쌀맞게 말했다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그 남자는 고모다를 술집에서 알았을 뿐, 다른 접점은 전혀 없었습니다. 우리가 간신히 찾아냈을 때만 해도 고모다의 이름도 모를 정도였으니까요. 그런데 사진을 보여주었더니 분명히 사건 당일에 함께 있었다고 하더군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;그러나…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;일단 내 얘기를 끝까지 들어보십시오. 그 남자의 증언에 따 라서 당일의 행적을 조사해 보았습니다. 그들은 아침 일찍부터 강가에서 노름을 했지요. 그런데 우연히 근처에서 몇몇 사람들이 구경 했다는 것을 알게 되어서, 그 자들을 찾아내서 뒤를 캐 보았습니다. 즉, 5월 7일. 오전 10시부터 정오까지 고모다에게는 철벽처럼 흔들리지 않는 알리바이가 있습니다.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==마치 영혼이 빠져나간 것처럼 머리가 텅 비었다.

&amp;nbsp&amp;nbsp(click: ?page)[==무엇이 어떻게 된 것인지 이해할 수 없다. 

&amp;nbsp&amp;nbsp(click: ?page)[==알리바이 트릭. 실제로는 도저히 있을 수 없는 일이다. 그러나…….

&quot;저…… 가즈야의 당일 행동은 어떠했지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==기요시는 담배를 문 채 고개를 끄덕이면서 순순히 입을 열었다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;말하는 김에 모두 해주지요. 가즈야는 당일, 아침 일찍 학교에 갔다고 합니다. 그런데…… 지체아라고 할까. 초등학교 5학년인데 아직 구구단도 외우지 못했다고 하더군요. 선생의 말을 알아듣지 못하는 탓도 있겠지만, 수업 도중에 어딘가로 사라지는 일이 많았다고 합니다. 그날도 2시간 정도 지나자 이미 모습이 보이지 않았다더군요. 그런데 항상 있었던 일이라서 학교에 서도 그렇게 걱정하지 않았답니다. 일단 담임 선생이 집에 전화를 걸었지만 아무도 받지 않았다고 하더군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;어머니인 사치코는 어디에 갔지요?&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;빠찡코지요. 상당히 빠져 있는 것 같더군요. 돈이 한푼이라도 생기면 시장에 간다는 핑계로 나가서는 밤이 이숙할 때까지 빠찡코를 하고 돌아오지요. 가즈야는 점심도 컵라면으로 때웠 다고 하더군요.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==세상을 떠난 가련한 소년이 신지의 가슴을 쥐어뜯었다. 학교에서도 집에서도 소외당하고, 살아 있었던 때조차 무엇 하나 즐거운 일이 없었던 소년…….

&amp;nbsp&amp;nbsp(click: ?page)[==기요시가 예리하게 신지의 마음을 읽어낸 것 같았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;가없은 아이였지요. 자살하기 전날도 어머니에게 심하게 야단맞았다고 하더군요. 시험에서 빵점을 맞았다는 이유로요. 어머니다운 일은 하나도 하지 않으면서 어떻게 자식을 야단칠 수 있는지 원…… 그래서 그날은 학교에 가서 첫 수업에서 손을 들었던 것 같습니다. 산수 시간이었는데, 어머니는 수업 시간에 반드시 손을 들라고 호통을 쳤다고 하더군요. 담임 선생은 오랜만에 손을 든 가즈야를 시켰지만, 당연히 대답은 하지 못했지요. 그래도 손은 계속 들었다고 합니다. 그러자 선생은 머리끝까지 화가 치밀어서 복도에 세워 두었답니다. 그것도, 너는 수업에 방해만 된다고 야단쳐서 말입니다. 이제 납득하시겠어요?&quot;

(click: ?page)[==[(goto: &quot;7월 15일&quot;)]</tw-passagedata><tw-passagedata pid="48" name="7월 15일" tags="" position="3096,404" size="100,100">&amp;nbsp&amp;nbsp7월 15일 월요일

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;신지 주임. 잠깐 나 좀 보지.&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오가 굳은 얼굴로 신지를 보며 손짓했다. 오사코도 왠지 불퉁한 표정을 지으며 그를 쳐다보았다. 가까이 다가가자 기타니의 책상 위에는 사망보험금, 고도장애보험금 청구서류가 놓여 있었다.

&amp;nbsp&amp;nbsp(click: ?page)[==기타니는 도저히 믿을 수 없다는 표정을 지으며 팔짱을 낀 채 꼼짝도 하지 않았다.

&amp;nbsp&amp;nbsp(click: ?page)[==&quot;이것을 보게. 내 눈을 의심할 수밖에 없어…….&quot;

&amp;nbsp&amp;nbsp(click: ?page)[==요시오의 나지막한 목소리가 긴장으로 인해 가늘게 떨렸다.

&amp;nbsp&amp;nbsp(click: ?page)[==언제나 쾌활한 웃음으로 일관하던 그의 한쪽 뺨이, 싸늘한 긴장으로 인해 일그러진 것처럼 보였다.

&amp;nbsp&amp;nbsp(click: ?page)[==[[서류 확인하기-&gt;서류 확인]]</tw-passagedata><tw-passagedata pid="49" name="서류 확인" tags="" position="3096,554" size="100,100">&amp;nbsp&amp;nbsp보험금 청구자는 고모다 사치코, 힘을 주어 눌러쓰는 악필 사인은 이미 눈에 익은 터였다. 사인 옆에는 새로 만든 것인지 기</tw-passagedata></tw-storydata>
<script title="Twine engine code" data-main="harlowe">"use strict";var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var requirejs,require,define,root,factory;!function(e){var t,n,r,a,i={},o={},s={},c={},u=Object.prototype.hasOwnProperty,l=[].slice,p=/\.js$/;function f(e,t){return u.call(e,t)}function d(e,t){var n,r,a,i,o,c,u,l,f,d,h,y=t&&t.split("/"),m=s.map,g=m&&m["*"]||{};if(e){for(o=(e=e.split("/")).length-1,s.nodeIdCompat&&p.test(e[o])&&(e[o]=e[o].replace(p,"")),"."===e[0].charAt(0)&&y&&(e=y.slice(0,y.length-1).concat(e)),f=0;f<e.length;f++)if("."===(h=e[f]))e.splice(f,1),f-=1;else if(".."===h){if(0===f||1===f&&".."===e[2]||".."===e[f-1])continue;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}if((y||g)&&m){for(f=(n=e.split("/")).length;f>0;f-=1){if(r=n.slice(0,f).join("/"),y)for(d=y.length;d>0;d-=1)if((a=m[y.slice(0,d).join("/")])&&(a=a[r])){i=a,c=f;break}if(i)break;!u&&g&&g[r]&&(u=g[r],l=f)}!i&&u&&(i=u,c=l),i&&(n.splice(0,c,i),e=n.join("/"))}return e}function h(t,r){return function(){var a=l.call(arguments,0);return"string"!=typeof a[0]&&1===a.length&&a.push(null),n.apply(e,a.concat([t,r]))}}function y(e){return function(t){i[e]=t}}function m(n){if(f(o,n)){var r=o[n];delete o[n],c[n]=!0,t.apply(e,r)}if(!f(i,n)&&!f(c,n))throw new Error("No "+n);return i[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function v(e){return e?g(e):[]}r=function(e,t){var n,r,a=g(e),i=a[0],o=t[1];return e=a[1],i&&(n=m(i=d(i,o))),i?e=n&&n.normalize?n.normalize(e,(r=o,function(e){return d(e,r)})):d(e,o):(i=(a=g(e=d(e,o)))[0],e=a[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},a={require:function(e){return h(e)},exports:function(e){var t=i[e];return void 0!==t?t:i[e]={}},module:function(e){return{id:e,uri:"",exports:i[e],config:function(e){return function(){return s&&s.config&&s.config[e]||{}}}(e)}}},t=function(t,n,s,u){var l,p,d,g,b,w,T,S=[],x=void 0===s?"undefined":_typeof(s);if(w=v(u=u||t),"undefined"===x||"function"===x){for(n=!n.length&&s.length?["require","exports","module"]:n,b=0;b<n.length;b+=1)if("require"===(p=(g=r(n[b],w)).f))S[b]=a.require(t);else if("exports"===p)S[b]=a.exports(t),T=!0;else if("module"===p)l=S[b]=a.module(t);else if(f(i,p)||f(o,p)||f(c,p))S[b]=m(p);else{if(!g.p)throw new Error(t+" missing "+p);g.p.load(g.n,h(u,!0),y(p),{}),S[b]=i[p]}d=s?s.apply(i[t],S):void 0,t&&(l&&l.exports!==e&&l.exports!==i[t]?i[t]=l.exports:d===e&&T||(i[t]=d))}else t&&(i[t]=s)},requirejs=require=n=function(i,o,c,u,l){if("string"==typeof i)return a[i]?a[i](o):m(r(i,v(o)).f);if(!i.splice){if((s=i).deps&&n(s.deps,s.callback),!o)return;o.splice?(i=o,o=c,c=null):i=e}return o=o||function(){},"function"==typeof c&&(c=u,u=l),u?t(e,i,o,c):setTimeout(function(){t(e,i,o,c)},4),n},n.config=function(e){return n(e)},requirejs._defined=i,(define=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),f(i,e)||f(o,e)||(o[e]=[e,t,n])}).amd={jQuery:!0}}(),define("almond",function(){}),
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
root=this,factory=function(){var e,t,n=Function.call.bind(Function.apply),r=Function.call.bind(Function.call),a=Array.isArray,i=Object.keys,o=function(e){try{return e(),!1}catch(e){return!0}},s=function(e){try{return e()}catch(e){return!1}},c=(e=o,function(){return!n(e,this,arguments)}),u=!!Object.defineProperty&&!o(function(){return Object.defineProperty({},"x",{get:function(){}})}),l="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),f=Function.call.bind(Array.prototype.reduce),d=Function.call.bind(Array.prototype.filter),h=Function.call.bind(Array.prototype.some),y=function(e,t,n,r){!r&&t in e||(u?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},m=function(e,t,n){p(i(t),function(r){var a=t[r];y(e,r,a,!!n)})},g=Function.call.bind(Object.prototype.toString),v="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===g(e)}:function(e){return"function"==typeof e},b=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},w=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},T=function(e,t,n){if(u){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},S=function(e,t,n){u?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},x=function(e,t){t&&v(t.toString)&&y(e,"toString",t.toString.bind(t),!0)},k=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return void 0!==t&&i(t).forEach(function(e){S(r,e,t[e])}),r},O=function(e,t){return!!Object.setPrototypeOf&&s(function(){var n=function t(n){var r=new e(n);return Object.setPrototypeOf(r,t.prototype),r};return Object.setPrototypeOf(n,e),n.prototype=k(e.prototype,{constructor:{value:n}}),t(n)})},j=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),A=j.isFinite,C=Function.call.bind(String.prototype.indexOf),E=Function.apply.bind(Array.prototype.indexOf),_=Function.call.bind(Array.prototype.concat),N=Function.call.bind(String.prototype.slice),P=Function.call.bind(Array.prototype.push),I=Function.apply.bind(Array.prototype.push),M=Function.call.bind(Array.prototype.shift),D=Math.max,R=Math.min,L=Math.floor,F=Math.abs,q=Math.exp,V=Math.log,H=Math.sqrt,z=Function.call.bind(Object.prototype.hasOwnProperty),W=function(){},$=j.Map,B=$&&$.prototype.delete,U=$&&$.prototype.get,G=$&&$.prototype.has,X=$&&$.prototype.set,J=j.Symbol||{},Y=J.species||"@@species",K=Number.isNaN||function(e){return e!=e},Z=Number.isFinite||function(e){return"number"==typeof e&&A(e)},Q=v(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:K(t)?t:t<0?-1:1},ee=function(e){var t=Number(e);return t<-1||K(t)?NaN:0===t||t===1/0?t:-1===t?-1/0:1+t-1==0?t:t*(V(1+t)/(1+t-1))},te=function(e){return"[object Arguments]"===g(e)},ne=te(arguments)?te:function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==g(e)&&"[object Function]"===g(e.callee)},re=function(e){return null===e||"function"!=typeof e&&"object"!==(void 0===e?"undefined":_typeof(e))},ae=function(e){return"[object String]"===g(e)},ie=function(e){return"[object RegExp]"===g(e)},oe=function(e){return"function"==typeof j.Symbol&&"symbol"===(void 0===e?"undefined":_typeof(e))},se=function(e,t,n){var r=e[t];y(e,t,n,!0),x(e[t],r)},ce="function"==typeof J&&"function"==typeof J.for&&oe(J()),ue=oe(J.iterator)?J.iterator:"_es6-shim iterator_";j.Set&&"function"==typeof(new j.Set)["@@iterator"]&&(ue="@@iterator"),j.Reflect||y(j,"Reflect",{},!0);var le,pe=j.Reflect,fe=String,de="undefined"!=typeof document&&document?document.all:null,he=null==de?function(e){return null==e}:function(e){return null==e&&e!==de},ye={Call:function(e,t){var r=arguments.length>2?arguments[2]:[];if(!ye.IsCallable(e))throw new TypeError(e+" is not a function");return n(e,t,r)},RequireObjectCoercible:function(e,t){if(he(e))throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return null!=e&&!0!==e&&!1!==e&&("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))||e===de)},ToObject:function(e,t){return Object(ye.RequireObjectCoercible(e,t))},IsCallable:v,IsConstructor:function(e){return ye.IsCallable(e)},ToInt32:function(e){return ye.ToNumber(e)>>0},ToUint32:function(e){return ye.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===g(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=ye.ToNumber(e);return K(t)?0:0!==t&&Z(t)?(t>0?1:-1)*L(F(t)):t},ToLength:function(e){var t=ye.ToInteger(e);return t<=0?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0!==e||1/e==1/t:K(e)&&K(t)},SameValueZero:function(e,t){return e===t||K(e)&&K(t)},IsIterable:function(e){return ye.TypeIsObject(e)&&(void 0!==e[ue]||ne(e))},GetIterator:function(e){if(ne(e))return new t(e,"value");var n=ye.GetMethod(e,ue);if(!ye.IsCallable(n))throw new TypeError("value is not an iterable");var r=ye.Call(n,e);if(!ye.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(e,t){var n=ye.ToObject(e)[t];if(!he(n)){if(!ye.IsCallable(n))throw new TypeError("Method not callable: "+t);return n}},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=ye.GetMethod(e,"return");if(void 0!==n){var r,a;try{r=ye.Call(n,e)}catch(e){a=e}if(!t){if(a)throw a;if(!ye.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ye.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=ye.IteratorNext(e);return!ye.IteratorComplete(t)&&t},Construct:function(e,t,n,r){var a=void 0===n?e:n;if(!r&&pe.construct)return pe.construct(e,t,a);var i=a.prototype;ye.TypeIsObject(i)||(i=Object.prototype);var o=k(i),s=ye.Call(e,o,t);return ye.TypeIsObject(s)?s:o},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!ye.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[Y];if(he(r))return t;if(!ye.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var a=ye.ToString(e),i="<"+t;""!==n&&(i+=" "+n+'="'+ye.ToString(r).replace(/"/g,"&quot;")+'"');return i+">"+a+"</"+t+">"},IsRegExp:function(e){if(!ye.TypeIsObject(e))return!1;var t=e[J.match];return void 0!==t?!!t:ie(e)},ToString:function(e){return fe(e)}};if(u&&ce){var me=function(e){if(oe(J[e]))return J[e];var t=J.for("Symbol."+e);return Object.defineProperty(J,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!oe(J.search)){var ge=me("search"),ve=String.prototype.search;y(RegExp.prototype,ge,function(e){return ye.Call(ve,e,[this])});se(String.prototype,"search",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,ge);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(ve,t,[ye.ToString(e)])})}if(!oe(J.replace)){var be=me("replace"),we=String.prototype.replace;y(RegExp.prototype,be,function(e,t){return ye.Call(we,e,[this,t])});se(String.prototype,"replace",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,be);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(we,n,[ye.ToString(e),t])})}if(!oe(J.split)){var Te=me("split"),Se=String.prototype.split;y(RegExp.prototype,Te,function(e,t){return ye.Call(Se,e,[this,t])});se(String.prototype,"split",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,Te);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(Se,n,[ye.ToString(e),t])})}var xe=oe(J.match),ke=xe&&((le={})[J.match]=function(){return 42},42!=="a".match(le));if(!xe||ke){var Oe=me("match"),je=String.prototype.match;y(RegExp.prototype,Oe,function(e){return ye.Call(je,e,[this])});se(String.prototype,"match",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,Oe);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(je,t,[ye.ToString(e)])})}}var Ae=function(e,t,n){x(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),u?p(Object.getOwnPropertyNames(e),function(r){r in W||n[r]||w(e,r,t)}):p(Object.keys(e),function(r){r in W||n[r]||(t[r]=e[r])}),t.prototype=e.prototype,T(e.prototype,"constructor",t)},Ce=function(){return this},Ee=function(e){u&&!z(e,Y)&&b(e,Y,Ce)},_e=function(e,t){var n=t||function(){return this};y(e,ue,n),!e[ue]&&oe(ue)&&(e[ue]=n)},Ne=function(e,t,n){if(function(e,t,n){u?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}(e,t,n),!ye.SameValue(e[t],n))throw new TypeError("property is nonconfigurable")},Pe=function(e,t,n,r){if(!ye.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var a=t.prototype;ye.TypeIsObject(a)||(a=n);var i=k(a);for(var o in r)if(z(r,o)){var s=r[o];y(i,o,s,!0)}return i};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Ie=String.fromCodePoint;se(String,"fromCodePoint",function(e){return ye.Call(Ie,this,arguments)})}var Me={fromCodePoint:function(e){for(var t,n=[],r=0,a=arguments.length;r<a;r++){if(t=Number(arguments[r]),!ye.SameValue(t,ye.ToInteger(t))||t<0||t>1114111)throw new RangeError("Invalid code point "+t);t<65536?P(n,String.fromCharCode(t)):(t-=65536,P(n,String.fromCharCode(55296+(t>>10))),P(n,String.fromCharCode(t%1024+56320)))}return n.join("")},raw:function(e){var t=ye.ToObject(e,"bad callSite"),n=ye.ToObject(t.raw,"bad raw value"),r=n.length,a=ye.ToLength(r);if(a<=0)return"";for(var i,o,s,c,u=[],l=0;l<a&&(i=ye.ToString(l),s=ye.ToString(n[i]),P(u,s),!(l+1>=a));)o=l+1<arguments.length?arguments[l+1]:"",c=ye.ToString(o),P(u,c),l+=1;return u.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&se(String,"raw",Me.raw),m(String,Me);var De={repeat:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e);if(n<0||n>=1/0)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function e(t,n){if(n<1)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r}(t,n)},startsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=ye.ToString(e);arguments.length>1&&(n=arguments[1]);var a=D(ye.ToInteger(n),0);return N(t,a,a+r.length)===r},endsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=ye.ToString(e),a=t.length;arguments.length>1&&(n=arguments[1]);var i=void 0===n?a:ye.ToInteger(n),o=R(D(i,0),a);return N(t,o-r.length,o)===r},includes:function(e){if(ye.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=ye.ToString(e);return arguments.length>1&&(t=arguments[1]),-1!==C(this,n,t)},codePointAt:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e),r=t.length;if(n>=0&&n<r){var a=t.charCodeAt(n);if(a<55296||a>56319||n+1===r)return a;var i=t.charCodeAt(n+1);return i<56320||i>57343?a:1024*(a-55296)+(i-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&se(String.prototype,"includes",De.includes),String.prototype.startsWith&&String.prototype.endsWith){var Re=o(function(){return"/a/".startsWith(/a/)}),Le=s(function(){return!1==="abc".startsWith("a",1/0)});Re&&Le||(se(String.prototype,"startsWith",De.startsWith),se(String.prototype,"endsWith",De.endsWith))}ce&&(s(function(){var e=/a/;return e[J.match]=!1,"/a/".startsWith(e)})||se(String.prototype,"startsWith",De.startsWith),s(function(){var e=/a/;return e[J.match]=!1,"/a/".endsWith(e)})||se(String.prototype,"endsWith",De.endsWith),s(function(){var e=/a/;return e[J.match]=!1,"/a/".includes(e)})||se(String.prototype,"includes",De.includes));m(String.prototype,De);var Fe=["\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join(""),qe=new RegExp("(^["+Fe+"]+)|(["+Fe+"]+$)","g"),Ve=function(){return ye.ToString(ye.RequireObjectCoercible(this)).replace(qe,"")},He=["\x85","\u200b","\ufffe"].join(""),ze=new RegExp("["+He+"]","g"),We=/^[-+]0x[0-9a-f]+$/i,$e=He.trim().length!==He.length;y(String.prototype,"trim",Ve,$e);var Be=function(e){return{value:e,done:0===arguments.length}},Ue=function(e){ye.RequireObjectCoercible(e),this._s=ye.ToString(e),this._i=0};Ue.prototype.next=function(){var e=this._s,t=this._i;if(void 0===e||t>=e.length)return this._s=void 0,Be();var n,r,a=e.charCodeAt(t);return r=a<55296||a>56319||t+1===e.length?1:(n=e.charCodeAt(t+1))<56320||n>57343?1:2,this._i=t+r,Be(e.substr(t,r))},_e(Ue.prototype),_e(String.prototype,function(){return new Ue(this)});var Ge={from:function(e){var t,n,a,i,o,s,c=this;if(arguments.length>1&&(t=arguments[1]),void 0===t)n=!1;else{if(!ye.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2]),n=!0}if(void 0!==(ne(e)||ye.GetMethod(e,ue))){o=ye.IsConstructor(c)?Object(new c):[];var u,l,p=ye.GetIterator(e);for(s=0;!1!==(u=ye.IteratorStep(p));){l=u.value;try{n&&(l=void 0===a?t(l,s):r(t,a,l,s)),o[s]=l}catch(e){throw ye.IteratorClose(p,!0),e}s+=1}i=s}else{var f,d=ye.ToObject(e);for(i=ye.ToLength(d.length),o=ye.IsConstructor(c)?Object(new c(i)):new Array(i),s=0;s<i;++s)f=d[s],n&&(f=void 0===a?t(f,s):r(t,a,f,s)),Ne(o,s,f)}return o.length=i,o},of:function(){for(var e=arguments.length,t=this,n=a(t)||!ye.IsCallable(t)?new Array(e):ye.Construct(t,[e]),r=0;r<e;++r)Ne(n,r,arguments[r]);return n.length=e,n}};m(Array,Ge),Ee(Array),m((t=function(e,t){this.i=0,this.array=e,this.kind=t}).prototype,{next:function(){var e=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var r=ye.ToLength(n.length);e<r;e++){var a,i=this.kind;return"key"===i?a=e:"value"===i?a=n[e]:"entry"===i&&(a=[e,n[e]]),this.i=e+1,Be(a)}return this.array=void 0,Be()}}),_e(t.prototype),Array.of===Ge.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}()||se(Array,"of",Ge.of);var Xe={copyWithin:function(e,t){var n,r=ye.ToObject(this),a=ye.ToLength(r.length),i=ye.ToInteger(e),o=ye.ToInteger(t),s=i<0?D(a+i,0):R(i,a),c=o<0?D(a+o,0):R(o,a);arguments.length>2&&(n=arguments[2]);var u=void 0===n?a:ye.ToInteger(n),l=u<0?D(a+u,0):R(u,a),p=R(l-c,a-s),f=1;for(c<s&&s<c+p&&(f=-1,c+=p-1,s+=p-1);p>0;)c in r?r[s]=r[c]:delete r[s],c+=f,s+=f,p-=1;return r},fill:function(e){var t,n;arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]);var r=ye.ToObject(this),a=ye.ToLength(r.length);t=ye.ToInteger(void 0===t?0:t);for(var i=(n=ye.ToInteger(void 0===n?a:n))<0?a+n:n,o=t<0?D(a+t,0):R(t,a);o<a&&o<i;++o)r[o]=e;return r},find:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var a,i=arguments.length>1?arguments[1]:null,o=0;o<n;o++)if(a=t[o],i){if(r(e,i,a,o,t))return a}else if(e(a,o,t))return a},findIndex:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var a=arguments.length>1?arguments[1]:null,i=0;i<n;i++)if(a){if(r(e,a,t[i],i,t))return i}else if(e(t[i],i,t))return i;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!ye.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ye.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ue]&&(m(Array.prototype,{values:Array.prototype[ue]}),oe(J.unscopables)&&(Array.prototype[J.unscopables].values=!0)),l&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Je=Array.prototype.values;se(Array.prototype,"values",function(){return ye.Call(Je,this,arguments)}),y(Array.prototype,ue,Array.prototype.values,!0)}m(Array.prototype,Xe),1/[!0].indexOf(!0,-0)<0&&y(Array.prototype,"indexOf",function(e){var t=E(this,arguments);return 0===t&&1/t<0?0:t},!0),_e(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&_e(Object.getPrototypeOf([].values()));var Ye,Ke=s(function(){return 0===Array.from({length:-1}).length}),Ze=1===(Ye=Array.from([0].entries())).length&&a(Ye[0])&&0===Ye[0][0]&&0===Ye[0][1];if(Ke&&Ze||se(Array,"from",Ge.from),!s(function(){return Array.from([0],void 0)})){var Qe=Array.from;se(Array,"from",function(e){return arguments.length>1&&void 0!==arguments[1]?ye.Call(Qe,this,arguments):r(Qe,this,e)})}var et=-(Math.pow(2,32)-1),tt=function(e,t){var n={length:et};return n[t?(n.length>>>0)-1:0]=!0,s(function(){return r(e,n,function(){throw new RangeError("should not reach here")},[]),!0})};if(!tt(Array.prototype.forEach)){var nt=Array.prototype.forEach;se(Array.prototype,"forEach",function(e){return ye.Call(nt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.map)){var rt=Array.prototype.map;se(Array.prototype,"map",function(e){return ye.Call(rt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.filter)){var at=Array.prototype.filter;se(Array.prototype,"filter",function(e){return ye.Call(at,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.some)){var it=Array.prototype.some;se(Array.prototype,"some",function(e){return ye.Call(it,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.every)){var ot=Array.prototype.every;se(Array.prototype,"every",function(e){return ye.Call(ot,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduce)){var st=Array.prototype.reduce;se(Array.prototype,"reduce",function(e){return ye.Call(st,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduceRight,!0)){var ct=Array.prototype.reduceRight;se(Array.prototype,"reduceRight",function(e){return ye.Call(ct,this.length>=0?this:[],arguments)})}var ut=8!==Number("0o10"),lt=2!==Number("0b10"),pt=h(He,function(e){return 0===Number(e+0+e)});if(ut||lt||pt){var ft=Number,dt=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,yt=dt.test.bind(dt),mt=ht.test.bind(ht),gt=ze.test.bind(ze),vt=We.test.bind(We),bt=function(){var e=function(t){var n;"string"==typeof(n=arguments.length>0?re(t)?t:function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),re(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),re(t)))return t;throw new TypeError("No default value")}(t):0)&&(n=ye.Call(Ve,n),yt(n)?n=parseInt(N(n,2),2):mt(n)?n=parseInt(N(n,2),8):(gt(n)||vt(n))&&(n=NaN));var r=this,a=s(function(){return ft.prototype.valueOf.call(r),!0});return r instanceof e&&!a?new ft(n):ft(n)};return e}();Ae(ft,bt,{}),m(bt,{NaN:ft.NaN,MAX_VALUE:ft.MAX_VALUE,MIN_VALUE:ft.MIN_VALUE,NEGATIVE_INFINITY:ft.NEGATIVE_INFINITY,POSITIVE_INFINITY:ft.POSITIVE_INFINITY}),Number=bt,T(j,"Number",bt)}var wt=Math.pow(2,53)-1;m(Number,{MAX_SAFE_INTEGER:wt,MIN_SAFE_INTEGER:-wt,EPSILON:2.220446049250313e-16,parseInt:j.parseInt,parseFloat:j.parseFloat,isFinite:Z,isInteger:function(e){return Z(e)&&ye.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&F(e)<=Number.MAX_SAFE_INTEGER},isNaN:K}),y(Number,"parseInt",j.parseInt,Number.parseInt!==j.parseInt),1===[,1].find(function(){return!0})&&se(Array.prototype,"find",Xe.find),0!==[,1].findIndex(function(){return!0})&&se(Array.prototype,"findIndex",Xe.findIndex);var Tt,St,xt,kt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),Ot=function(e,t){u&&kt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},jt=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(n<0?0:n),a=e;a<t;++a)r[a-e]=arguments[a];return r},At=function(e){return function(t,n){return t[n]=e[n],t}},Ct=function(e,t){var n,r=i(Object(t));return ye.IsCallable(Object.getOwnPropertySymbols)&&(n=d(Object.getOwnPropertySymbols(Object(t)),kt(t))),f(_(r,n||[]),At(t),e)},Et={assign:function(e,t){var n=ye.ToObject(e,"Cannot convert undefined or null to object");return f(ye.Call(jt,1,arguments),Ct,n)},is:function(e,t){return ye.SameValue(e,t)}};if(Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}()&&se(Object,"assign",Et.assign),m(Object,Et),u){var _t={setPrototypeOf:function(e,t){var n,a=function(e,t){return function(e,t){if(!ye.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!ye.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)}(e,t),r(n,e,t),e};try{n=e.getOwnPropertyDescriptor(e.prototype,"__proto__").set,r(n,{},null)}catch(t){if(e.prototype!=={}.__proto__)return;n=function(e){this.__proto__=e},a.polyfill=a(a({},null),e.prototype)instanceof e}return a}(Object)};m(Object,_t)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(Tt=Object.create(null),St=Object.getPrototypeOf,xt=Object.setPrototypeOf,Object.getPrototypeOf=function(e){var t=St(e);return t===Tt?null:t},Object.setPrototypeOf=function(e,t){return xt(e,null===t?Tt:t)},Object.setPrototypeOf.polyfill=!1),!!o(function(){return Object.keys("foo")})){var Nt=Object.keys;se(Object,"keys",function(e){return Nt(ye.ToObject(e))}),i=Object.keys}if(o(function(){return Object.keys(/a/g)})){var Pt=Object.keys;se(Object,"keys",function(e){if(ie(e)){var t=[];for(var n in e)z(e,n)&&P(t,n);return t}return Pt(e)}),i=Object.keys}if(Object.getOwnPropertyNames&&!!o(function(){return Object.getOwnPropertyNames("foo")})){var It="object"===("undefined"==typeof window?"undefined":_typeof(window))?Object.getOwnPropertyNames(window):[],Mt=Object.getOwnPropertyNames;se(Object,"getOwnPropertyNames",function(e){var t=ye.ToObject(e);if("[object Window]"===g(t))try{return Mt(t)}catch(e){return _([],It)}return Mt(t)})}if(Object.getOwnPropertyDescriptor&&!!o(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Dt=Object.getOwnPropertyDescriptor;se(Object,"getOwnPropertyDescriptor",function(e,t){return Dt(ye.ToObject(e),t)})}if(Object.seal&&!!o(function(){return Object.seal("foo")})){var Rt=Object.seal;se(Object,"seal",function(e){return ye.TypeIsObject(e)?Rt(e):e})}if(Object.isSealed&&!!o(function(){return Object.isSealed("foo")})){var Lt=Object.isSealed;se(Object,"isSealed",function(e){return!ye.TypeIsObject(e)||Lt(e)})}if(Object.freeze&&!!o(function(){return Object.freeze("foo")})){var Ft=Object.freeze;se(Object,"freeze",function(e){return ye.TypeIsObject(e)?Ft(e):e})}if(Object.isFrozen&&!!o(function(){return Object.isFrozen("foo")})){var qt=Object.isFrozen;se(Object,"isFrozen",function(e){return!ye.TypeIsObject(e)||qt(e)})}if(Object.preventExtensions&&!!o(function(){return Object.preventExtensions("foo")})){var Vt=Object.preventExtensions;se(Object,"preventExtensions",function(e){return ye.TypeIsObject(e)?Vt(e):e})}if(Object.isExtensible&&!!o(function(){return Object.isExtensible("foo")})){var Ht=Object.isExtensible;se(Object,"isExtensible",function(e){return!!ye.TypeIsObject(e)&&Ht(e)})}if(Object.getPrototypeOf&&!!o(function(){return Object.getPrototypeOf("foo")})){var zt=Object.getPrototypeOf;se(Object,"getPrototypeOf",function(e){return zt(ye.ToObject(e))})}var Wt,$t=u&&((Wt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ye.IsCallable(Wt.get));if(u&&!$t){b(RegExp.prototype,"flags",function(){if(!ye.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e})}var Bt,Ut=u&&s(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Gt=ce&&u&&((Bt=/./)[J.match]=!1,RegExp(Bt)===Bt),Xt=s(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),Jt=Xt&&s(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Xt||!Jt){var Yt=RegExp.prototype.toString;y(RegExp.prototype,"toString",function(){var e=ye.RequireObjectCoercible(this);return ie(e)?r(Yt,e):"/"+fe(e.source)+"/"+fe(e.flags)},!0),x(RegExp.prototype.toString,Yt)}if(u&&(!Ut||Gt)){var Kt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Zt=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Qt=ye.IsCallable(Zt.get)?Zt.get:function(){return this.source},en=RegExp,tn=function e(t,n){var r=ye.IsRegExp(t);return this instanceof e||!r||void 0!==n||t.constructor!==e?ie(t)?new e(ye.Call(Qt,t),void 0===n?ye.Call(Kt,t):n):(r&&(t.source,void 0===n&&t.flags),new en(t,n)):t};Ae(en,tn,{$input:!0}),RegExp=tn,T(j,"RegExp",tn)}if(u){var nn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(i(nn),function(e){e in RegExp&&!(nn[e]in RegExp)&&b(RegExp,nn[e],function(){return RegExp[e]})})}Ee(RegExp);var rn=1/Number.EPSILON,an=Math.pow(2,-23),on=Math.pow(2,127)*(2-an),sn=Math.pow(2,-126),cn=Math.E,un=Math.LOG2E,ln=Math.LOG10E,pn=Number.prototype.clz;delete Number.prototype.clz;var fn={acosh:function(e){var t=Number(e);if(K(t)||e<1)return NaN;if(1===t)return 0;if(t===1/0)return t;var n=1/(t*t);if(t<2)return ee(t-1+H(1-n)*t);var r=t/2;return ee(r+H(1-n)*r-1)+1/un},asinh:function(e){var t=Number(e);if(0===t||!A(t))return t;var n=F(t),r=n*n,a=Q(t);return n<1?a*ee(n+r/(H(r+1)+1)):a*(ee(n/2+H(1+1/r)*n/2-1)+1/un)},atanh:function(e){var t=Number(e);if(0===t)return t;if(-1===t)return-1/0;if(1===t)return 1/0;if(K(t)||t<-1||t>1)return NaN;var n=F(t);return Q(t)*ee(2*n/(1-n))/2},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=t<0;return r&&(t=-t),n=t===1/0?1/0:(t/((n=q(V(t)/3))*n)+2*n)/3,r?-n:n},clz32:function(e){var t=Number(e),n=ye.ToUint32(t);return 0===n?32:pn?ye.Call(pn,n):31-L(V(n+.5)*un)},cosh:function(e){var t=Number(e);if(0===t)return 1;if(K(t))return NaN;if(!A(t))return 1/0;var n=q(F(t)-1);return(n+1/(n*cn*cn))*(cn/2)},expm1:function(e){var t=Number(e);if(t===-1/0)return-1;if(!A(t)||0===t)return t;if(F(t)>.5)return q(t)-1;for(var n=t,r=0,a=1;r+n!==r;)r+=n,n*=t/(a+=1);return r},hypot:function(e,t){for(var n=0,r=0,a=0;a<arguments.length;++a){var i=F(Number(arguments[a]));r<i?(n*=r/i*(r/i),n+=1,r=i):n+=i>0?i/r*(i/r):i}return r===1/0?1/0:r*H(n)},log2:function(e){return V(e)*un},log10:function(e){return V(e)*ln},log1p:ee,sign:Q,sinh:function(e){var t=Number(e);if(!A(t)||0===t)return t;var n=F(t);if(n<1){var r=Math.expm1(n);return Q(t)*r*(1+1/(r+1))/2}var a=q(n-1);return Q(t)*(a-1/(a*cn*cn))*(cn/2)},tanh:function(e){var t=Number(e);return K(t)||0===t?t:t>=20?1:t<=-20?-1:(Math.expm1(t)-Math.expm1(-t))/(q(t)+q(-t))},trunc:function(e){var t=Number(e);return t<0?-L(-t):L(t)},imul:function(e,t){var n=ye.ToUint32(e),r=ye.ToUint32(t),a=65535&n,i=65535&r;return a*i+((n>>>16&65535)*i+a*(r>>>16&65535)<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-1/0||K(t))return t;var n=Q(t),r=F(t);if(r<sn)return n*(r/sn/an+rn-rn)*sn*an;var a=(1+an/Number.EPSILON)*r,i=a-(a-r);return i>on||K(i)?n*(1/0):n*i}},dn=function(e,t,n){return F(1-e/t)/Number.EPSILON<(n||8)};m(Math,fn),y(Math,"sinh",fn.sinh,Math.sinh(710)===1/0),y(Math,"cosh",fn.cosh,Math.cosh(710)===1/0),y(Math,"log1p",fn.log1p,-1e-17!==Math.log1p(-1e-17)),y(Math,"asinh",fn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),y(Math,"asinh",fn.asinh,Math.asinh(1e300)===1/0),y(Math,"atanh",fn.atanh,0===Math.atanh(1e-300)),y(Math,"tanh",fn.tanh,-2e-17!==Math.tanh(-2e-17)),y(Math,"acosh",fn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),y(Math,"acosh",fn.acosh,!dn(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),y(Math,"cbrt",fn.cbrt,!dn(Math.cbrt(1e-300),1e-100)),y(Math,"sinh",fn.sinh,-2e-17!==Math.sinh(-2e-17));var hn=Math.expm1(10);y(Math,"expm1",fn.expm1,hn>22025.465794806718||hn<22025.465794806718);var yn=Math.round,mn=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),gn=[rn+1,2*rn-1].every(function(e){return Math.round(e)===e});y(Math,"round",function(e){var t=L(e);return e-t<.5?t:-1===t?-0:t+1},!mn||!gn),x(Math.round,yn);var vn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=fn.imul,x(Math.imul,vn)),2!==Math.imul.length&&se(Math,"imul",function(e,t){return ye.Call(vn,Math,arguments)});var bn,wn,Tn=function(){var e=j.setTimeout;if("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))){ye.IsPromise=function(e){return!!ye.TypeIsObject(e)&&void 0!==e._promise};var t,n=function(e){if(!ye.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this;if(t.resolve=void 0,t.reject=void 0,t.promise=new e(function(e,n){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=n}),!ye.IsCallable(t.resolve)||!ye.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ye.IsCallable(window.postMessage)&&(t=function(){var e=[];return window.addEventListener("message",function(t){if(t.source===window&&"zero-timeout-message"===t.data){if(t.stopPropagation(),0===e.length)return;M(e)()}},!0),function(t){P(e,t),window.postMessage("zero-timeout-message","*")}});var a,i,o,s,c,u=ye.IsCallable(j.setImmediate)?j.setImmediate:"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick?process.nextTick:(a=j.Promise,(i=a&&a.resolve&&a.resolve())&&function(e){return i.then(e)}||(ye.IsCallable(t)?t():function(t){e(t,0)})),l=function(e){return e},p=function(e){throw e},f={},d=function(e,t,n){u(function(){h(e,t,n)})},h=function(e,t,n){var r,a;if(t===f)return e(n);try{r=e(n),a=t.resolve}catch(e){r=e,a=t.reject}a(r)},y=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var a=1,i=0;a<r;a++,i+=3)d(n[i+0],n[i+2],t),e[i+0]=void 0,e[i+1]=void 0,e[i+2]=void 0;n.result=t,n.state=1,n.reactionLength=0},g=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var a=1,i=0;a<r;a++,i+=3)d(n[i+1],n[i+2],t),e[i+0]=void 0,e[i+1]=void 0,e[i+2]=void 0;n.result=t,n.state=2,n.reactionLength=0},v=function(e){var t=!1;return{resolve:function(n){var r;if(!t){if(t=!0,n===e)return g(e,new TypeError("Self resolution"));if(!ye.TypeIsObject(n))return y(e,n);try{r=n.then}catch(t){return g(e,t)}if(!ye.IsCallable(r))return y(e,n);u(function(){w(e,n,r)})}},reject:function(n){if(!t)return t=!0,g(e,n)}}},b=function(e,t,n,a){e===s?r(e,t,n,a,f):r(e,t,n,a)},w=function(e,t,n){var r=v(e),a=r.resolve,i=r.reject;try{b(n,t,a,i)}catch(e){i(e)}},T=c=function(e){if(!(this instanceof c))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ye.IsCallable(e))throw new TypeError("not a valid resolver");var t=Pe(this,c,o,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=v(t),r=n.reject;try{e(n.resolve,r)}catch(e){r(e)}return t};o=T.prototype;var S=function(e,t,n,r){var a=!1;return function(i){a||(a=!0,t[e]=i,0==--r.count&&(0,n.resolve)(t))}};return m(T,{all:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,a,i=new n(t);try{return function(e,t,n){for(var r,a,i=e.iterator,o=[],s={count:1},c=0;;){try{if(!1===(r=ye.IteratorStep(i))){e.done=!0;break}a=r.value}catch(t){throw e.done=!0,t}o[c]=void 0;var u=t.resolve(a),l=S(c,o,n,s);s.count+=1,b(u.then,u,l,n.reject),c+=1}0==--s.count&&(0,n.resolve)(o);return n.promise}(a={iterator:r=ye.GetIterator(e),done:!1},t,i)}catch(e){var o=e;if(a&&!a.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,i.reject)(o),i.promise}},race:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,a,i=new n(t);try{return function(e,t,n){for(var r,a,i,o=e.iterator;;){try{if(!1===(r=ye.IteratorStep(o))){e.done=!0;break}a=r.value}catch(t){throw e.done=!0,t}i=t.resolve(a),b(i.then,i,n.resolve,n.reject)}return n.promise}(a={iterator:r=ye.GetIterator(e),done:!1},t,i)}catch(e){var o=e;if(a&&!a.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,i.reject)(o),i.promise}},reject:function(e){if(!ye.TypeIsObject(this))throw new TypeError("Bad promise constructor");var t=new n(this);return(0,t.reject)(e),t.promise},resolve:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(ye.IsPromise(e)&&e.constructor===t)return e;var r=new n(t);return(0,r.resolve)(e),r.promise}}),m(o,{catch:function(e){return this.then(null,e)},then:function(e,t){if(!ye.IsPromise(this))throw new TypeError("not a promise");var r,a=ye.SpeciesConstructor(this,T);r=arguments.length>2&&arguments[2]===f&&a===T?f:new n(a);var i,o=ye.IsCallable(e)?e:l,s=ye.IsCallable(t)?t:p,c=this._promise;if(0===c.state){if(0===c.reactionLength)c.fulfillReactionHandler0=o,c.rejectReactionHandler0=s,c.reactionCapability0=r;else{var u=3*(c.reactionLength-1);c[u+0]=o,c[u+1]=s,c[u+2]=r}c.reactionLength+=1}else if(1===c.state)i=c.result,d(o,r,i);else{if(2!==c.state)throw new TypeError("unexpected Promise state");i=c.result,d(s,r,i)}return r.promise}}),f=new n(T),s=o.then,T}}();if(j.Promise&&(delete j.Promise.accept,delete j.Promise.defer,delete j.Promise.prototype.chain),"function"==typeof Tn){m(j,{Promise:Tn});var Sn=O(j.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),xn=!o(function(){return j.Promise.reject(42).then(null,5).then(null,W)}),kn=o(function(){return j.Promise.call(3,W)}),On=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,W).then(null,W)}catch(e){return!0}return t===n}(j.Promise),jn=u&&(bn=0,wn=Object.defineProperty({},"then",{get:function(){bn+=1}}),Promise.resolve(wn),1===bn),An=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};An.prototype=Promise.prototype,An.all=Promise.all;var Cn=s(function(){return!!An.all([1,2])});if(Sn&&xn&&kn&&!On&&jn&&!Cn||(Promise=Tn,se(j,"Promise",Tn)),1!==Promise.all.length){var En=Promise.all;se(Promise,"all",function(e){return ye.Call(En,this,arguments)})}if(1!==Promise.race.length){var _n=Promise.race;se(Promise,"race",function(e){return ye.Call(_n,this,arguments)})}if(1!==Promise.resolve.length){var Nn=Promise.resolve;se(Promise,"resolve",function(e){return ye.Call(Nn,this,arguments)})}if(1!==Promise.reject.length){var Pn=Promise.reject;se(Promise,"reject",function(e){return ye.Call(Pn,this,arguments)})}Ot(Promise,"all"),Ot(Promise,"race"),Ot(Promise,"resolve"),Ot(Promise,"reject"),Ee(Promise)}var In,Mn,Dn=function(e){var t=i(f(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Rn=Dn(["z","a","bb"]),Ln=Dn(["z",1,"a","3",2]);if(u){var Fn=function(e,t){return t||Rn?he(e)?"^"+ye.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Ln?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},qn=function(){return Object.create?Object.create(null):{}},Vn=function(e,t,n){if(a(n)||ae(n))p(n,function(e){if(!ye.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(n instanceof e)r(e.prototype.forEach,n,function(e,n){t.set(n,e)});else{var i,o;if(!he(n)){if(o=t.set,!ye.IsCallable(o))throw new TypeError("bad map");i=ye.GetIterator(n)}if(void 0!==i)for(;;){var s=ye.IteratorStep(i);if(!1===s)break;var c=s.value;try{if(!ye.TypeIsObject(c))throw new TypeError("Iterator value "+c+" is not an entry object");r(o,t,c[0],c[1])}catch(e){throw ye.IteratorClose(i,!0),e}}}},Hn=function(e,t,n){if(a(n)||ae(n))p(n,function(e){t.add(e)});else if(n instanceof e)r(e.prototype.forEach,n,function(e){t.add(e)});else{var i,o;if(!he(n)){if(o=t.add,!ye.IsCallable(o))throw new TypeError("bad set");i=ye.GetIterator(n)}if(void 0!==i)for(;;){var s=ye.IteratorStep(i);if(!1===s)break;var c=s.value;try{r(o,t,c)}catch(e){throw ye.IteratorClose(i,!0),e}}}},zn={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var n,a=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return!!e._es6map}(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},i=function(e,t){a(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};_e(i.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var e,t=this.i,n=this.kind,r=this.head;if(void 0===this.i)return Be();for(;t.isRemoved()&&t!==r;)t=t.prev;for(;t.next!==r;)if(!(t=t.next).isRemoved())return e="key"===n?t.key:"value"===n?t.value:[t.key,t.value],this.i=t,Be(e);return this.i=void 0,Be()}});var o=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var r=Pe(this,e,n,{_es6map:!0,_head:null,_map:$?new $:null,_size:0,_storage:qn()}),a=new t(null,null);return a.next=a.prev=a,r._head=a,arguments.length>0&&Vn(e,r,arguments[0]),r};return b(n=o.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),m(n,{get:function(e){var t;a(this,"get");var n=Fn(e,!0);if(null!==n)return(t=this._storage[n])?t.value:void 0;if(this._map)return(t=U.call(this._map,e))?t.value:void 0;for(var r=this._head,i=r;(i=i.next)!==r;)if(ye.SameValueZero(i.key,e))return i.value},has:function(e){a(this,"has");var t=Fn(e,!0);if(null!==t)return void 0!==this._storage[t];if(this._map)return G.call(this._map,e);for(var n=this._head,r=n;(r=r.next)!==n;)if(ye.SameValueZero(r.key,e))return!0;return!1},set:function(e,n){a(this,"set");var r,i=this._head,o=i,s=Fn(e,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new t(e,n),o=i.prev}else this._map&&(G.call(this._map,e)?U.call(this._map,e).value=n:(r=new t(e,n),X.call(this._map,e,r),o=i.prev));for(;(o=o.next)!==i;)if(ye.SameValueZero(o.key,e))return o.value=n,this;return r=r||new t(e,n),ye.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(t){a(this,"delete");var n=this._head,r=n,i=Fn(t,!0);if(null!==i){if(void 0===this._storage[i])return!1;r=this._storage[i].prev,delete this._storage[i]}else if(this._map){if(!G.call(this._map,t))return!1;r=U.call(this._map,t).prev,B.call(this._map,t)}for(;(r=r.next)!==n;)if(ye.SameValueZero(r.key,t))return r.key=e,r.value=e,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){a(this,"clear"),this._map=$?new $:null,this._size=0,this._storage=qn();for(var t=this._head,n=t,r=n.next;(n=r)!==t;)n.key=e,n.value=e,r=n.next,n.next=n.prev=t;t.next=t.prev=t},keys:function(){return a(this,"keys"),new i(this,"key")},values:function(){return a(this,"values"),new i(this,"value")},entries:function(){return a(this,"entries"),new i(this,"key+value")},forEach:function(e){a(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,n=this.entries(),i=n.next();!i.done;i=n.next())t?r(e,t,i.value[1],i.value[0],this):e(i.value[1],i.value[0],this)}}),_e(n,n.entries),o}(),Set:function(){var e,t=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return e._es6set&&void 0!==e._storage}(e))throw new TypeError("Set.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},n=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=Pe(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:qn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Hn(t,n,arguments[0]),n};e=n.prototype;var a=function(e){if(!e["[[SetData]]"]){var t=new zn.Map;e["[[SetData]]"]=t,p(i(e._storage),function(e){var n=function(e){var t=e;if("^null"===t)return null;if("^undefined"!==t){var n=t.charAt(0);return"$"===n?N(t,1):"n"===n?+N(t,1):"b"===n?"btrue"===t:+t}}(e);t.set(n,n)}),e["[[SetData]]"]=t}e._storage=null};b(n.prototype,"size",function(){return t(this,"size"),this._storage?i(this._storage).length:(a(this),this["[[SetData]]"].size)}),m(n.prototype,{has:function(e){var n;return t(this,"has"),this._storage&&null!==(n=Fn(e))?!!this._storage[n]:(a(this),this["[[SetData]]"].has(e))},add:function(e){var n;return t(this,"add"),this._storage&&null!==(n=Fn(e))?(this._storage[n]=!0,this):(a(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){var n;if(t(this,"delete"),this._storage&&null!==(n=Fn(e))){var r=z(this._storage,n);return delete this._storage[n]&&r}return a(this),this["[[SetData]]"].delete(e)},clear:function(){t(this,"clear"),this._storage&&(this._storage=qn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return t(this,"values"),a(this),new o(this["[[SetData]]"].values())},entries:function(){return t(this,"entries"),a(this),new o(this["[[SetData]]"].entries())},forEach:function(e){t(this,"forEach");var n=arguments.length>1?arguments[1]:null,i=this;a(i),this["[[SetData]]"].forEach(function(t,a){n?r(e,n,a,a,i):e(a,a,i)})}}),y(n.prototype,"keys",n.prototype.values,!0),_e(n.prototype,n.prototype.values);var o=function(e){this.it=e};return o.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},_e(o.prototype),n}()};if(j.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(j.Set=zn.Set),j.Map||j.Set){s(function(){return 2===new Map([[1,2]]).get(1)})||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new $;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,j.Map.prototype),t},j.Map.prototype=k($.prototype),y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,$));var Wn=new Map,$n=((Mn=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,Mn),Mn.get(0)===Mn&&Mn.get(-0)===Mn&&Mn.has(0)&&Mn.has(-0)),Bn=Wn.set(1,2)===Wn;$n&&Bn||se(Map.prototype,"set",function(e,t){return r(X,this,0===e?0:e,t),this}),$n||(m(Map.prototype,{get:function(e){return r(U,this,0===e?0:e)},has:function(e){return r(G,this,0===e?0:e)}},!0),x(Map.prototype.get,U),x(Map.prototype.has,G));var Un=new Set,Gn=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((In=Un).delete(0),In.add(-0),!In.has(0)),Xn=Un.add(1)===Un;if(!Gn||!Xn){var Jn=Set.prototype.add;Set.prototype.add=function(e){return r(Jn,this,0===e?0:e),this},x(Set.prototype.add,Jn)}if(!Gn){var Yn=Set.prototype.has;Set.prototype.has=function(e){return r(Yn,this,0===e?0:e)},x(Set.prototype.has,Yn);var Kn=Set.prototype.delete;Set.prototype.delete=function(e){return r(Kn,this,0===e?0:e)},x(Set.prototype.delete,Kn)}var Zn=O(j.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),Qn=Object.setPrototypeOf&&!Zn,er=function(){try{return!(j.Map()instanceof j.Map)}catch(e){return e instanceof TypeError}}();0===j.Map.length&&!Qn&&er||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new $;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Map.prototype=$.prototype,y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,$));var tr=O(j.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),nr=Object.setPrototypeOf&&!tr,rr=function(){try{return!(j.Set()instanceof j.Set)}catch(e){return e instanceof TypeError}}();if(0!==j.Set.length||nr||!rr){var ar=j.Set;j.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new ar;return arguments.length>0&&Hn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Set.prototype=ar.prototype,y(j.Set.prototype,"constructor",j.Set,!0),x(j.Set,ar)}var ir=new j.Map,or=!s(function(){return ir.keys().next().done});if(("function"!=typeof j.Map.prototype.clear||0!==(new j.Set).size||0!==ir.size||"function"!=typeof j.Map.prototype.keys||"function"!=typeof j.Set.prototype.keys||"function"!=typeof j.Map.prototype.forEach||"function"!=typeof j.Set.prototype.forEach||c(j.Map)||c(j.Set)||"function"!=typeof ir.keys().next||or||!Zn)&&m(j,{Map:zn.Map,Set:zn.Set},!0),j.Set.prototype.keys!==j.Set.prototype.values&&y(j.Set.prototype,"keys",j.Set.prototype.values,!0),_e(Object.getPrototypeOf((new j.Map).keys())),_e(Object.getPrototypeOf((new j.Set).keys())),l&&"has"!==j.Set.prototype.has.name){var sr=j.Set.prototype.has;se(j.Set.prototype,"has",function(e){return r(sr,this,e)})}}m(j,zn),Ee(j.Map),Ee(j.Set)}var cr=function(e){if(!ye.TypeIsObject(e))throw new TypeError("target must be an object")},ur={apply:function(){return ye.Call(ye.Call,null,arguments)},construct:function(e,t){if(!ye.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:e;if(!ye.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return ye.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(cr(e),u){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return cr(e),t in e}};Object.getOwnPropertyNames&&Object.assign(ur,{ownKeys:function(e){cr(e);var t=Object.getOwnPropertyNames(e);return ye.IsCallable(Object.getOwnPropertySymbols)&&I(t,Object.getOwnPropertySymbols(e)),t}});var lr=function(e){return!o(e)};if(Object.preventExtensions&&Object.assign(ur,{isExtensible:function(e){return cr(e),Object.isExtensible(e)},preventExtensions:function(e){return cr(e),lr(function(){return Object.preventExtensions(e)})}}),u){var pr=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var a=Object.getPrototypeOf(e);if(null===a)return;return pr(a,t,n)}return"value"in r?r.value:r.get?ye.Call(r.get,n):void 0},fr=function(e,t,n,a){var i=Object.getOwnPropertyDescriptor(e,t);if(!i){var o=Object.getPrototypeOf(e);if(null!==o)return fr(o,t,n,a);i={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in i?!!i.writable&&(!!ye.TypeIsObject(a)&&(Object.getOwnPropertyDescriptor(a,t)?pe.defineProperty(a,t,{value:n}):pe.defineProperty(a,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))):!!i.set&&(r(i.set,a,n),!0)};Object.assign(ur,{defineProperty:function(e,t,n){return cr(e),lr(function(){return Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return cr(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){cr(e);var n=arguments.length>2?arguments[2]:e;return pr(e,t,n)},set:function(e,t,n){cr(e);var r=arguments.length>3?arguments[3]:e;return fr(e,t,n,r)}})}if(Object.getPrototypeOf){var dr=Object.getPrototypeOf;ur.getPrototypeOf=function(e){return cr(e),dr(e)}}if(Object.setPrototypeOf&&ur.getPrototypeOf){Object.assign(ur,{setPrototypeOf:function(e,t){if(cr(e),null!==t&&!ye.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===pe.getPrototypeOf(e)||!(pe.isExtensible&&!pe.isExtensible(e))&&(!function(e,t){for(var n=t;n;){if(e===n)return!0;n=ur.getPrototypeOf(n)}return!1}(e,t)&&(Object.setPrototypeOf(e,t),!0))}})}Object.keys(ur).forEach(function(e){!function(e,t){ye.IsCallable(j.Reflect[e])?s(function(){return j.Reflect[e](1),j.Reflect[e](NaN),j.Reflect[e](!0),!0})&&se(j.Reflect,e,t):y(j.Reflect,e,t)}(e,ur[e])});var hr=j.Reflect.getPrototypeOf;if(l&&hr&&"getPrototypeOf"!==hr.name&&se(j.Reflect,"getPrototypeOf",function(e){return r(hr,j.Reflect,e)}),j.Reflect.setPrototypeOf&&s(function(){return j.Reflect.setPrototypeOf(1,{}),!0})&&se(j.Reflect,"setPrototypeOf",ur.setPrototypeOf),j.Reflect.defineProperty&&(s(function(){var e=!j.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!j.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||se(j.Reflect,"defineProperty",ur.defineProperty)),j.Reflect.construct&&(s(function(){var e=function(){};return j.Reflect.construct(function(){},[],e)instanceof e})||se(j.Reflect,"construct",ur.construct)),"Invalid Date"!==String(new Date(NaN))){var yr=Date.prototype.toString;se(Date.prototype,"toString",function(){var e=+this;return e!=e?"Invalid Date":ye.Call(yr,this)})}var mr={anchor:function(e){return ye.CreateHTML(this,"a","name",e)},big:function(){return ye.CreateHTML(this,"big","","")},blink:function(){return ye.CreateHTML(this,"blink","","")},bold:function(){return ye.CreateHTML(this,"b","","")},fixed:function(){return ye.CreateHTML(this,"tt","","")},fontcolor:function(e){return ye.CreateHTML(this,"font","color",e)},fontsize:function(e){return ye.CreateHTML(this,"font","size",e)},italics:function(){return ye.CreateHTML(this,"i","","")},link:function(e){return ye.CreateHTML(this,"a","href",e)},small:function(){return ye.CreateHTML(this,"small","","")},strike:function(){return ye.CreateHTML(this,"strike","","")},sub:function(){return ye.CreateHTML(this,"sub","","")},sup:function(){return ye.CreateHTML(this,"sup","","")}};p(Object.keys(mr),function(e){var t=String.prototype[e],n=!1;if(ye.IsCallable(t)){var a=r(t,"",' " '),i=_([],a.match(/"/g)).length;n=a!==a.toLowerCase()||i>2}else n=!0;n&&se(String.prototype,e,mr[e])});var gr=function(){if(!ce)return!1;var e="object"===("undefined"==typeof JSON?"undefined":_typeof(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if(void 0!==e(J()))return!0;if("[null]"!==e([J()]))return!0;var t={a:J()};return t[J()]=!0,"{}"!==e(t)}(),vr=s(function(){return!ce||"{}"===JSON.stringify(Object(J()))&&"[{}]"===JSON.stringify([Object(J())])});if(gr||!vr){var br=JSON.stringify;se(JSON,"stringify",function(e){if("symbol"!==(void 0===e?"undefined":_typeof(e))){var t;arguments.length>1&&(t=arguments[1]);var n=[e];if(a(t))n.push(t);else{var i=ye.IsCallable(t)?t:null;n.push(function(e,t){var n=i?r(i,this,e,t):t;if("symbol"!==(void 0===n?"undefined":_typeof(n)))return oe(n)?At({})(n):n})}return arguments.length>2&&n.push(arguments[2]),br.apply(this,n)}})}return j},"function"==typeof define&&define.amd?define("es6-shim",factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=factory():root.returnExports=factory(),function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],r=Object.getPrototypeOf,a=n.slice,i=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},o=n.push,s=n.indexOf,c={},u=c.toString,l=c.hasOwnProperty,p=l.toString,f=p.call(Object),d={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},m=e.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,n){var r,a,i=(n=n||m).createElement("script");if(i.text=e,t)for(r in g)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,a);n.head.appendChild(i).parentNode.removeChild(i)}function b(e){return null==e?e+"":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?c[u.call(e)]||"object":void 0===e?"undefined":_typeof(e)}var w=function e(t,n){return new e.fn.init(t,n)};function T(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!h(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"===(void 0===o?"undefined":_typeof(o))||h(o)||(o={}),s===c&&(o=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(u&&r&&(w.isPlainObject(r)||(a=Array.isArray(r)))?(n=o[t],i=a&&!Array.isArray(n)?[]:a||w.isPlainObject(n)?n:{},a=!1,o[t]=w.extend(u,i,r)):void 0!==r&&(o[t]=r));return o},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==u.call(e))&&(!(t=r(e))||"function"==typeof(n=l.call(t,"constructor")&&t.constructor)&&p.call(n)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){v(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?w.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,o=0,s=[];if(T(e))for(r=e.length;o<r;o++)null!=(a=t(e[o],o,n))&&s.push(a);else for(o in e)null!=(a=t(e[o],o,n))&&s.push(a);return i(s)},guid:1,support:d}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var S=function(e){var t,n,r,a,i,o,s,c,u,l,p,f,d,h,y,m,g,v,b,w="sizzle"+1*new Date,T=e.document,S=0,x=0,k=ce(),O=ce(),j=ce(),A=ce(),C=function(e,t){return e===t&&(p=!0),0},E={}.hasOwnProperty,_=[],N=_.pop,P=_.push,I=_.push,M=_.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\["+L+"*("+F+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+L+"*\\]",V=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),z=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),W=new RegExp("^"+L+"*,"+L+"*"),$=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),B=new RegExp(L+"|>"),U=new RegExp(V),G=new RegExp("^"+F+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){f()},oe=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(_=M.call(T.childNodes),T.childNodes),_[T.childNodes.length].nodeType}catch(e){I={apply:_.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,a){var i,s,u,l,p,h,g,v=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!a&&(f(t),t=t||d,y)){if(11!==T&&(p=Q.exec(e)))if(i=p[1]){if(9===T){if(!(u=t.getElementById(i)))return r;if(u.id===i)return r.push(u),r}else if(v&&(u=v.getElementById(i))&&b(t,u)&&u.id===i)return r.push(u),r}else{if(p[2])return I.apply(r,t.getElementsByTagName(e)),r;if((i=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!A[e+" "]&&(!m||!m.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(g=e,v=t,1===T&&(B.test(e)||$.test(e))){for((v=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ae):t.setAttribute("id",l=w)),s=(h=o(e)).length;s--;)h[s]=(l?"#"+l:":scope")+" "+be(h[s]);g=h.join(",")}try{return I.apply(r,v.querySelectorAll(g)),r}catch(t){A(e,!0)}finally{l===w&&t.removeAttribute("id")}}}return c(e.replace(z,"$1"),t,r,a)}function ce(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function ue(e){return e[w]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ye(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ue(function(t){return t=+t,ue(function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!J.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:T;return o!=d&&9===o.nodeType&&o.documentElement?(h=(d=o).documentElement,y=!i(d),T!=d&&(a=d.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",ie,!1):a.attachEvent&&a.attachEvent("onunload",ie)),n.scope=le(function(e){return h.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&y)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=Z.test(d.querySelectorAll))&&(le(function(e){var t;h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(v=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Z.test(h.compareDocumentPosition),b=t||Z.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==T&&b(T,e)?-1:t==d||t.ownerDocument==T&&b(T,t)?1:l?D(l,e)-D(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e==d?-1:t==d?1:a?-1:i?1:l?D(l,e)-D(l,t):0;if(a===i)return fe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?fe(o[r],s[r]):o[r]==T?-1:s[r]==T?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&y&&!A[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){A(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=d&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=d&&f(e);var a=r.attrHandle[t.toLowerCase()],i=a&&E.call(r.attrHandle,t.toLowerCase())?a(e,t,!y):void 0;return void 0!==i?i:n.attributes||!y?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(re,ae)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],a=0,i=0;if(p=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(C),p){for(;t=e[i++];)t===e[i]&&(a=r.push(i));for(;a--;)e.splice(r[a],1)}return l=null,e},a=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ue,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var a=se.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,c){var u,l,p,f,d,h,y=i!==o?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!c&&!s,b=!1;if(m){if(i){for(;y;){for(f=t;f=f[y];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;h=y="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?m.firstChild:m.lastChild],o&&v){for(b=(d=(u=(l=(p=(f=m)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1])&&u[2],f=d&&m.childNodes[d];f=++d&&f&&f[y]||(b=d=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[S,d,b];break}}else if(v&&(b=d=(u=(l=(p=(f=t)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1]),!1===b)for(;(f=++d&&f&&f[y]||(b=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(v&&((l=(p=f[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]=[S,b]),f!==t)););return(b-=a)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[w]?a(t):a.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,n){for(var r,i=a(e,t),o=i.length;o--;)e[r=D(e,i[o])]=!(n[r]=i[o])}):function(e){return a(e,0,n)}):a}},pseudos:{not:ue(function(e){var t=[],n=[],r=s(e.replace(z,"$1"));return r[w]?ue(function(e,t,n,a){for(var i,o=r(e,null,a,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,a,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:ue(function(e){return function(t){return se(e,t).length>0}}),contains:ue(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||a(t)).indexOf(e)>-1}}),lang:ue(function(e){return G.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ye(!1),disabled:ye(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ve(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,a=t.next,i=a||r,o=n&&"parentNode"===i,s=x++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,c){var u,l,p,f=[S,s];if(c){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=(p=t[w]||(t[w]={}))[t.uniqueID]||(p[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=l[i])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(l[i]=f,f[2]=e(t,n,c))return!0}return!1}}function Te(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function Se(e,t,n,r,a){for(var i,o=[],s=0,c=e.length,u=null!=t;s<c;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),u&&t.push(s)));return o}function xe(e,t,n,r,a,i){return r&&!r[w]&&(r=xe(r)),a&&!a[w]&&(a=xe(a,i)),ue(function(i,o,s,c){var u,l,p,f=[],d=[],h=o.length,y=i||function(e,t,n){for(var r=0,a=t.length;r<a;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!i&&t?y:Se(y,f,e,s,c),g=n?a||(i?e:h||r)?[]:o:m;if(n&&n(m,g,s,c),r)for(u=Se(g,d),r(u,[],s,c),l=u.length;l--;)(p=u[l])&&(g[d[l]]=!(m[d[l]]=p));if(i){if(a||e){if(a){for(u=[],l=g.length;l--;)(p=g[l])&&u.push(m[l]=p);a(null,g=[],u,c)}for(l=g.length;l--;)(p=g[l])&&(u=a?D(i,p):f[l])>-1&&(i[u]=!(o[u]=p))}}else g=Se(g===o?g.splice(h,g.length):g),a?a(null,o,g,c):I.apply(o,g)})}function ke(e){for(var t,n,a,i=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],c=o?1:0,l=we(function(e){return e===t},s,!0),p=we(function(e){return D(t,e)>-1},s,!0),f=[function(e,n,r){var a=!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):p(e,n,r));return t=null,a}];c<i;c++)if(n=r.relative[e[c].type])f=[we(Te(f),n)];else{if((n=r.filter[e[c].type].apply(null,e[c].matches))[w]){for(a=++c;a<i&&!r.relative[e[a].type];a++);return xe(c>1&&Te(f),c>1&&be(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(z,"$1"),n,c<a&&ke(e.slice(c,a)),a<i&&ke(e=e.slice(a)),a<i&&be(e))}f.push(n)}return Te(f)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,o=se.tokenize=function(e,t){var n,a,i,o,s,c,u,l=O[e+" "];if(l)return t?0:l.slice(0);for(s=e,c=[],u=r.preFilter;s;){for(o in n&&!(a=W.exec(s))||(a&&(s=s.slice(a[0].length)||s),c.push(i=[])),n=!1,(a=$.exec(s))&&(n=a.shift(),i.push({value:n,type:a[0].replace(z," ")}),s=s.slice(n.length)),r.filter)!(a=X[o].exec(s))||u[o]&&!(a=u[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):O(e,c).slice(0)},s=se.compile=function(e,t){var n,a=[],i=[],s=j[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=ke(t[n]))[w]?a.push(s):i.push(s);(s=j(e,function(e,t){var n=t.length>0,a=e.length>0,i=function(i,o,s,c,l){var p,h,m,g=0,v="0",b=i&&[],w=[],T=u,x=i||a&&r.find.TAG("*",l),k=S+=null==T?1:Math.random()||.1,O=x.length;for(l&&(u=o==d||o||l);v!==O&&null!=(p=x[v]);v++){if(a&&p){for(h=0,o||p.ownerDocument==d||(f(p),s=!y);m=e[h++];)if(m(p,o||d,s)){c.push(p);break}l&&(S=k)}n&&((p=!m&&p)&&g--,i&&b.push(p))}if(g+=v,n&&v!==g){for(h=0;m=t[h++];)m(b,w,o,s);if(i){if(g>0)for(;v--;)b[v]||w[v]||(w[v]=N.call(c));w=Se(w)}I.apply(c,w),l&&!i&&w.length>0&&g+t.length>1&&se.uniqueSort(c)}return l&&(S=k,u=T),b};return n?ue(i):i}(i,a))).selector=e}return s},c=se.select=function(e,t,n,a){var i,c,u,l,p,f="function"==typeof e&&e,d=!a&&o(e=f.selector||e);if(n=n||[],1===d.length){if((c=d[0]=d[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&y&&r.relative[c[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(i=X.needsContext.test(e)?0:c.length;i--&&(u=c[i],!r.relative[l=u.type]);)if((p=r.find[l])&&(a=p(u.matches[0].replace(te,ne),ee.test(c[0].type)&&ge(t.parentNode)||t))){if(c.splice(i,1),!(e=a.length&&be(c)))return I.apply(n,a),n;break}}return(f||s(e,d))(a,t,!y,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=w.split("").sort(C).join("")===w,n.detectDuplicates=!!p,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||pe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e);w.find=S,w.expr=S.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=S.uniqueSort,w.text=S.getText,w.isXMLDoc=S.isXML,w.contains=S.contains,w.escapeSelector=S.escape;var x=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&w(e).is(n))break;r.push(e)}return r},k=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=w.expr.match.needsContext;function j(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,t,n){return h(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return s.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,a[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&O.test(e)?w(e):e||[],!1).length}});var E,_=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||E,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:_.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),A.test(r[1])&&w.isPlainObject(t))for(r in t)h(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=m.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,E=w(m);var N=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!=typeof e&&w(e);if(!O.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?w.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?s.call(w(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(j(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var a=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=w.filter(r,a)),this.length>1&&(P[e]||w.uniqueSort(a),N.test(e)&&a.reverse()),this.pushStack(a)}});var M=/[^\x20\t\r\n\f]+/g;function D(e){return e}function R(e){throw e}function L(e,t,n,r){var a;try{e&&h(a=e.promise)?a.call(e).done(t).fail(n):e&&h(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,a,i=[],o=[],s=-1,c=function(){for(a=a||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,a&&(i=n?[]:"")},u={add:function(){return i&&(n&&!t&&(s=i.length-1,o.push(n)),function t(n){w.each(n,function(n,r){h(r)?e.unique&&u.has(r)||i.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=o=[],i=n="",this},disabled:function(){return!i},lock:function(){return a=o=[],n||t||(i=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var a=h(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=a&&a.apply(this,arguments);e&&h(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(t,r,a){var i=0;function o(t,n,r,a){return function(){var s=this,c=arguments,u=function(){var e,u;if(!(t<i)){if((e=r.apply(s,c))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)&&e.then,h(u)?a?u.call(e,o(i,n,D,a),o(i,n,R,a)):(i++,u.call(e,o(i,n,D,a),o(i,n,R,a),o(i,n,D,n.notifyWith))):(r!==D&&(s=void 0,c=[e]),(a||n.resolveWith)(s,c))}},l=a?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,l.stackTrace),t+1>=i&&(r!==R&&(s=void 0,c=[e]),n.rejectWith(s,c))}};t?l():(w.Deferred.getStackHook&&(l.stackTrace=w.Deferred.getStackHook()),e.setTimeout(l))}}return w.Deferred(function(e){n[0][3].add(o(0,e,h(a)?a:D,e.notifyWith)),n[1][3].add(o(0,e,h(t)?t:D)),n[2][3].add(o(0,e,h(r)?r:R))}).promise()},promise:function(e){return null!=e?w.extend(e,a):a}},i={};return w.each(n,function(e,t){var o=t[2],s=t[5];a[t[1]]=o.add,s&&o.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=o.fireWith}),a.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),o=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(L(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||h(i[n]&&i[n].then)))return o.then();for(;n--;)L(i[n],s(n),o.reject);return o.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&F.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var q=w.Deferred();function V(){m.removeEventListener("DOMContentLoaded",V),e.removeEventListener("load",V),w.ready()}w.fn.ready=function(e){return q.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||q.resolveWith(m,[w]))}}),w.ready.then=q.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",V),e.addEventListener("load",V));var H=function e(t,n,r,a,i,o,s){var c=0,u=t.length,l=null==r;if("object"===b(r))for(c in i=!0,r)e(t,n,c,r[c],!0,o,s);else if(void 0!==a&&(i=!0,h(a)||(s=!0),l&&(s?(n.call(t,a),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;c<u;c++)n(t[c],r,s?a:a.call(t[c],c,n(t[c],r)));return i?t:l?n.call(t):u?n(t[0],r):o},z=/^-ms-/,W=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function B(e){return e.replace(z,"ms-").replace(W,$)}var U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=w.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[B(t)]=n;else for(r in t)a[B(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][B(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(B):(t=B(t))in r?[t]:t.match(M)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var X=new G,J=new G,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Y.test(e)?JSON.parse(e):e)}(n)}catch(e){}J.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return J.hasData(e)||X.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=J.get(i),1===i.nodeType&&!X.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=B(r.slice(5)),Z(i,r,a[r]));X.set(i,"hasDataAttrs",!0)}return a}return"object"===(void 0===e?"undefined":_typeof(e))?this.each(function(){J.set(this,e)}):H(this,function(t){var n;if(i&&void 0===t)return void 0!==(n=J.get(i,e))?n:void 0!==(n=Z(i,e))?n:void 0;this.each(function(){J.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=X.get(e,t),n&&(!r||Array.isArray(n)?r=X.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,a=n.shift(),i=w._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,function(){w.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:w.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=w.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=X.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=m.documentElement,re=function(e){return w.contains(e.ownerDocument,e)},ae={composed:!0};ne.getRootNode&&(re=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===w.css(e,"display")};function oe(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},c=s(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),l=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+c)&&ee.exec(w.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;o--;)w.style(e,t,l+u),(1-i)*(1-(i=s()/c||.5))<=0&&(o=0),l/=i;l*=2,w.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,a=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=a)),a}var se={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,a=se[r];return a||(t=n.body.appendChild(n.createElement(r)),a=w.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),se[r]=a,a)}function ue(e,t){for(var n,r,a=[],i=0,o=e.length;i<o;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(a[i]=X.get(r,"display")||null,a[i]||(r.style.display="")),""===r.style.display&&ie(r)&&(a[i]=ce(r))):"none"!==n&&(a[i]="none",X.set(r,"display",n)));for(i=0;i<o;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}w.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ie(this)?w(this).show():w(this).hide()})}});var le,pe,fe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;le=m.createDocumentFragment().appendChild(m.createElement("div")),(pe=m.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),le.appendChild(pe),d.checkClone=le.cloneNode(!0).cloneNode(!0).lastChild.checked,le.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!le.cloneNode(!0).lastChild.defaultValue,le.innerHTML="<option></option>",d.option=!!le.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&j(e,t)?w.merge([e],n):n}function ge(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,d.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function be(e,t,n,r,a){for(var i,o,s,c,u,l,p=t.createDocumentFragment(),f=[],d=0,h=e.length;d<h;d++)if((i=e[d])||0===i)if("object"===b(i))w.merge(f,i.nodeType?[i]:i);else if(ve.test(i)){for(o=o||p.appendChild(t.createElement("div")),s=(de.exec(i)||["",""])[1].toLowerCase(),c=ye[s]||ye._default,o.innerHTML=c[1]+w.htmlPrefilter(i)+c[2],l=c[0];l--;)o=o.lastChild;w.merge(f,o.childNodes),(o=p.firstChild).textContent=""}else f.push(t.createTextNode(i));for(p.textContent="",d=0;i=f[d++];)if(r&&w.inArray(i,r)>-1)a&&a.push(i);else if(u=re(i),o=me(p.appendChild(i),"script"),u&&ge(o),n)for(l=0;i=o[l++];)he.test(i.type||"")&&n.push(i);return p}var we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function ke(){return!1}function Oe(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function je(e,t,n,r,a,i){var o,s;if("object"===(void 0===t?"undefined":_typeof(t))){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)je(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=ke;else if(!a)return e;return 1===i&&(o=a,(a=function(e){return w().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),e.each(function(){w.event.add(this,t,a,r,n)})}function Ae(e,t,n){n?(X.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=X.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),X.set(this,t,o),r=n(this,t),this[t](),o!==(i=X.get(this,t))||r?X.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&(X.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&w.event.add(e,t,xe)}w.event={global:{},add:function(e,t,n,r,a){var i,o,s,c,u,l,p,f,d,h,y,m=X.get(e);if(U(e))for(n.handler&&(n=(i=n).handler,a=i.selector),a&&w.find.matchesSelector(ne,a),n.guid||(n.guid=w.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(M)||[""]).length;u--;)d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d&&(p=w.event.special[d]||{},d=(a?p.delegateType:p.bindType)||d,p=w.event.special[d]||{},l=w.extend({type:d,origType:y,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&w.expr.match.needsContext.test(a),namespace:h.join(".")},i),(f=c[d])||((f=c[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,h,o)||e.addEventListener&&e.addEventListener(d,o)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,l):f.push(l),w.event.global[d]=!0)},remove:function(e,t,n,r,a){var i,o,s,c,u,l,p,f,d,h,y,m=X.hasData(e)&&X.get(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(M)||[""]).length;u--;)if(d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d){for(p=w.event.special[d]||{},f=c[d=(r?p.delegateType:p.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=f.length;i--;)l=f[i],!a&&y!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(i,1),l.selector&&f.delegateCount--,p.remove&&p.remove.call(e,l));o&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,h,m.handle)||w.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)w.event.remove(e,d+t[u],n,r,!0);w.isEmptyObject(c)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o,s=new Array(arguments.length),c=w.event.fix(e),u=(X.get(this,"events")||Object.create(null))[c.type]||[],l=w.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(o=w.event.handlers.call(this,c,u),t=0;(a=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==i.namespace&&!c.rnamespace.test(i.namespace)||(c.handleObj=i,c.data=i.data,void 0!==(r=((w.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,a,i,o,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(i=[],o={},n=0;n<c;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?w(a,this).index(u)>-1:w.find(a,this,null,[u]).length),o[a]&&i.push(r);i.length&&s.push({elem:u,handlers:i})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click",xe),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&j(t,"input")&&X.get(t,"click")||j(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){w.event.special[e]={setup:function(){return Ae(this,e,Oe),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return je(this,e,t,n,r)},one:function(e,t,n,r){return je(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===(void 0===e?"undefined":_typeof(e))){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ce=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return j(e,"table")&&j(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,a,i,o,s;if(1===t.nodeType){if(X.hasData(e)&&(s=X.get(e).events))for(a in X.remove(t,"handle events"),s)for(n=0,r=s[a].length;n<r;n++)w.event.add(t,a,s[a][n]);J.hasData(e)&&(i=J.access(e),o=w.extend({},i),J.set(t,o))}}function De(e,t,n,r){t=i(t);var a,o,s,c,u,l,p=0,f=e.length,y=f-1,m=t[0],g=h(m);if(g||f>1&&"string"==typeof m&&!d.checkClone&&Ee.test(m))return e.each(function(a){var i=e.eq(a);g&&(t[0]=m.call(this,a,i.html())),De(i,t,n,r)});if(f&&(o=(a=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=o),o||r)){for(c=(s=w.map(me(a,"script"),Pe)).length;p<f;p++)u=a,p!==y&&(u=w.clone(u,!0,!0),c&&w.merge(s,me(u,"script"))),n.call(e[p],u,p);if(c)for(l=s[s.length-1].ownerDocument,w.map(s,Ie),p=0;p<c;p++)u=s[p],he.test(u.type||"")&&!X.access(u,"globalEval")&&w.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):v(u.textContent.replace(_e,""),u,l))}return e}function Re(e,t,n){for(var r,a=t?w.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||w.cleanData(me(r)),r.parentNode&&(n&&re(r)&&ge(me(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,i,o,s,c,u,l=e.cloneNode(!0),p=re(e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=me(l),r=0,a=(i=me(e)).length;r<a;r++)s=i[r],c=o[r],void 0,"input"===(u=c.nodeName.toLowerCase())&&fe.test(s.type)?c.checked=s.checked:"input"!==u&&"textarea"!==u||(c.defaultValue=s.defaultValue);if(t)if(n)for(i=i||me(e),o=o||me(l),r=0,a=i.length;r<a;r++)Me(i[r],o[r]);else Me(e,l);return(o=me(l,"script")).length>0&&ge(o,!p&&me(e,"script")),l},cleanData:function(e){for(var t,n,r,a=w.event.special,i=0;void 0!==(n=e[i]);i++)if(U(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)a[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return H(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!ye[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],a=w(e),i=a.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),w(a[s])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var Le=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),Fe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},qe=function(e,t,n){var r,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in r=n.call(e),t)e.style[a]=i[a];return r},Ve=new RegExp(te.join("|"),"i");function He(e,t,n){var r,a,i,o,s=e.style;return(n=n||Fe(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||re(e)||(o=w.style(e,t)),!d.pixelBoxStyles()&&Le.test(o)&&Ve.test(t)&&(r=s.width,a=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=a,s.maxWidth=i)),void 0!==o?o+"":o}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(u).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,c=12===n(t.marginLeft),l.style.right="60%",o=36===n(t.right),a=36===n(t.width),l.style.position="absolute",i=12===n(l.offsetWidth/3),ne.removeChild(u),l=null}}function n(e){return Math.round(parseFloat(e))}var r,a,i,o,s,c,u=m.createElement("div"),l=m.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===l.style.backgroundClip,w.extend(d,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,n,r,a;return null==s&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",ne.appendChild(t).appendChild(n).appendChild(r),a=e.getComputedStyle(n),s=parseInt(a.height)>3,ne.removeChild(t)),s}}))}();var We=["Webkit","Moz","ms"],$e=m.createElement("div").style,Be={};function Ue(e){var t=w.cssProps[e]||Be[e];return t||(e in $e?e:Be[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=We.length;n--;)if((e=We[n]+t)in $e)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,a,i){var o="width"===t?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=w.css(e,n+te[o],!0,a)),r?("content"===n&&(c-=w.css(e,"padding"+te[o],!0,a)),"margin"!==n&&(c-=w.css(e,"border"+te[o]+"Width",!0,a))):(c+=w.css(e,"padding"+te[o],!0,a),"padding"!==n?c+=w.css(e,"border"+te[o]+"Width",!0,a):s+=w.css(e,"border"+te[o]+"Width",!0,a));return!r&&i>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-c-s-.5))||0),c}function Qe(e,t,n){var r=Fe(e),a=(!d.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),i=a,o=He(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Le.test(o)){if(!n)return o;o="auto"}return(!d.boxSizingReliable()&&a||!d.reliableTrDimensions()&&j(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===w.css(e,"boxSizing",!1,r),(i=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+Ze(e,t,n||(a?"border":"content"),i,r,o)+"px"}function et(e,t,n,r,a){return new et.prototype.init(e,t,n,r,a)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=He(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=B(t),c=Xe.test(t),u=e.style;if(c||(t=Ue(s)),o=w.cssHooks[t]||w.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:u[t];"string"===(i=void 0===n?"undefined":_typeof(n))&&(a=ee.exec(n))&&a[1]&&(n=oe(e,t,a),i="number"),null!=n&&n==n&&("number"!==i||c||(n+=a&&a[3]||(w.cssNumber[s]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(c?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var a,i,o,s=B(t);return Xe.test(t)||(t=Ue(s)),(o=w.cssHooks[t]||w.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=He(e,t,r)),"normal"===a&&t in Ye&&(a=Ye[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Qe(e,t,r):qe(e,Je,function(){return Qe(e,t,r)})},set:function(e,n,r){var a,i=Fe(e),o=!d.scrollboxSize()&&"absolute"===i.position,s=(o||r)&&"border-box"===w.css(e,"boxSizing",!1,i),c=r?Ze(e,t,r,s,i):0;return s&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Ze(e,t,"border",!1,i)-.5)),c&&(a=ee.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(0,n,c)}}}),w.cssHooks.marginLeft=ze(d.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"==typeof n?n.split(" "):[n];r<4;r++)a[e+te[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=Fe(e),a=t.length;o<a;o++)i[t[o]]=w.css(e,t[o],!1,r);return i}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(w.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ue(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=et.prototype.init,w.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function it(){nt&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(it):e.setTimeout(it,w.fx.interval),w.fx.tick())}function ot(){return e.setTimeout(function(){tt=void 0}),tt=Date.now()}function st(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=te[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function ct(e,t,n){for(var r,a=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function ut(e,t,n){var r,a,i=0,o=ut.prefilters.length,s=w.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var t=tt||ot(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),i=0,o=u.tweens.length;i<o;i++)u.tweens[i].run(r);return s.notifyWith(e,[u,r,n]),r<1&&o?n:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||ot(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(!function(e,t){var n,r,a,i,o;for(n in e)if(a=t[r=B(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=w.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(l,u.opts.specialEasing);i<o;i++)if(r=ut.prefilters[i].call(u,e,l,u.opts))return h(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(l,ct,u),h(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return oe(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){h(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,a=e.length;r<a;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,c,u,l,p="width"in t||"height"in t,f=this,d={},h=e.style,y=e.nodeType&&ie(e),m=X.get(e,"fxshow");for(r in n.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()})})),t)if(a=t[r],rt.test(a)){if(delete t[r],i=i||"toggle"===a,a===(y?"hide":"show")){if("show"!==a||!m||void 0===m[r])continue;y=!0}d[r]=m&&m[r]||w.style(e,r)}if((c=!w.isEmptyObject(t))||!w.isEmptyObject(d))for(r in p&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=m&&m.display)&&(u=X.get(e,"display")),"none"===(l=w.css(e,"display"))&&(u?l=u:(ue([e],!0),u=e.style.display||u,l=w.css(e,"display"),ue([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===w.css(e,"float")&&(c||(f.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,d)c||(m?"hidden"in m&&(y=m.hidden):m=X.access(e,"fxshow",{display:u}),i&&(m.hidden=!y),y&&ue([e],!0),f.done(function(){for(r in y||ue([e]),X.remove(e,"fxshow"),d)w.style(e,r,d[r])})),c=ct(y?m[r]:0,r,f),r in m||(m[r]=c.start,y&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"===(void 0===e?"undefined":_typeof(e))?w.extend({},e):{complete:n||!n&&t||h(e)&&e,duration:e,easing:n&&t||t&&!h(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ie).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=w.isEmptyObject(e),i=w.speed(t,n,r),o=function(){var t=ut(this,w.extend({},e),i);(a||X.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",i=w.timers,o=X.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&at.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=X.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,a)}}),w.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),tt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){nt||(nt=!0,it())},w.fx.stop=function(){nt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var a=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(a)}})},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value}();var lt,pt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return H(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?w.prop(e,t,n):(1===i&&w.isXMLDoc(e)||(a=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&j(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(M);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),lt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||w.find.attr;pt[t]=function(e,t,r){var a,i,o=t.toLowerCase();return r||(i=pt[o],pt[o]=a,a=null!=n(e,t,r)?o:null,pt[o]=i),a}});var ft=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(M)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}w.fn.extend({prop:function(e,t){return H(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&w.isXMLDoc(e)||(t=w.propFix[t]||t,a=w.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,a,i,o,s,c=0;if(h(e))return this.each(function(t){w(this).addClass(e.call(this,t,yt(this)))});if((t=mt(e)).length)for(;n=this[c++];)if(a=yt(n),r=1===n.nodeType&&" "+ht(a)+" "){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,a,i,o,s,c=0;if(h(e))return this.each(function(t){w(this).removeClass(e.call(this,t,yt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[c++];)if(a=yt(n),r=1===n.nodeType&&" "+ht(a)+" "){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");a!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=void 0===e?"undefined":_typeof(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):h(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,yt(this),t),t)}):this.each(function(){var t,a,i,o;if(r)for(a=0,i=w(this),o=mt(e);t=o[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ht(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g;w.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=h(e),this.each(function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,w(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=w.map(a,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=w.valHooks[a.type]||w.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(gt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ht(w.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],c=o?i+1:a.length;for(r=i<0?c:o?i:0;r<c;r++)if(((n=a[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!j(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,i=w.makeArray(t),o=a.length;o--;)((r=a[o]).selected=w.inArray(w.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},d.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),d.focusin="onfocusin"in e;var vt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,a){var i,o,s,c,u,p,f,d,g=[r||m],v=l.call(t,"type")?t.type:t,b=l.call(t,"namespace")?t.namespace.split("."):[];if(o=d=s=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!vt.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(v=(b=v.split(".")).shift(),b.sort()),u=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"===(void 0===t?"undefined":_typeof(t))&&t)).isTrigger=a?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),f=w.event.special[v]||{},a||!f.trigger||!1!==f.trigger.apply(r,n))){if(!a&&!f.noBubble&&!y(r)){for(c=f.delegateType||v,vt.test(c+v)||(o=o.parentNode);o;o=o.parentNode)g.push(o),s=o;s===(r.ownerDocument||m)&&g.push(s.defaultView||s.parentWindow||e)}for(i=0;(o=g[i++])&&!t.isPropagationStopped();)d=o,t.type=i>1?c:f.bindType||v,(p=(X.get(o,"events")||Object.create(null))[t.type]&&X.get(o,"handle"))&&p.apply(o,n),(p=u&&o[u])&&p.apply&&U(o)&&(t.result=p.apply(o,n),!1===t.result&&t.preventDefault());return t.type=v,a||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),n)||!U(r)||u&&h(r[v])&&!y(r)&&((s=r[u])&&(r[u]=null),w.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,bt),r[v](),t.isPropagationStopped()&&d.removeEventListener(v,bt),w.event.triggered=void 0,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),d.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,a=X.access(r,t);a||r.addEventListener(e,n,!0),X.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,a=X.access(r,t)-1;a?X.access(r,t,a):(r.removeEventListener(e,n,!0),X.remove(r,t))}}});var wt=e.location,Tt={guid:Date.now()},St=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var xt=/\[\]$/,kt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,r){var a;if(Array.isArray(t))w.each(t,function(t,a){n||xt.test(e)?r(e,a):At(e+"["+("object"===(void 0===a?"undefined":_typeof(a))&&null!=a?t:"")+"]",a,n,r)});else if(n||"object"!==b(t))r(e,t);else for(a in t)At(e+"["+a+"]",t[a],n,r)}w.param=function(e,t){var n,r=[],a=function(e,t){var n=h(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){a(this.name,this.value)});else for(n in e)At(n,e[n],t,a);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&jt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var Ct=/%20/g,Et=/#.*$/,_t=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,It=/^\/\//,Mt={},Dt={},Rt="*/".concat("*"),Lt=m.createElement("a");function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(M)||[];if(h(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qt(e,t,n,r){var a={},i=e===Dt;function o(s){var c;return a[s]=!0,w.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||i||a[u]?i?!(c=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),c}return o(t.dataTypes[0])||!a["*"]&&o("*")}function Vt(e,t){var n,r,a=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}Lt.href=wt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,w.ajaxSettings),t):Vt(w.ajaxSettings,e)},ajaxPrefilter:Ft(Mt),ajaxTransport:Ft(Dt),ajax:function(t,n){"object"===(void 0===t?"undefined":_typeof(t))&&(n=t,t=void 0),n=n||{};var r,a,i,o,s,c,u,l,p,f,d=w.ajaxSetup({},n),h=d.context||d,y=d.context&&(h.nodeType||h.jquery)?w(h):w.event,g=w.Deferred(),v=w.Callbacks("once memory"),b=d.statusCode||{},T={},S={},x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(u){if(!o)for(o={};t=Nt.exec(i);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?i:null},setRequestHeader:function(e,t){return null==u&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)k.always(e[k.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),O(0,t),this}};if(g.promise(k),d.url=((t||d.url||wt.href)+"").replace(It,wt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(M)||[""],null==d.crossDomain){c=m.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Lt.protocol+"//"+Lt.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=w.param(d.data,d.traditional)),qt(Mt,d,n,k),u)return k;for(p in(l=w.event&&d.global)&&0==w.active++&&w.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),a=d.url.replace(Et,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ct,"+")):(f=d.url.slice(a.length),d.data&&(d.processData||"string"==typeof d.data)&&(a+=(St.test(a)?"&":"?")+d.data,delete d.data),!1===d.cache&&(a=a.replace(_t,"$1"),f=(St.test(a)?"&":"?")+"_="+Tt.guid+++f),d.url=a+f),d.ifModified&&(w.lastModified[a]&&k.setRequestHeader("If-Modified-Since",w.lastModified[a]),w.etag[a]&&k.setRequestHeader("If-None-Match",w.etag[a])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Rt+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(h,k,d)||u))return k.abort();if(x="abort",v.add(d.complete),k.done(d.success),k.fail(d.error),r=qt(Dt,d,n,k)){if(k.readyState=1,l&&y.trigger("ajaxSend",[k,d]),u)return k;d.async&&d.timeout>0&&(s=e.setTimeout(function(){k.abort("timeout")},d.timeout));try{u=!1,r.send(T,O)}catch(e){if(u)throw e;O(-1,e)}}else O(-1,"No Transport");function O(t,n,o,c){var p,f,m,T,S,x=n;u||(u=!0,s&&e.clearTimeout(s),r=void 0,i=c||"",k.readyState=t>0?4:0,p=t>=200&&t<300||304===t,o&&(T=function(e,t,n){for(var r,a,i,o,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){c.unshift(a);break}if(c[0]in n)i=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){i=a;break}o||(o=a)}i=i||o}if(i)return i!==c[0]&&c.unshift(i),n[i]}(d,k,o)),!p&&w.inArray("script",d.dataTypes)>-1&&(d.converters["text script"]=function(){}),T=function(e,t,n,r){var a,i,o,s,c,u={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=l.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(!(o=u[c+" "+i]||u["* "+i]))for(a in u)if((s=a.split(" "))[1]===i&&(o=u[c+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[a]:!0!==u[a]&&(i=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}(d,T,k,p),p?(d.ifModified&&((S=k.getResponseHeader("Last-Modified"))&&(w.lastModified[a]=S),(S=k.getResponseHeader("etag"))&&(w.etag[a]=S)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=T.state,f=T.data,p=!(m=T.error))):(m=x,!t&&x||(x="error",t<0&&(t=0))),k.status=t,k.statusText=(n||x)+"",p?g.resolveWith(h,[f,x,k]):g.rejectWith(h,[k,x,m]),k.statusCode(b),b=void 0,l&&y.trigger(p?"ajaxSuccess":"ajaxError",[k,d,p?f:m]),v.fireWith(h,[k,x]),l&&(y.trigger("ajaxComplete",[k,d]),--w.active||w.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,a){return h(n)&&(a=a||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:a,data:n,success:r},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return h(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},zt=w.ajaxSettings.xhr();d.cors=!!zt&&"withCredentials"in zt,d.ajax=zt=!!zt,w.ajaxTransport(function(t){var n,r;if(d.cors||zt&&!t.crossDomain)return{send:function(a,i){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,a){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}});var Wt,$t=[],Bt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||w.expando+"_"+Tt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var a,i,o,s=!1!==t.jsonp&&(Bt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Bt,"$1"+a):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||w.error(a+" was not called"),o[0]},t.dataTypes[0]="json",i=e[a],e[a]=function(){o=arguments},r.always(function(){void 0===i?w(e).removeProp(a):e[a]=i,t[a]&&(t.jsonpCallback=n.jsonpCallback,$t.push(a)),o&&h(i)&&i(o[0]),o=i=void 0}),"script"}),d.createHTMLDocument=((Wt=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(d.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),i=!n&&[],(a=A.exec(e))?[t.createElement(a[1])]:(a=be([e],t,i),i&&i.length&&w(i).remove(),w.merge([],a.childNodes)));var r,a,i},w.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return s>-1&&(r=ht(e.slice(s)),e=e.slice(0,s)),h(t)?(n=t,t=void 0):t&&"object"===(void 0===t?"undefined":_typeof(t))&&(a="POST"),o.length>0&&w.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,a,i,o,s,c,u=w.css(e,"position"),l=w(e),p={};"static"===u&&(e.style.position="relative"),s=l.offset(),i=w.css(e,"top"),c=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(i+c).indexOf("auto")>-1?(o=(r=l.position()).top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(c)||0),h(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+a),"using"in t?t.using.call(e,p):("number"==typeof p.top&&(p.top+="px"),"number"==typeof p.left&&(p.left+="px"),l.css(p))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),a.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-w.css(r,"marginTop",!0),left:t.left-a.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ne})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return H(this,function(e,r,a){var i;if(y(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=ze(d.pixelPosition,function(e,n){if(n)return n=He(e,t),Le.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(a,i){var o=arguments.length&&(n||"boolean"!=typeof a),s=n||(!0===a||!0===i?"margin":"border");return H(this,function(t,n,a){var i;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?w.css(t,n,s):w.style(t,n,a,s)},t,o?a:void 0,o)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Ut=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return r=a.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=j,w.isFunction=h,w.isWindow=y,w.camelCase=B,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Ut,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Gt=e.jQuery,Xt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Xt),t&&e.jQuery===w&&(e.jQuery=Gt),w},void 0===t&&(e.jQuery=e.$=w),w}),define("jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";return 1===this.length&&this[0]instanceof Text?[this[0]]:this.get().concat(this.contents().get(),this.find(e).contents().get()).filter(function(e,t,n){return e instanceof Text&&n.indexOf(e)===t}).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){return this.filter(e).add(this.find(e))}})}),function(){var e=void 0,t={};function n(){for(var e=0;e<arguments.length;e++)for(var t in arguments[e])this[t]=arguments[e][t]}function r(e,t){e.childAt=e.childAt||{};for(var n=t.start;n<t.end;n+=1)e.childAt[n]=t}function a(e,t,n,r){return!(e.canFollow&&!(e.canFollow.indexOf(n&&n.type)>-1)||e.cannotFollow&&(-1!==e.cannotFollow.indexOf(n&&n.type)||e.cannotFollow.indexOf("text")>-1&&r)||e.peek&&e.peek.toLowerCase()!==t.slice(0,e.peek.length).toLowerCase())}function i(e){for(var n=e.innerText,r=[],i=0,s=i,c=n.length,u=null;i<c;){for(var l=n.slice(i),p=(r.length?r[0]:e).innerMode,f=0,d=p.length;f<d;f+=1){var h=t[p[f]];if(a(h,l,u,s<i)&&h.pattern.test(l)){var y=h.pattern.exec(l),m=h.fn(y),g=!1,v=0;if(m.matches){for(;v<r.length;v+=1){var b=r[v].type;if(b in m.matches){g=!0;break}0===b.indexOf("verbatim")&&(b="verbatimOpener"),m.cannotCross&&m.cannotCross.indexOf(b)>-1&&(v=r.length-1)}if(v>=r.length&&!m.isFront)continue}s<i&&e.addChild({type:"text",text:n.slice(s,i),innerMode:p}),s=i+=(u=e.addChild(m)).text.length,g&&(o(e,u,r[v]),r=r.slice(v+1)),u.isFrontToken()&&r.unshift(u);break}}f===d&&(i+=1,null===u&&(u={type:"text"}))}for(s<i&&e.addChild({type:"text",text:n.slice(s,i),innerMode:(r.length?r[0]:e).innerMode});r.length>0;)r.shift().demote();return e}function o(e,t,n){var a=e.children.indexOf(t),i=e.children.indexOf(n);t.children=e.children.splice(i+1,a-(i+1)),t.children.forEach(function(e){r(t,e)}),t.type=t.matches[n.type],t.innerText="";for(var o=0,s=t.children.length;o<s;o++)t.innerText+=t.children[o].text;t.start=n.start,t.text=n.text+t.innerText+t.text,Object.keys(n).forEach(function(e){Object.hasOwnProperty.call(t,e)||(t[e]=n[e])}),t.isFront&&(t.isFront=!1),e.children.splice(i,1),r(e,t)}n.prototype={constructor:n,addChild:function(e){var t=this.lastChildEnd(),a=new n({start:t,end:e.text&&t+e.text.length,children:[]},e);return a.innerText&&i(a),this.children.push(a),r(this,a),a},firstChild:function(){return this.children&&this.children[0]||null},lastChild:function(){return this.children&&this.children[this.children.length-1]||null},lastChildEnd:function(){var e=this.lastChild();return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.childAt)return this.childAt[e]&&this.childAt[e].tokenAt(e)||this;if(this.children.length)for(var t=0;t<this.children.length;t+=1){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];if(this.childAt)return(this.childAt[e]&&this.childAt[e].pathAt(e)||[]).concat(this);var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1){var r=this.children[n].pathAt(e);if(r.length){t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(e){return e<this.start||e>=this.end?null:this.children?this.children.reduce(function(t,n){return t||(e>=n.start&&e<n.end?n:null)},null):this},everyLeaf:function(e){return this.children&&0!==this.children.length?this.children.reduce(function(t,n){return t&&n.everyLeaf(e)},!0):!!e(this)},isWhitespace:function(){return this.everyLeaf(function(e){return"whitespace"===e.type||!e.text.trim()})},isFrontToken:function(){return this.isFront},isBackToken:function(){return"matches"in this},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"\u2192"+this.end+")";return this.children&&this.children.length>0&&(e+="["+this.children+"]"),e}},e={lex:function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";return i(new n({type:"root",start:r||0,end:t.length,text:t,innerText:t,children:[],childAt:{},innerMode:e.modes[a]}))},rules:t,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("lexer",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=e):this.TwineLexer=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e;function t(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))?(Object.keys(e).forEach(function(n){e[n]=t(e[n])}),e):(e+"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var r=n("?:"),a=n("?!"),i=n("?="),o="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",s=o.replace("*","+"),c="\\b",u="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",l=u.replace("\\-",""),p=r("\\n","$"),f=o+"(\\*+)"+s,d=o+"((?:0\\.)+)"+s,h=o+"-{3,}"+o+p,y=o+"(==+>|<=+|=+><=+|<==+>)"+o+p,m=o+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+o+p,g={opener:"\\[\\[(?!\\[)",text:"("+function(){return"[^"+Array.apply(0,arguments).map(t).join("")+"]*"}("]")+")",rightSeparator:r("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+r("[^\\|\\]]","\\]"+a("\\]"))+"+)"},v=l+"*"+l.replace("\\w","a-zA-Z")+l+"*",b="\\$("+v+")",w="_("+v+")",T="'s"+s+"("+v+")",S="("+v+")"+s+"of"+c+a("it\\b"),x="'s"+s,k=r("it","time","visits?","exits?","pos")+c,O="its"+s+"("+v+")",j="its"+s,A="("+v+")"+s+"of"+s+"it"+c,C="of\\b"+s+"it"+c,E={opener:"\\(",name:"("+r("\\$","_")+"?"+u+"+):"+a("\\/"),closer:"\\)"},_=r("=<","=>","[gl]te?\\b","n?eq\\b","isnot\\b","are\\b","x\\b","isa\\b","or"+s+"a"+c),N="[a-zA-Z][\\w\\-]*",P="(?:\"[^\"]*\"|'[^']*'|[^'\">])*?",I="\\|("+u+"+)(>|\\))",M="(<|\\()("+u+"+)\\|",D="\\b(\\d+(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?)"+a("m?s")+c;g.main=g.opener+r(g.text+g.rightSeparator,g.text.replace("*","*?")+g.leftSeparator)+g.text,e={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:u,anyLetterStrict:l,whitespace:s.replace("[","[\\n\\r"),escapedLine:"\\\\\\n\\\\?|\\n\\\\",br:"\\n(?!\\\\)",commentFront:"\x3c!--",commentBack:"--\x3e",tag:"<\\/?"+N+P+">",tagPeek:"<",scriptStyleTag:"<("+r("script","style","textarea")+")"+P+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+r("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:"\\*",hr:h,heading:"[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*(#{1,6})[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",align:y,column:m,bulleted:f,numbered:d,strikeOpener:t("~~"),italicOpener:t("//"),boldOpener:t("''"),supOpener:t("^^"),strongFront:t("**"),strongBack:t("**"),emFront:t("*"),emBack:t("*"),verbatimOpener:"`+",collapsedFront:"{",collapsedBack:"}",hookAppendedFront:"\\["+a("=+"),hookPrependedFront:I+"\\["+a("=+"),hookFront:"\\["+a("=+"),hookBack:"\\]"+a(M),hookAppendedBack:"\\]"+M,unclosedHook:"\\[=+",unclosedHookPrepended:I+"\\[=+",unclosedCollapsed:"\\{=+",passageLink:g.main+g.closer,passageLinkPeek:"[[",legacyLink:g.opener+g.legacyText+g.legacySeparator+g.legacyText+g.closer,legacyLinkPeek:"[[",simpleLink:g.opener+g.legacyText+g.closer,simpleLinkPeek:"[[",macroFront:E.opener+i(E.name),macroFrontPeek:"(",macroName:E.name,groupingFront:"\\("+a(E.name),groupingFrontPeek:"(",groupingBack:"\\)",twine1Macro:"<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",twine1MacroPeek:"<<",validPropertyName:v,property:T,propertyPeek:"'s",belongingProperty:S,possessiveOperator:x,belongingOperator:"of\\b",belongingOperatorPeek:"of",itsOperator:j,itsOperatorPeek:"its",belongingItOperator:C,belongingItOperatorPeek:"of",variable:b,variablePeek:"$",tempVariable:w,tempVariablePeek:"_",hookName:"\\?("+u+"+)\\b",hookNamePeek:"?",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)\\b",colour:r(r("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black","Transparent"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),datatype:r("alnum","alphanumeric","any(?:case)?","array","bool(?:ean)?","changer","colou?r","const","command","dm","data"+r("map","type","set"),"ds","digit","gradient","empty","even","int"+a("o")+"(?:eger)?","lambda","lowercase","macro","linebreak","newline","num(?:ber)?","odd","str(?:ing)?","uppercase","whitespace")+c,number:D,boolean:r("true","false")+c,identifier:k,itsProperty:O,itsPropertyPeek:"its",belongingItProperty:A,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',singleStringCloser:"'",doubleStringCloser:'"',is:"is"+a(s+"not"+c,s+"an?"+c,s+"in"+c,s+"<",s+">")+c,isNot:"is"+s+"not"+a(s+r("an?","in")+c)+c,isA:"is"+s+"an?"+c,isNotA:"is"+s+"not"+s+"an?"+c,matches:"matches\\b",doesNotMatch:"does"+s+"not"+s+"match"+c,and:"and\\b",or:"or\\b",not:"not\\b",inequality:"((?:is(?:"+s+"not)?"+o+")*)("+r("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+s+"in"+c,contains:"contains\\b",doesNotContain:"does"+s+"not"+s+"contain"+c,isNotIn:"is"+s+"not"+s+"in"+c,addition:t("+")+a("="),subtraction:t("-")+a("=","type"),multiplication:t("*")+a("="),division:r("/","%")+a("="),comma:",",spread:"\\.\\.\\."+a("\\."),to:r("to\\b","="),into:"into\\b",making:"making\\b",where:"where\\b",when:"when\\b",via:"via\\b",each:"each\\b",augmentedAssign:r("\\+","\\-","\\*","\\/","%")+"=",bind:"2?bind\\b",typeSignature:t("-type")+c,incorrectOperator:_},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("patterns",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=e):this.Patterns=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e=void 0;Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var t=Object.keys,n=Object.assign;function r(r){return Object.freeze({lex:function(r){function a(e){return e=e||"innerText",function(t){var n=t.reduceRight(function(e,t,n){return e||(n?t:"")},""),r={};return r[e]=n,r}}function i(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}var o=Object.bind(0,null);function s(e,t){return Object.keys(t).forEach(function(n){var r=t[n].fn;t[n].fn=function(t){var a=r(t);return a.text||(a.text=t[0]),a.type||(a.type=n),a.innerMode||(a.innerMode=e),a}}),t}var c=[],u=[],l=[],p=s(c,{hr:{fn:o},bulleted:{fn:function(e){return{depth:e[1].length}}},numbered:{fn:function(e){return{depth:e[1].length/2}}},heading:{fn:function(e){return{depth:e[1].length}}},align:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("><");return~r?25===(t=Math.round(r/(n.length-2)*50))&&(t="center"):"<"===n[0]&&">"===n.slice(-1)?t="justify":n.indexOf(">")>-1?t="right":n.indexOf("<")>-1&&(t="left"),{align:t}}},column:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("|");return r&&r<n.length-1?t="center":"|"===n[0]&&"|"===n.slice(-1)?t="none":r===n.length-1?t="right":r||(t="left"),{column:t,width:/\|+/.exec(n)[0].length,marginLeft:/^=*/.exec(n)[0].length,marginRight:/=*$/.exec(n)[0].length}}}});t(p).forEach(function(e){p[e].canFollow=[null,"br","hr","bulleted","numbered","heading","align","column","escapedLine"],p[e].cannotFollow=["text"]});var f=s(c,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1, SugarCube, and Yarn macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:i("boldOpener","bold")},italicOpener:{fn:i("italicOpener","italic")},strikeOpener:{fn:i("strikeOpener","strike")},supOpener:{fn:i("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:o},tag:{fn:o},url:{fn:o},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},unclosedHook:{fn:o},unclosedHookPrepended:{fn:function(e){return{type:"unclosedHook",name:e[1],hidden:")"===e[2]}}},verbatimOpener:{fn:function(e){var t=e[0].length,n={};return n["verbatim"+t]="verbatim",{type:"verbatim"+t,isFront:!0,matches:n}}},unclosedCollapsed:{fn:o},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:o},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2],innerMode:c}}},br:{fn:o}}),d=n(s(u,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener"]}}},passageLink:{fn:function(e){var t=e[1]||"",n=e[2]||"",r=e[3]||"";return{type:"twineLink",innerText:n?r:t,passage:t?r:n,innerMode:c}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1]||"",passage:e[1]||"",innerMode:c}}},variable:{cannotFollow:["macroFront"],fn:a("name")},tempVariable:{cannotFollow:["macroFront"],fn:a("name")}}),{hookFront:f.hookFront,hookBack:f.hookBack}),h=s(u,n({macroName:{canFollow:["macroFront"],fn:a("name")},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:a("name"),canFollow:["variable","hookName","property","tempVariable","colour","itsProperty","belongingItProperty","macro","grouping","string","datatype","hook","boolean","number"]},possessiveOperator:{fn:o},itsProperty:{cannotFollow:["text"],fn:a("name")},itsOperator:{cannotFollow:["text"],fn:o},belongingItProperty:{cannotFollow:["text"],fn:a("name")},belongingItOperator:{cannotFollow:["text"],fn:o},belongingProperty:{cannotFollow:["text"],fn:a("name")},belongingOperator:{cannotFollow:["text"],fn:o},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"},innerMode:l}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"},innerMode:l}}},hookName:{fn:a("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},datatype:{cannotFollow:["text"],fn:function(e){return{name:e[0].toLowerCase()}}},colour:{cannotFollow:["text"],fn:function(e){var t=e[0].toLowerCase(),n={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"};return{colour:Object.hasOwnProperty.call(n,t)?"#"+n[t]:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},inequality:{fn:function(e){return{operator:e[2],negate:e[1].indexOf("not")>-1}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:a("name"),cannotFollow:["text"]},whitespace:{fn:o,cannotFollow:"text"},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",isa:"is a",are:"is",x:"*","or a":"or"}[e[0].toLowerCase().replace(/\s+/g," ")];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'.",explanation:"In the interests of readability, I want certain operators to be in a specific form."}},cannotFollow:"text"}},["boolean","is","to","into","where","when","via","making","each","and","or","not","isNot","contains","doesNotContain","isIn","isA","isNotA","isNotIn","matches","doesNotMatch","bind"].reduce(function(e,t){return e[t]={fn:o,cannotFollow:["text"]},e},{}),["comma","spread","typeSignature","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:o},e},{}))),y=s(l,{singleStringCloser:h.singleStringOpener,doubleStringCloser:h.doubleStringOpener,escapedStringChar:h.escapedStringChar});c.push.apply(c,_toConsumableArray(t(p)).concat(_toConsumableArray(t(d)),_toConsumableArray(t(f)))),u.push.apply(u,_toConsumableArray(t(d)).concat(_toConsumableArray(t(h)))),l.push.apply(l,_toConsumableArray(t(y)));var m=n({},p,f,d,h,y);t(m).forEach(function(t){var n=e[t];m[t].pattern="string"!=typeof n?n:RegExp("^(?:"+n+")","i"),e[t+"Peek"]&&(m[t].peek=e[t+"Peek"])}),n(r.rules,m);var g=r.modes;return g.start=g.markup=c,g.macro=u,g.string=l,r}(r).lex,Patterns:e})}"object"===("undefined"==typeof module?"undefined":_typeof(module))?(e=require("./patterns"),module.exports=r(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(t,n){return e=n,r(t)}):this&&this.loaded&&this.modules?(e=this.modules.Patterns,this.modules.Markup=r(this.modules.Lexer)):(e=this.Patterns,this.TwineMarkup=r(this.TwineLexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),define("utils/polyfills",[],function(){var e=Array.prototype;"function"!=typeof e.includes&&(e.includes=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(t)&&Number.isFinite(n)&&void 0!==t)return e.indexOf.call(this,t,n)>-1;var r=Object(this),a=parseInt(r.length);if(a<=0)return!1;for(var i=n>=0?n:Math.max(0,a+n);i<a;){if(Object.is(t,r[i]))return!0;i+=1}return!1}),!window.Symbol&&(window.Symbol={iterator:"_es6-shim iterator_"})}),define("utils",["jquery","markup","utils/polyfills"],function(e){var t=String.fromCharCode,n="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage,tw-sidebar,tw-columns,tw-column,tw-meter".split(","),r="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error,tw-colour,tw-icon".split(","),a=["audio"],i=[function(e){return t(e)!==t(e).toLowerCase()},function(e){return t(e)!==t(e).toUpperCase()},function(e){return t(e).toLowerCase()!==t(e).toUpperCase()}].map(function(e){return"["+Array.from(Array(57343)).map(function(e,t){return t}).filter(e).map(function(e,n,r){return e===r[n-1]+1&&e===r[n+1]-1?"-":t(e)}).join("").replace(/\-+/g,"-")+"]"}),o=_slicedToArray(i,3),s=o[0],c=o[1],u=o[2];function l(e){return"instant"===e?0:800}var p=void 0,f=[],d={},h=0,y={},m=0,g={},v=void 0;function b(e,t,n,r,a){var i=null,o=0,s=t+n;function c(n){1&e[0].compareDocumentPosition(document)&&(s=0),i&&(s-=n-i,o+=n-i),i=n,r>0&&h+m>0&&(s-=r,e.css("animation-delay",(v.cssTimeUnit(e.css("animation-delay"))||0)-r+"ms")),s<=0?a(o):requestAnimationFrame(c),s<=t&&e.css("visibility","")}s?requestAnimationFrame(c):c()}return e(document.documentElement).on("keydown keyup mousedown mouseup",function(e){var t=e.key,n=e.button,r=e.type.includes("down"),a=t?d:y,i=t&&v.insensitiveName(t)||n;a[i]&&!r?t?h=Math.max(h-1,0):m=Math.max(m-1,0):!a[i]&&r&&(t?h+=1:m+=1),a[i]=r}).on("mousemove",function(e){var t=e.pageX,n=e.pageY;g.x=t,g.y=n}),v={lockProperty:function(e,t,n){var r=Object.create({configurable:0,writable:0});return n&&(r.value=n),Object.defineProperty(e,t,r),e},permutations:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,a=[[].concat(t)],i=Array(r).fill(0),o=1,s=void 0,c=void 0;o<r;)i[o]<o?(s=o%2&&i[o],c=t[o],t[o]=t[s],t[s]=c,++i[o],o=1,a.push([].concat(t))):(i[o]=0,++o);return a},shuffled:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t,n){var r=Math.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[])},matMul:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i;if(r.length>0)return(i=v).matMul.apply(i,[v.matMul(e,t)].concat(r));if(!t)return e;for(var o=[],s=0;s<e.length;s++){o[s]=[];for(var c=0;c<t[0].length;c++){for(var u=0,l=0;l<e[0].length;l++)u+=e[s][l]*t[l][c];o[s][c]=u}}return o},cssTimeUnit:function(e){return"ms"===(e=e.toLowerCase()).slice(-2)?+e.slice(0,-2)||0:"s"===e.slice(-1)&&1e3*+e.slice(0,-1)||0},nth:function(e){var t=(+e+"").slice(-1);return e+("1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th")},plural:function(e,t){return e+" "+t+(e>1?"s":"")},andList:function(e){return 1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",anyUppercase:s,anyLowercase:c,anyCasedLetter:u,anyNewline:"(?:\\n|\\r|\\r\\n)",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(/-|_/g,"")},allKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return d[e]})},someKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return d[e]})},buttonsDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return y[e]})},anyInputDown:function(){return h+m>0},mouseCoords:g,parentColours:function(e){for(var t={colour:null,backgroundColour:null},n=/^\w+a\(.+?,\s*0\s*\)$|^transparent$/;e.length&&e[0]!==document;e=e.parent()){if(!t.backgroundColour){var r=e.css("background-color");r.match(n)||(t.backgroundColour=r)}if(!t.colour){var a=e.css("color");a.match(n)||(t.colour=a)}if(t.colour&&t.backgroundColour)return t}return{colour:"#fff",backgroundColour:"#000"}},childrenProbablyInline:function(e){var t=[];return[].every.call(e.findAndFilter("*"),function(e){return!!(e.hidden||/none|inline/.test(e.style.display)||/display: (none|inline)/.test(e.getAttribute("style")))||!n.includes(e.tagName.toLowerCase())&&!/display: (?!none|inline|inherit|unset)/.test(e.getAttribute("style"))&&(!!r.includes(e.tagName.toLowerCase())||(t.push(e),!0))})&&t.every(function(e){return window.getComputedStyle(e).display.includes("inline")})},transitionReplace:function(t,n,r){var a=t.closest("tw-hook");a.length>0&&(t=a);var i=e("<tw-transition-container>").css("position","relative");i.insertBefore(t.first());var o=void 0;n&&(o=e("<tw-transition-container>").appendTo(i),n.appendTo(o));var s=e("<tw-transition-container>").css("position","absolute").prependTo(i);t.detach().appendTo(s),v.transitionOut(s,r),n&&v.transitionIn(o,r,function(){o.unwrap().children().first().unwrap()})},transitionOut:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;0!==e.length&&(n=n||l(t),(e.length>1||!v.childrenProbablyInline(e)||!["tw-hook","tw-passage","tw-expression"].includes(e.tag()))&&(e=e.wrapAll("<tw-transition-container>").parent()),o&&e.css("transform-origin",o),e.attr("data-t8n",t).addClass("transition-out").css({"animation-duration":n+"ms","animation-delay":r-i+"ms"}),requestAnimationFrame(function(){v.childrenProbablyInline(e)?e.css("display","inline"):e.parent().is("tw-backdrop,tw-story")||e[0].setAttribute("style",e[0].getAttribute("style")+"display:block !important;width:100%")}),b(e,n,r-i,a,function(){e.remove()}))},transitionIn:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(0!==t.length){r=r||l(n);var u=t.length>1||!v.childrenProbablyInline(t)||!["tw-hook","tw-passage","tw-expression"].includes(t.tag());u&&(t=t.wrapAll("<tw-transition-container>").parent()),c&&t.css("transform-origin",c),t.attr("data-t8n",n).addClass("transition-in").css(Object.assign({"animation-duration":r+"ms","animation-delay":i-s+"ms"},i-s?{visibility:"hidden"}:{})),requestAnimationFrame(function(){v.childrenProbablyInline(t)?t.css("display","inline"):t.parent().is("tw-backdrop,tw-story")||t[0].setAttribute("style",t[0].getAttribute("style")+"display:block !important;width:100%")}),b(t,r,i-s,o,function(n){var r=0===t.filter(a.join(",")).length;u&&r?(t.find("tw-transition-container").each(function(t,r){(r=e(r)).css("animation-delay",v.cssTimeUnit(r.css("animation-delay")||0)-n+"ms")}),t.contents().unwrap()):t.removeClass("transition-in").removeAttr("data-t8n")})}},debounce:function(e){var t=void 0,n=void 0,r=0,a=function a(){Date.now()-r>300?(t=0,e.apply(void 0,_toConsumableArray(n))):t=requestAnimationFrame(a)};return function(){r=Date.now(),n=arguments,t&&cancelAnimationFrame(t),t=requestAnimationFrame(a)}},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},assertMustHave:function(e,t){if(window.console)for(var n=0;n<t.length;n+=1)t[n]in e||console.error("Assertion failed: object lacks property "+t[n])},assertOnlyHas:function(e,t){if(window.console)for(var n in e)t.includes(n)||console.error("Assertion failed: object had unexpected property '"+n+"'!")},onStartup:function(e){f?f.push(e):e()},get storyElement(){return p}},e(function(){p=e("tw-story"),f.forEach(function(e){return e()}),f=null}),Object.freeze(v)}),define("utils/naturalsort",[],function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String;return function(n,r){var a,i,o,s,c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,p=/^0/,f=t(n).trim(),d=t(r).trim(),h=f.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=d.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(f.match(l))||1!==h.length&&f.match(u)&&Date.parse(f),g=parseInt(d.match(l))||m&&d.match(u)&&Date.parse(d)||null;if(e&&window.Intl&&window.Intl.Collator&&(o=window.Intl.Collator(e)),g){if(m<g)return-1;if(m>g)return 1}for(var v=0,b=Math.max(h.length,y.length);v<b;v++){if(a=!(h[v]||"").match(p)&&parseFloat(h[v])||h[v]||0,i=!(y[v]||"").match(p)&&parseFloat(y[v])||y[v]||0,isNaN(a)!==isNaN(i))return isNaN(a)?1:-1;if((void 0===a?"undefined":_typeof(a))!==(void 0===i?"undefined":_typeof(i)))a+="",i+="";else if("string"==typeof a&&o&&0!==(s=o.compare(a,i)))return s;if(a<i)return-1;if(a>i)return 1}return 0}}}),define("twinescript/compiler",["utils"],function(e){var t=e.impossible,n=JSON.stringify;function r(e,t){for(var n=0;n<e.length;n+=1)if(t.includes(e[n].type))return n;return NaN}function a(e,t){var n=[];return e.length?([["error"],["comma"],["to","into"],["where","when","via"],["making","each"],["typeSignature"],["augmentedAssign"],["and","or"],["is","isNot"],["contains","doesNotContain","isIn","isNotIn"],["isA","isNotA","matches","doesNotMatch"],["inequality"],["addition","subtraction"],["multiplication","division"],{rightAssociative:["spread","bind"]},{rightAssociative:["not","positive","negative"]},{rightAssociative:["belongingProperty","belongingItProperty","belongingOperator","belongingItOperator"]},["property","itsProperty","possessiveOperator","itsOperator"],["twineLink"],["macro"],["grouping"]]["most"===t?"reverse":"valueOf"]().some(function(t){var a=void 0;if(a=t.rightAssociative?r(e,t.rightAssociative):function(e,t){return e.length-1-r.apply(void 0,[[].concat(_toConsumableArray(e)).reverse(),t])}(e,t),!Number.isNaN(a)&&a>-1)return n=[e[a],a],!0}),n):n}function i(e){if("inequality"===e.type){var t=e.operator;return e.negate?{">":"<=","<":">=",">=":"<","<=":">"}[t]:t}return e.type}function o(e){var t=i(e);return{">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",doesNotContain:"isNotIn",isIn:"contains",isA:"typifies",typifies:"isA",isNotA:"untypifies",untypifies:"isNotA"}[t]||t}var s=["inequality","is","isNot","isIn","contains","doesNotContain","isNotIn","isA","typifies","isNotA","untypifies","matches","doesNotMatch"];function c(e,t,r){return"TwineError.create("+n(e)+","+n(t)+","+n(r)+")"}return function e(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=u.isVarRef,p=u.isTypedVar,f=u.whitespaceError,d=u.elidedComparison,h=u.testNeedsRight,y="Operations.Identifiers.it";if(!(r=[].concat(r)).length)return l&&f?c("operation",f):"";var m=void 0;if(1===r.length){var g=(m=r[0]).type;if("identifier"===g)return l?"VarRef.create(Operations.Identifiers,"+n(m.text)+")":"Operations.Identifiers."+m.text.toLowerCase()+" ";if("variable"===g||"tempVariable"===g){var v="VarRef.create("+("tempVariable"===g?"section.stackTop.tempV":"State.v")+"ariables,"+n(m.name)+")"+(l||p?"":".get()");return p?"TypedVar.create(Datatype.create('any'),"+v+")":v}if("hookName"===g)return"HookSet.create({type:'name', data:'"+m.name+"'}) ";if("string"===g)return m.text.replace(/(.?)\n/g,function(e,t){return("\\"===t?"\\\\":"\n"===t?"\\n":t)+"\\n"});if("hook"===g)return"CodeHook.create("+n(m.text.slice(1,-1))+","+n(m.html||"")+")";if("colour"===g)return"Colour.create("+n(m.colour)+")";if("datatype"===g)return"Datatype.create("+n(m.name)+")";if("blockedValue"===g)return"section.blockedValue()";if("root"===g)return e(m.children);if("whitespace"===g&&l&&f)return c("operation",f)}var b,w=a(r,"least"),T=_slicedToArray(w,2);m=T[0],b=T[1];var S=(m||{}).type,x=r.slice(0,b),k=r.slice(b+1),O=function(e,t){return{isVarRef:!0,isTypedVar:t,whitespaceError:"I need usable data to be on the "+e+' of "'+m.text+'".'}},j="must",A="mustn't",C="may",E=void 0,_=void 0,N="",P="",I="",M=j,D=j,R=!1;if(S)if("comma"===S)P=",",D=C;else if("spread"===S)N="Operations.makeSpreader(",I=")",M=C;else if("bind"===S)N="VarBind.create(",_=e(k,O("right")),I=(m.text.startsWith("2")?",'two way'":"")+")",M=A;else if("to"===S)N="Operations.makeAssignmentRequest(Operations.setIt(",_=e(k,O("right")),P="),",E=e(x,O("left",!0)),I=",'to')";else if("into"===S)N="Operations.makeAssignmentRequest(",_=e(x,O("left")),P=",Operations.setIt(",E=e(k,O("right",!0)),I="),'into')";else if("typeSignature"===S)N="TypedVar.create(",P=",",_=e(k,O("right")),I=")",p=!1;else if("where"===S||"when"===S||"via"===S)N="Lambda.create(",E=e(x,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",P=","+n(m.type)+",",_=n(e(k)),I=","+n(r.map(function(e){return e.text}).join(""))+")";else if("making"===S||"each"===S)"each"===S?(N="Lambda.create(",_=e(k,O("right")).trim(),I=",'where','true',"+n(r.map(function(e){return e.text}).join(""))+")",M=C):(N="Lambda.create(",E=e(x,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",P=","+n(m.type)+",",_=e(k,O("right")).trim(),I=","+n(r.map(function(e){return e.text}).join(""))+")");else if("augmentedAssign"===S)N="Operations.makeAssignmentRequest(",E=e(x,O("left")),P=",",_="Operations["+n(m.operator)+"]("+e(x)+","+e(k)+")",I=","+n(m.operator)+")";else if("and"===S||"or"===S){var L=function e(t){var n=a(t,"least"),r=_slicedToArray(n,2),i=r[0],o=r[1];if(i)return s.includes(i.type)?i:["and","or"].includes(i.type)?e(t.slice(0,o))||e(t.slice(o+1)):void 0},F=L(x),q=L(k),V=c("operation",'This use of "is not" and "'+S+'" is grammatically ambiguous.','Maybe try rewriting this as "__ is not __ '+S+' __ is not __"');if(N="Operations."+S+"(",P=",",I=")",d===m.type)N=I="",E=e(x,{isVarRef:l,elidedComparison:d}).trim(),_=e(k,{elidedComparison:d}).trim();else if(F&&!q){var H=F,z=n(i(H));if("isNot"===H.type||"isNotA"===H.type||"untypifies"===H.type)return V;_="Operations.elidedComparisonOperator("+n(m.type)+","+z+","+e(k,{elidedComparison:S})+")"}else if(!F&&q){var W=q,$=r.indexOf(W),B=n(o(W));if("isNot"===W.type||"isNotA"===W.type||"untypifies"===W.type)return V;_="Operations.elidedComparisonOperator("+n(m.type)+","+B+","+e(x,{elidedComparison:S})+")",E=e([].concat(_toConsumableArray(r.slice($+1)),[Object.assign(Object.create(W),_defineProperty({},"inequality"===W.type?"operator":"type",o(W)))],_toConsumableArray(r.slice(b+1,$))))}l=!1}else if(s.includes(S))R=!0,l=!1,N="Operations["+n(i(m))+"](",P=",",I=")";else if("addition"===S||"subtraction"===S){if(!e(x,{testNeedsRight:!0}).trim())return m.type={addition:"positive",subtraction:"negative"}[S],e(r,{isVarRef:l,whitespaceError:f,elidedComparison:d,testNeedsRight:h});l=!1,N="Operations["+n(m.text)+"](",P=",",I=")"}else if("multiplication"===S||"division"===S)l=!1,N="Operations["+n(m.text)+"](",P=",",I=")";else if("positive"===S||"negative"===S)l=!1,E="negative"===S?"-1":"1",N="Operations['*'](",P=",",I=")";else if("not"===S)N="Operations.not(",_=e(k),I=")",M=C;else if("belongingProperty"===S)N="VarRef.create(",_=e(k,O("right")),I=","+n(m.name)+")"+(l?"":".get()"),M=C;else if("belongingOperator"===S||"belongingItOperator"===S)E=m.type.includes("It")?y:e(k,O("right")),_=e(x),N="VarRef.create(",P=",{computed:true,value:",I="})"+(l?"":".get()");else if("property"===S)N="VarRef.create(",E=e(x,O("left")),I=","+n(m.name)+")"+(l?"":".get()"),D=C;else if("itsProperty"===S||"belongingItProperty"===S)N="VarRef.create(",E=y,I=","+n(m.name)+")"+(l?"":".get()"),M=D=C;else if("possessiveOperator"===S||"itsOperator"===S)m.type.includes("it")&&(E=y,M=C),N="VarRef.create(",P=",{computed:true,value:",I="})"+(l?"":".get()"),p=!1;else if("twineLink"===S)P='Macros.run("link-goto", [section,'+n(m.innerText)+","+n(m.passage)+"])",M=D=A;else if("macro"===S){var U=m.children[0],G="$"===U.text[0]||"_"===U.text[0];"macroName"===U.type||G||t("Compiler.compile","macro token had no macroName child token"),P="Macros.run"+(G?"Custom":"")+"("+(G?"VarRef.create("+("_"===U.text[0]?"section.stackTop.tempV":"State.v")+"ariables,"+n(U.text.trim().slice(1,-1))+").get()":'"'+m.name+'"')+", [section,"+e(m.children.slice(1),{isTypedVar:p})+"])",M=D=A}else if("grouping"===S)P="("+e(m.children,{isVarRef:l})+")",M=D=A;else if("error"===S)return c("syntax",n(m.message),m.explanation?n(m.explanation):"");return b>-1?(E=(E||e(x,{isVarRef:l,isTypedVar:p})).trim(),_=(_||e(k)).trim(),R&&!E&&(E=y),M===j&&!E||D===j&&!_?h&&D&&!_?"":c("operation","I need usable code to be "+(M===j?"left ":"")+(M===j&&D===j?"and ":"")+(D===j?"right ":"")+"of "+m.text+"."):M===A&&E||D===A&&_?c("operation","There can't be a "+(E&&M===A&&_&&D===A?E+" or "+_:E&&M===A?E:_)+" to the "+(M===A?"left ":"")+(M===A&&D===A?"or ":"")+(D===A?"right ":"")+"of "+m.text+".","There could be a comma missing between them, or there could be a "):N+E+P+_+I):1===r.length?(("value"in r[0]?r[0].value:r[0].text)+"").trim()||" ":r.reduce(function(t,n){return t+e(n,{isVarRef:l,isTypedVar:p})},"")}}),define("internaltypes/twineerror",["jquery","utils"],function(e,t){var n=t.impossible,r=t.escape;e(document.documentElement).on("click","tw-folddown",function(t){var n=t.target;for((n=e(n)).toggleClass("open");n&&!n.next().length;)n=n.parent();n&&n.next().toggle()});var a={syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",custommacro:"I tried to use a custom macro, but its code hook had a mistake in it.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",javascript:"This error message was reported by your browser's Javascript engine. I don't understand it either, but it usually means that an expression was badly written.",propagated:"Click the 'Open' button to see the code hook as it was executed.",user:"This is a custom error created by (error:). It usually means you used a custom macro incorrectly.",assertion:"This command exists to provide a helpful error if a certain important condition wasn't true."},i={error:[],warning:[]},o={create:function(e,t,r,i){return t&&"string"==typeof t||n("TwineError.create","has a bad message string"),r||e in a||n("TwineError.create","no error explanation given"),"user"!==e&&(t=t[0].toUpperCase()+t.slice(1)),Object.assign(Object.create(this),{type:e,message:t,explanation:r,source:void 0,innerDOM:i,appendTitleText:!1})},fromError:function(e){return o.create("javascript","\u2615 "+e.message)},containsError:function(){for(var e=0;e<arguments.length;e+=1){var t=arguments.length<=e?void 0:arguments[e];if(t instanceof Error)return t;if(o.isPrototypeOf(t))return t;if(Array.isArray(t)){var n=o.containsError.apply(o,_toConsumableArray(t));if(n)return n}}return!1},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(n){var o=this;n=n||this.source||"";var s=e("<tw-error class='"+("javascript"===this.type?"javascript ":"")+(this.warning?"warning":"error")+"' title='"+r(n)+"'>"+r(this.message+(this.appendTitleText?" "+n:""))+"</tw-error>"),c=e("<tw-error-explanation>").text(this.explanation||a[this.type]).hide(),u=e("<tw-folddown tabindex=0>");return this.innerDOM&&e("<tw-open-button>").on("click",function(){var n=e("<tw-backdrop><tw-dialog></tw-backdrop>");n.find("tw-dialog").prepend(o.innerDOM,e("<tw-link tabindex=0>OK</tw-link>").on("click",function(){o.innerDOM.detach(),n.remove()}).wrap("<tw-dialog-links>").parent()),t.storyElement.prepend(n)}).appendTo(s),s.append(u).append(c),s.data("TwineError",this),i.error.forEach(function(e){return e(o,n)}),s},on:function(e,t){if(e in i)return"function"!=typeof t||i[e].includes(t)||i[e].push(t),o;n("TwineError.on","invalid event name")}};return o}),define("renderer",["utils","markup","twinescript/compiler","internaltypes/twineerror"],function(e,t,n,r){var a=e.escape,i=e.impossible,o=e.insensitiveName,s=void 0;function c(e,t){return"<"+t+">"+e+"</"+t+">"}function u(e,t){var n=s.render(e.children);return n&&c(n,t)}var l,p,f="text-align: center; max-width:50%; ",d=RegExp(t.Patterns.macroFront+t.Patterns.macroName,"ig");return s={options:{debug:!1,blockerMacros:[],metadataMacros:[]},preprocess:function(e){var a=s.options.metadataMacros;if(!(e.match(d)||[]).some(function(e){return a.some(function(t){return o(e.slice(1,-1))===t})}))return{};var i=!1,c={};return t.lex(e).children.forEach(function e(t){if("macro"===t.type){if(a.some(function(e){return t.name===e})){if(r.isPrototypeOf(c[t.name]))return;if(i)return void(c[t.name]=r.create("syntax","The ("+t.name+":) macro can't appear after non-metadata macros."));if(c[t.name])return void(c[t.name]=r.create("syntax","There is more than one ("+t.name+":) macro."));c[t.name]={code:n(t),source:t.text}}else i=!0;t.children.forEach(function e(t){"macro"===t.type&&a.some(function(e){return t.name===e})?c[t.name]=r.create("syntax","The ("+t.name+":) macro can't be inside another macro."):t.children.forEach(e)})}else t.children.forEach(e)}),c},exec:(l=void 0,p=void 0,function(e){return"string"!=typeof e?(i("Renderer.exec","source was not a string, but "+(void 0===e?"undefined":_typeof(e))),""):e===l?p:(l=e,p=s.render(t.lex(e).children))}),render:function e(i){var l="",p=[];if(!i)return l;for(var d=i.length,h=0;h<d;h+=1){var y=i[h];switch(y.type){case"error":l+=r.create("syntax",y.message,y.explanation).render(a(y.text))[0].outerHTML;break;case"numbered":case"bulleted":var m="numbered"===y.type?"ol":"ul";l+="<"+m+">";for(var g=1;h<d&&i[h];){if("br"===i[h].type){if(l+="</li>",!i[h+1]||i[h+1].type!==y.type)break}else i[h].type===y.type?(l+=("<"+m+">").repeat(Math.max(0,i[h].depth-g)),l+=("</"+m+">").repeat(Math.max(0,g-i[h].depth)),l+="<li>",g=i[h].depth):l+=e([i[h]]);h+=1}l+=("</"+m+">").repeat(g+1);break;case"align":for(;y&&"align"===y.type;){var v=y.align,b=h+=1;if("left"===v){h-=1;break}for(;h<d&&i[h]&&"align"!==i[h].type;)h+=1;var w=e(i.slice(b,h)),T="";switch(v){case"center":T+=f+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":T+="text-align: "+v+";";break;default:+v&&(T+=f+"margin-left: "+v+"%;")}l+="<tw-align "+(T?'style="'+T+'"':"")+">"+w+"</tw-align>\n",y=i[h]}break;case"column":for(var S=[];y&&"column"===y.type;){var x=y.column,k=h+=1;if("none"===x){h-=1;break}for(;h<d&&i[h]&&"column"!==i[h].type;)h+=1;S.push({text:y.text,type:x,body:e(i.slice(k,h)),width:y.width,marginLeft:y.marginLeft,marginRight:y.marginRight}),y=i[h]}S.length&&function(){var e=S.reduce(function(e,t){return e+t.width},0);l+="<tw-columns>"+S.map(function(t){return"<tw-column type="+t.type+'  style="width:'+t.width/e*100+"%; margin-left: "+t.marginLeft+"em; margin-right: "+t.marginRight+'em;">'+t.body+"</tw-column>\n"}).join("")+"</tw-columns>"}();break;case"heading":for(l+="<h"+y.depth+">";++h<d&&i[h];){if("br"===i[h].type){l+="</h"+y.depth+">";break}l+=e([i[h]])}break;case"br":if(!p.length||/td|th/.test(p[0])){l+="<br>";for(var O=i[h+1];O&&("br"===O.type||"tag"===O.type&&/^<br\b/i.test(O.text));)l+="<tw-consecutive-br"+("tag"===O.type?" data-raw":"")+"></tw-consecutive-br>",O=i[(h+=1)+1]}break;case"hr":l+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":l+='<a class="link" href="'+a(y.text)+'">'+y.text+"</a>";break;case"scriptStyleTag":case"tag":var j=y.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th)\b/.test(j)&&p[y.text.startsWith("</")?"shift":"unshift"](j),l+=y.text.startsWith("</")?y.text:y.text.replace(/>$/," data-raw>");break;case"sub":case"sup":case"strong":case"em":l+=u(y,y.type);break;case"strike":l+=u(y,"s");break;case"bold":l+=u(y,"b");break;case"italic":l+=u(y,"i");break;case"twineLink":var A=_slicedToArray(t.lex("(link-goto:"+JSON.stringify(y.innerText)+","+JSON.stringify(y.passage)+")").children,1)[0];l+='<tw-expression type="macro" name="link-goto"'+(s.options.debug?' title="'+a(y.text)+'"':"")+' js="'+a(n(A))+'"></tw-expression>';break;case"hook":l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+(s.options.debug&&y.name?' title="Hook: ?'+y.name+'"':"")+' source="'+a(y.innerText)+'"></tw-hook>';break;case"unclosedHook":return l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+'source="'+a(i.slice(h+1,d).map(function(e){return e.text}).join(""))+'"></tw-hook>';case"verbatim":l+=c(a(y.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":l+=u(y,"tw-collapsed");break;case"unclosedCollapsed":return l+="<tw-collapsed>"+e(i.slice(h+1,d))+"</tw-collapsed>";case"variable":case"tempVariable":case"macro":var C=function(){var t=[],i=[];if("macro"===y.type&&function n(r){"string"!==r.type&&"hook"!==r.type&&r.children.every(n);var a=r.firstChild();if("macro"===r.type&&a&&"macroName"===a.type&&s.options.blockerMacros.includes(o(a.text.slice(0,-1))))t.push(r);else if("hook"===r.type){if(!r.everyLeaf(function(e){return"error"!==e.type||(i.push(e),!1)}))return!1;r.html=e(r.children)}return!0}(y),i.length)return{v:r.create("syntax","This code hook's markup contained "+i.length+" error"+(i.length?"s":"")+":<br>\u2014"+i.map(function(e){return e.message}).join("<br>\u2014")).render(a(y.text))[0].outerHTML};var c=t.length&&t.map(function(e){var t=n(e);return e.type="blockedValue",t});l+='<tw-expression type="'+y.type+'" name="'+a(y.name||y.text)+'"'+(s.options.debug?' title="'+a(y.text)+'"':"")+(t.length?' blockers="'+a(JSON.stringify(c))+'"':"")+' js="'+a(n(y))+'"></tw-expression>',t.forEach(function(e){return e.type="macro"})}();if("object"===(void 0===C?"undefined":_typeof(C)))return C.v;break;default:l+=y.children&&y.children.length?e(y.children):y.text}}return l}},Object.freeze(s)}),define("passages",["jquery","utils/naturalsort","utils","markup","renderer","internaltypes/twineerror"],function(e,t,n,r,a,i){var o=n.unescape,s=n.onStartup,c=Object.assign;function u(e){var t=o(e.html()),n=a.preprocess(t);return c(new Map([["source",t],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",e.attr("name")]]),{TwineScript_TypeName:"a passage datamap",TwineScript_ObjectName:"a passage datamap",metadata:n})}var l=c(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(e){var n=t("en",function(e){return e.get("name")}),r=[];return this.forEach(function(t){var n=t instanceof Map&&t.get("tags");Array.isArray(n)&&n.includes(e)&&r.push(t)}),r.sort(n)},getStorylets:function(e,n){var r=n?n.filter(e,[].concat(_toConsumableArray(l.values()))):[].concat(_toConsumableArray(l.values()));if(i.containsError(r))return r;var a=[],o=-1/0,s=r.reduce(function(t,n){if(t)return t;var r=n.get("storylet");if(r){var s=e.speculate(r,n.get("name"),"a (storylet:) macro");if(i.containsError(s))return s.message="There's an error in the storylet passage \""+n.get("name")+'":\n'+s.message,s.source=r.TwineScript_ToSource(),s;if(s){var c=n.get("exclusivity");o=Math.max(o,"number"==typeof c?c:0),a.push(n)}}},void 0);if(s)return s;var c=t("en");return a.filter(function(e){var t=e.get("exclusivity");return(t="number"==typeof t?t:0)===o}).sort(function(e,t){var n=e.get("urgency"),r=t.get("urgency");return(n="number"==typeof n?n:0)!==(r="number"==typeof r?r:0)?r-n:c(e.get("name"),t.get("name"))})},allStorylets:function(){return[].concat(_toConsumableArray(l.values())).filter(function(e){return e.get("storylet")})},loadMetadata:function(e){var t=[];return l.forEach(function(n){n.metadata&&Object.keys(n.metadata).forEach(function(r){if(i.containsError(n.metadata[r]))t.push(n.metadata[r]);else{var a=n.metadata[r],o=a.code,s=a.source,c=e.speculate(o,n.get("name"),"a ("+r+":) macro"),u='In "'+n.get("name")+'":\n';if(i.containsError(c))return c.message=u+c.message,c.source=s,void t.push(c);c instanceof Map?c.forEach(function(e,t){return l(t,e)}):l(r,c)}function l(e,r){n.has(e)?t.push(i.create("syntax","This passage's datamap already has a '"+JSON.stringify(e)+"' data name.")):n.set(e,r)}}),n.metadata=void 0}),t},hasValid:function(e){var t=this.get(e);return t&&t instanceof Map&&t.has("source")},create:u});return s(function(){Array.from(e("tw-storydata > tw-passagedata")).forEach(function(t){t=e(t),l.set(t.attr("name"),new u(t))})}),l}),define("utils/operationutils",["utils/naturalsort","utils","internaltypes/twineerror","patterns"],function(e,t,n,r){var a=t.impossible,i=t.nth,o=t.insensitiveName,s=t.permutations,c=r.validPropertyName,u="object",l="boolean",p="string",f="number",d="function";function h(e){return!!e&&((void 0===e?"undefined":_typeof(e))===u||(void 0===e?"undefined":_typeof(e))===d)}function y(e){return e&&Object.getPrototypeOf(e)===Object.prototype}function m(e){return Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":(void 0===e?"undefined":_typeof(e))===p?p:e&&(void 0===e?"undefined":_typeof(e))===u?u:""}function g(e){if(!h(e))return e;if(_typeof(e.TwineScript_Clone)===d)return e.TwineScript_Clone();if(Array.isArray(e))return[].concat(_toConsumableArray(e));if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if((void 0===e?"undefined":_typeof(e))===d)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return Object.assign({},e);case null:return Object.assign(Object.create(null),e)}return a("OperationUtils.clone","The value "+e+" cannot be cloned!"),e}function v(e){return h(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:Array.isArray(e)?"an array":e instanceof Map?"a datamap":e instanceof Set?"a dataset":(void 0===e?"undefined":_typeof(e))===l?"the boolean value '"+e+"'":(void 0===e?"undefined":_typeof(e))===p||(void 0===e?"undefined":_typeof(e))===f?"the "+(void 0===e?"undefined":_typeof(e))+" "+JSON.stringify(e):void 0===e?"an empty variable":"...whatever this is"}function b(e,t){return(void 0===e?"undefined":_typeof(e))!==u&&(void 0===t?"undefined":_typeof(t))!==u?e===t:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return b(t[n],e)}):e instanceof Map&&t instanceof Map?b(Array.from(e.entries()).sort(),Array.from(t.entries()).sort()):e instanceof Set&&t instanceof Set?b([].concat(_toConsumableArray(e)),[].concat(_toConsumableArray(t))):e&&_typeof(e.TwineScript_is)===d?e.TwineScript_is(t):e&&(void 0===e?"undefined":_typeof(e))===u&&t&&(void 0===t?"undefined":_typeof(t))===u&&y(e)&&y(t)?b(Object.getOwnPropertyNames(e).map(function(t){return[t,e[t]]}),Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]})):Object.is(e,t)}return Object.freeze({isObject:h,isPureObject:y,singleTypeCheck:function e(t,n){if(null===n)return void 0===t;var r=void 0===t?"undefined":_typeof(t);if((void 0===n?"undefined":_typeof(n))!==d&&n.pattern){if("optional"===n.pattern||"zero or more"===n.pattern)return void 0===t||e(t,n.innerType);if("either"===n.pattern)return n.innerType.some(function(n){return e(t,n)});if("lambda"===n.pattern&&e(t,n.innerType))return n.clauses.includes("where")==="where"in t&&n.clauses.includes("making")==="making"in t&&n.clauses.includes("via")==="via"in t&&n.clauses.includes("with")==="with"in t;if("insensitive set"===n.pattern)return n.innerType.includes(o(t));if("range"===n.pattern)return n.range(t);if("wrapped"===n.pattern)return e(t,n.innerType)}return(void 0===n||void 0!==t)&&("anything"===n.TwineScript_TypeName&&void 0!==t&&!t.TwineScript_Unstorable||"everything"===n.TwineScript_TypeName&&void 0!==t||(n===String?r===p:n===Boolean?r===l:n===parseInt?r===f&&!Number.isNaN(t)&&!(t+"").includes("."):n===Number?r===f&&!Number.isNaN(t):n===Array?Array.isArray(t):n===Map||n===Set?t instanceof n:Object.isPrototypeOf.call(n,t)))},isValidDatamapName:function(e,t){if(e instanceof Map||a("isValidDatamapName","called with non-Map"),n.containsError(t))return t;if((void 0===t?"undefined":_typeof(t))!==p&&(void 0===t?"undefined":_typeof(t))!==f)return n.create("property","Only strings and numbers can be used as data names for "+v(e)+", not "+v(t)+".");var r=(void 0===t?"undefined":_typeof(t))===p?+t:""+t;return!(!Number.isNaN(r)&&e.has(r))||n.create("property","You mustn't use both "+v(t)+" and "+v(r)+" as data names in the same datamap.")},collectionType:m,isSequential:function(e){return(void 0===e?"undefined":_typeof(e))===p||Array.isArray(e)||_typeof(e.hooks)===d},unstorableValue:function e(t){return t&&t.TwineScript_Unstorable&&t||Array.isArray(t)&&t.find(e)||t instanceof Map&&[].concat(_toConsumableArray(t.values())).find(e)||t instanceof Set&&[].concat(_toConsumableArray(t)).find(e)},clone:g,objectName:v,typeName:function e(t){var n=y(t);if(n&&t.innerType)return t.typeName?t.typeName:"insensitive set"===t.pattern?"a case-insensitive string name":"either"===t.pattern?(Array.isArray(t.innerType)||a("typeName",'"either" pattern had non-array inner type'),t.innerType.map(e).join(" or ")):"optional"===t.pattern?"(optional) "+e(t.innerType):e(t.innerType);if(n&&t.pattern&&"range"===t.pattern){if(t.name)return t.name;var r=t.min,i=t.max;return"a"+(r>0?" positive":"")+(t.integer?" whole":"")+" number"+(0===r?" between 0 and "+i:i<1/0?" up to "+i:"")}return t===String||t===Number||t===Boolean?"a "+_typeof(t()):t===parseInt?"a whole number":t===Map?"a datamap":t===Set?"a dataset":t===Array?"an array":h(t)&&"TwineScript_TypeName"in t?t.TwineScript_TypeName:v(t)},typeID:function(e){var t=void 0===e?"undefined":_typeof(e);return[l,p,f].includes(t)?t:Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":e.TwineScript_TypeID||""},toSource:function t(r,o){var s=n.containsError(r);return s&&a("toSource","received a TwineError: "+s.message),_typeof(r.TwineScript_ToSource)===d?r.TwineScript_ToSource():y(r)&&"first"in r&&"last"in r?(r.first<0?(-1!==r.first?i(-r.first):"")+"last":i(r.first+1))+"to"+(r.last<0?(-1!==r.last?i(-r.last):"")+"last":i(r.last+1)):Array.isArray(r)?"(a:"+("property"===o?r.map(function(e){return e+(e>0)}):r).map(t)+")":r instanceof Map?"(dm:"+Array.from(r.entries()).sort(function(t,n){return[t[0],n[0]].sort(e("en"))[0]===t[0]?-1:1}).map(function(e){return e.map(t)})+")":r instanceof Set?"(ds:"+Array.from(r).sort(e("en")).map(t)+")":(void 0===r?"undefined":_typeof(r))===f&&"property"===o?r<0?-1===r?"last":i(-r)+"last":i(r+1):(void 0===r?"undefined":_typeof(r))===p&&"property"===o?RegExp(c).test(r)?r:"("+JSON.stringify(r)+")":JSON.stringify(r)},is:b,contains:function(e,t){if(e||""===e){if((void 0===e?"undefined":_typeof(e))===p)return(void 0===t?"undefined":_typeof(t))!==p?n.create("operation",v(e)+" can only contain strings, not "+v(t)+"."):e.includes(t);if(Array.isArray(e))return e.some(function(e){return b(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return b(e,t)})}return n.create("operation",v(e)+" cannot contain any values, let alone "+v(t))},isA:function(e,t){return _typeof(t.TwineScript_IsTypeOf)===d?t.TwineScript_IsTypeOf(e):n.create("operation",'"is a" should only be used to compare type names, not '+v(t)+".")},matches:function e(t,r){var a=!1;if(t&&_typeof(t.TwineScript_IsTypeOf)===d){var i=t.TwineScript_IsTypeOf(r);if(n.containsError(i))return i;a|=i}if(r&&_typeof(r.TwineScript_IsTypeOf)===d){var o=r.TwineScript_IsTypeOf(t);if(n.containsError(o))return o;a|=o}if(a)return!0;if(Array.isArray(t)&&Array.isArray(r)){for(var c=0,u=0,l=!0;l&&c<t.length&&u<r.length;){var p=t[c],f=r[u];if(p.rest){for(;u<r.length&&e(p,f);)f=r[u+=1];c+=1}else if(f.rest){for(;c<t.length&&e(p,f);)p=t[c+=1];u+=1}else e(p,f)?(c+=1,u+=1):l=!1}return l&&c>=t.length&&u>=r.length}return t instanceof Map&&r instanceof Map?e(Array.from(t.entries()).sort(),Array.from(r.entries()).sort()):t instanceof Set&&r instanceof Set?(t=[].concat(_toConsumableArray(t)),s.apply(void 0,_toConsumableArray(r)).some(function(n){return e(t,n)})):b(t,r)},subset:function e(t,r,a){if(!r||!a)return n.create("macrocall","The sub"+m(t)+" index value must not be "+(r&&a)+".");var i=(void 0===t?"undefined":_typeof(t))===p;if(i&&(t=Array.from(t)),r<0&&(r=Math.max(0,t.length+r+1)),a<0&&(a=Math.max(0,t.length+a+1)),r>a)return e(arguments[0],a,r);var o=t.slice(r>0?r-1:r,a).map(g);return i?o.join(""):o},range:function e(t,n){if(t>n)return e(n,t);var r=[t];for(n-=t;n-- >0;)r.push(++t);return r},printBuiltinValue:function e(t){return n.containsError(t)?t:t&&_typeof(t.TwineScript_Print)===d?t.TwineScript_Print():t instanceof Map?(t=Array.from(t.entries()),n.containsError(t)?t:t.reduce(function(t,n){var r=_slicedToArray(n,2),a=r[0],i=r[1];return t+"<tr><td>`"+e(a)+"`</td><td>`"+e(i)+"`</td></tr>"},"<table class=datamap>")+"</table>"):t instanceof Set?Array.from(t.values()).map(e)+"":Array.isArray(t)?t.map(e)+"":t&&_typeof(t.jquery)===p?t:h(t)?n.create("unimplemented","I don't know how to print this value yet."):t+""},unique:function(e,t,n){return!n.slice(t+1).some(function(t){return b(e,t)})}})}),define("utils/renderutils",["jquery","utils","renderer"],function(e,t,n){var r=RegExp(t.realWhitespace+"+"),a=RegExp(t.realWhitespace+"+","g");function i(e,t,n){var r=e.textContent.length;if(!(t>=r)){var a=void 0,i=[a=0===t?e:e.splitText(t)];return n&&(n<=0&&(n=r-n),n<r&&i.push(a.splitText(n-t))),i}}var o,s=(o=void 0,function(){if(void 0!==o)return o;var t=e("<p>");return t[0].normalize?(t.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),o=1===t.contents().length):o=!1});var c="tw-collapsed,[collapsing=true]";var u=/^(=*)([^=]+)=*$/;return Object.freeze({dialog:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.section,i=r.parent,o=void 0===i?t.storyElement:i,s=r.cd,c=r.message,u=void 0===c?"":c,l=r.defaultValue,p=r.buttons,f=void 0===p?[{name:"OK",confirm:!0,callback:Object}]:p,d=e("<tw-backdrop><tw-dialog>"+(l||""===l?"<input type=text style='display:block;margin:0 auto'></input>\n":"")+"<tw-dialog-links>"+(f.length?f.reduce(function(e,t,n){var r=t.name;return e+"<tw-link style='margin:0 "+(n===f.length-1?"0 0 0.5em":0===n?"0.5em 0 0":"0.5em")+"' tabindex=0>"+r+"</tw-link>"},""):"<tw-link tabindex=0>"+f[0].name+"</tw-link>")+"</tw-dialog-links></tw-dialog></tw-backdrop>"),h=d.find("tw-dialog");if(o.append(d),a){a.renderInto(u,h,Object.assign({},s,{append:"prepend"}));var y=s&&s.transition&&d.find("tw-dialog > tw-transition-container");y&&y.length&&y.appendTo(d).append(h.prepend(y.contents().detach()))}else h.prepend(n.exec(u));if(l){var m=d.find("input").last();m.val(l).on("keypress",function(e){13===e.which&&(d.remove(),f.filter(function(e){return e.confirm}).forEach(function(e){return e.callback()}))}),setTimeout(function(){return m.focus()},100)}return f.reverse().forEach(function(t,n){e(d.find("tw-link").get(-n-1)).on("click",function(){d.remove(),t.callback()})}),d},realWhitespace:r,textNodeToChars:function(e){var t=[].concat(_toConsumableArray(e.textContent));return 1===t.length?[e]:t.reduce(function(e,t){return t.match(r)&&e.length&&e[e.length-1].match(r)?e[e.length-1]+=t:e.push(t),e},[]).reduce(function(t,n){var r=e;return n.length<e.textContent.length&&(e=e.splitText(n.length)),t.concat(r)},[])},findTextInNodes:function e(t,n){var r=[],a="",o=[];if(!t.length||!n)return o;for(;t.length>0;){r.push(t[0]),a+=t[0].textContent,t.shift();var s=a.indexOf(n);if(s>-1){for(var c,u=a.length-(s+n.length);s>=r[0].textContent.length;)s-=r[0].textContent.length,r.shift();if(1===r.length){var l=i(r[0],s,s+n.length);o.push(l[0]),l[1]&&t.unshift(l[1]);break}o.push(i(r[0],s,r[0].length)[0]),(c=o).push.apply(c,_toConsumableArray(r.slice(1,-1)));var p=i(r[r.length-1],0,r[r.length-1].textContent.length-u);o.push(p[0]),p[1]&&t.unshift(p[1]),o=o.filter(Boolean);break}}return[o].concat(_toConsumableArray(e(t,n)))},collapse:function(t){function n(t){return 0===e(this||t).parentsUntil(c).filter("tw-verbatim, tw-expression, [collapsing=false]").length}var r=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var a=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 4&t&&!(8&t)});return(a=a[a.length-1])||e(r)}(t);e(r).parents(c).length||(r=null);var i=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var a=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 2&t&&!(8&t)})[0];return a||e(r)}(t);e(i).parents(c).length||(i=null);var o="br:not([data-raw]),tw-consecutive-br:not([data-raw])";t.find(o).filter(n).replaceWith(document.createTextNode(" "));var u=(t=e(t.get().map(function(t){return e(t).filter(n).is(o)?e(document.createTextNode(" ")).replaceAll(t)[0]:t}))).textNodes(),l=0;u.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(a," ")," "!==t.textContent[0]||e&&e.textContent&&!(e.textContent.search(/\s$/)>-1)||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},r),[].concat(_toConsumableArray(u)).reverse().every(function(e){return!!n(e)&&(e.textContent.match(/^\s*$/)?(l+=e.textContent.length,e.textContent="",!0):(e.textContent=e.textContent.replace(/\s+$/,function(e){return l+=e.length,""}),!1))}),l>0&&i&&(u[u.length-1].textContent+=" "),t[0]&&s()&&t[0].normalize()},geomStringRegExp:u,geomParse:function(e){var t=e.length,n=u.exec(e)||[],r=_slicedToArray(n,3),a=r[0],i=r[1],o=r[2];return a?{marginLeft:i.length/t*100,size:o.length/t*100}:{marginLeft:0,size:0}}})}),define("datatypes/hookset",["jquery","utils","utils/renderutils","utils/operationutils"],function(e,t,n,r){var a=n.textNodeToChars,i=n.realWhitespace,o=n.findTextInNodes,s=r.toSource;function c(n){var r=n.dom,s=e();this.next&&(s=s.add(c.call(this.next,n)));var u=function(t,n){if(Array.isArray(n))return n.reduce(function(e,n){return e.add(t.get(n))},e());if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&"first"in n&&"last"in n){var r=n.first,o=n.last,s=t.length;r<0&&(r+=s),o<0&&(o+=s);for(var c=[t.get(r)];r!==o;)r+=Math.sign(o-r),c.push(t.get(r));return e(c)}if("string"==typeof n){if("chars"===n){var u=[],l=!0,p=!1,f=void 0;try{for(var d,h=t.textNodes(":not(tw-error, tw-error *)")[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=!0,g=!1,v=void 0;try{for(var b,w=a(y)[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var T=b.value;T.textContent.match(i)||u.push(T)}}catch(e){g=!0,v=e}finally{try{!m&&w.return&&w.return()}finally{if(g)throw v}}}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return e(u)}if("links"===n)return t.findAndFilter("tw-link, .enchantment-link");if("visited"===n)return t.findAndFilter("tw-link.visited");if("lines"===n){var S=t.findAndFilter("br:not(tw-sidebar *),tw-consecutive-br:not(tw-sidebar *)").get(),x=[[]];return t.textNodes(":not(tw-error, tw-error *):not(tw-sidebar, tw-sidebar *)").forEach(function(e){S.length&&2&e.compareDocumentPosition(S[0])&&(S.shift(),x.push([])),x[x.length-1]=x[x.length-1].concat(e)}),x=x.map(function(t){return t.map(function(n){for(var r=n.parentNode;e(r).textNodes().every(function(e){return t.includes(e)})&&!t.every(function(t){return e(r).has(t).length});){r=(n=r).parentNode}return n})}),e(x.map(function(t){return e(t).wrapAll("<tw-pseudo-hook>").parent()[0]}))}}return e(t.get(n))};if(this.selector){var l=void 0;if("string"===this.selector.type)l=function(t,n){var r=o(n.textNodes(),t),a=e();return r.forEach(function(t){a=a.add(e(t).wrapAll("<tw-pseudo-hook>").parent())}),a}(this.selector.data,r);else{if("base"===this.selector.type)return s.add(u(c.call(this.selector.data,n),this.property));var p=function(e){var n='tw-hook[name="'+(e=t.insensitiveName(e).replace(/"/g,"&quot;"))+'"],tw-enchantment[name="'+e+'"]';return n+={page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[e]||""}(this.selector.data);l=r.findAndFilter(p).add(r.parentsUntil(t.storyElement.parent())).filter(p)}s=this.property?s.add(u(l,this.property)):s.add(l)}return s}function u(e){if(!e)return[];var n=e.selector,r=e.property,a=e.next;return[JSON.stringify(["base"===n.type?u(n.data):t.insensitiveName(n.data),r])].concat(_toConsumableArray(u(a))).sort()}var l=Object.freeze({forEach:function(t,n){var r=c.call(this,t).each(function(t){n(e(this),t)});return t.dom.findAndFilter("tw-pseudo-hook").contents().unwrap(),r},hooks:function(e){return c.call(this,e)},get TwineScript_ObjectName(){return this.property||this.next?"a complex hook name":"?"+this.selector.data+" (a hook name)"},TwineScript_TypeID:"hookName",TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){var e="",n=this.selector,r=n.type,a=n.data;return"name"===r?a.match(RegExp("^"+t.anyRealLetter+"+$"))?e+="?"+a:e+="(hooks-named:"+JSON.stringify(a)+")":"string"===r?e+=JSON.stringify(a):"base"===r&&(e+=a.TwineScript_ToSource()+"'s "+s(this.property,"property")),this.next&&(e+=" + "+this.next.TwineScript_ToSource()),e},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return u(this)+""==u(e)+""},TwineScript_GetProperty:function(e){return l.create({type:"base",data:this},e,void 0)},TwineScript_Properties:["chars","links","lines","visited"],TwineScript_Clone:function(){return l.create(this.selector,this.property,this.next)},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object.assign(Object.create(this||l),{selector:Object.freeze(e),property:t,next:n})},from:function(e){return l.isPrototypeOf(e)||"string"==typeof e||t.impossible("HookSet.from() was given a non-HookSet non-string."),l.isPrototypeOf(e)?e:l.create({type:"string",data:e})}});return l}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset"],function(e,t,n,r){var a=t.assertOnlyHas,i=t.impossible,o=t.transitionIn,s=n.exec,c=Object.assign,u=Object.keys,l=Object.create,p=Object.seal,f=function(e){return e.split(/\n/g).reduce(function(e,t,n,r){var a=r.length;return e.concat(document.createTextNode(t),n!==a-1&&document.createElement(t.length?"br":"tw-consecutive-br"))},[])},d=void 0,h={source:"",appendSource:null,enabled:!0,enablers:null,verbatim:!1,target:null,append:"",newTargets:null,transition:"",transitionTime:null,transitionDeferred:!1,transitionDelay:0,transitionSkip:0,transitionOrigin:null,loopVars:null,styles:null,attr:null,data:null,innerEnchantments:null,section:null,timestamp:0,summary:function(){var e=this;return["source","appendSource","enabled","verbatim","target","append","newTargets","transition","transitionTime","transitionDeferred","transitionDelay","transitionSkip","transitionOrigin","innerEnchantments","enablers"].filter(function(t){return e.hasOwnProperty(t)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",u(this.loopVars).length&&"loopVars",u(this.data).length&&"data"].filter(Boolean))},create:function(e,t){var n=c(l(this),{attr:[].concat(this.attr||[]),styles:[].concat(this.styles||[]),loopVars:this.loopVars||{},data:this.data||{}},e);return t&&t.run(n),n},update:function(){var e=this,t=this.section,n=this.newTargets,a=this.transition,i=this.transitionDeferred,s=this.append,c=this.target;"function"==typeof c&&(c=c());var l=function(t){if(Array.isArray(e.styles)&&e.styles.length>0){var n=e.styles.reduce(function(e,t){return u(t).forEach(function(n){var r=t[n];e[+("function"==typeof r)].push(_defineProperty({},n,r))}),e},[[],[]]),r=_slicedToArray(n,2),a=r[0],i=r[1];a.forEach(function(e){return t.css(e)}),setTimeout(function(){i.forEach(function(e){return t.css(e)})})}e.attr&&e.attr.forEach(function(e){return t.attr(e)}),e.data&&t.data(e.data)};if(Array.isArray(n)&&n.length&&(c=n.map(function(e){return e.target})),[].concat(c).forEach(function(e){r.isPrototypeOf(e)?e.forEach(t,l):l(e)}),a&&!i&&!s){var p=c,f=void 0;do{!(f=p.data("timestamp"))&&(p=p.parent())}while(!f&&p.length);o(c,a,this.transitionTime,this.transitionDelay,this.transitionSkip,f?Date.now()-f:0,this.transitionOrigin)}},render:function(){var t=this,n=this.source,u=this.transition,l=this.transitionTime,p=this.transitionDeferred,y=this.enabled,m=this.enablers,g=this.data,v=this.section,b=this.newTargets,w=this.innerEnchantments,T=this.appendSource,S=this.target,x=this.target,k=this.append;if("function"==typeof S&&(S=S()),a(this,d),!k)return i("ChangeDescriptor.render","This doesn't have an 'append' method chosen."),e();if(m&&m.length){var O=m[0],j=O.descriptor,A=O.changer,C=j.render();if(A){var E=h.create({section:v,target:C});A.run(E),E.update()}return C}if(!y||void 0!==S.attr("hidden"))return h.create({target:S,attr:this.attr.filter(function(e){return!("style"in e)}),data:c({},g,{originalSource:n,hidden:!0})}).update(),e();if(Array.isArray(b)&&b.length&&(S=b),!S)return i("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),e();var _=e();if([].concat(S).filter(function(e){return!e.jquery}).map(function(e){var t=k,n=void 0;if(e.target&&e.append){var r=e;t=r.append,n=r.before,e=e.target}return{elements:e.hooks(v,x).filter(function(){return!(n&&1&this.compareDocumentPosition(document)&&2&this.compareDocumentPosition(x[0]))}),append:t}},[]).forEach(function(n){var r=n.elements,a=n.append;r.each(function(n,r){r=e(r),_=_.add(t.create({target:r,append:a,newTargets:null}).render()),r.filter("tw-pseudo-hook").contents().unwrap()})}),_.length||Array.isArray(S)||r.isPrototypeOf(S))return _;if(!(k in S)){if("replace"!==k)return i("ChangeDescriptor.render","The target doesn't have a '"+k+"' method."),e();S[0]instanceof Text?k="replaceWith":(S.empty(),k="append")}return S[0]instanceof Text&&("append"===k&&(k="after"),"prepend"===k&&(k="before")),_=e(n&&(this.verbatim?f(n):e.parseHTML(s(n),document,!0))),Array.isArray(T)&&T.forEach(function(n){var r=n.source,a=n.append,i=e(t.verbatim?f(r):e.parseHTML(s(r),document,!0));_="append"===a?_.add(i):"prepend"===a?i.add(_):i}),S[k](_.length?_:void 0),S.data("timestamp",Date.now()),this.update(),u&&!p&&o("replace"===k?S:_,u,l,this.transitionDelay,this.transitionSkip,this.expedite,this.transitionOrigin),w&&w.map(function(e){return e(S)}).forEach(function(e){return v.addEnchantment(e)}),_}};return d=u(h),p(h)}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r){var a=e.impossible,i=t.is,o=t.toSource,s={},c={TwineScript_TypeID:"changer",TwineScript_TypeName:"a changer",TwineScript_Print:function(){return"`[A ("+this.macroName+":) changer]`"},TwineScript_ToSource:function(){return"("+this.macroName+":"+("else"===this.name?"":this.params.map(o))+")"+(this.next?"+"+this.next.TwineScript_ToSource():"")},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(t)||a("ChangerCommand.create","params was not an array but "+t),Object.assign(Object.create(this),{macroName:e,params:t,next:n,TwineScript_ObjectName:"a ("+e+":) changer"})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){if(c.isPrototypeOf(e))return this.macroName===e.macroName&&i(this.params,e.params)&&i(this.next,e.next)},TwineScript_Clone:function(){for(var e=this.create(this.macroName,this.params,this.next),t=e;t.next;)t=t.next=t.next.TwineScript_Clone();return e},run:function(e){var t=s[this.macroName].apply(s,[e].concat(_toConsumableArray(this.params)));if(r.containsError(t))return t;this.next&&this.next.run(e)},register:function(e,t){s[e]=t}};return Object.freeze(c)}),define("state",["utils","passages","datatypes/changercommand","internaltypes/twineerror","utils/operationutils","markup","twinescript/compiler"],function(e,t,n,r,a,i,o){var s=e.impossible,c=a.objectName,u=a.toSource,l=i.lex,p=Object.assign,f=Object.create,d=Object.defineProperty;d(Map.prototype,"toJSON",{value:void 0}),d(Set.prototype,"toJSON",{value:void 0});var h=["localStorage","sessionStorage"].map(function(e){try{return!!window[e]&&(window[e].setItem("test","1"),window[e].removeItem("test"),!0)}catch(e){return!1}}),y=p(f(null),{TwineScript_ObjectName:"this story's variables",TwineScript_TypeDefs:f(null),TwineScript_VariableStore:!0,TwineScript_MockVisits:null}),m={passage:"",variables:y,create:function(e,t){var n=f(m);return n.passage=e||"",n.variables=p(f(this.variables),t),n}},g=[],v=-1,b=m.create(),w=void 0,T={forward:[],back:[],load:[]},S=void 0;function x(e){b=(g[v]||m).create(e),function(){if(S.hasSessionStorage){var e=S.serialise();if("string"==typeof e)try{sessionStorage.setItem("Saved Session",e)}catch(e){return}}}()}return S=p({get passage(){return b.passage},get variables(){return b.variables},get pastLength(){return v},get futureLength(){return g.length-1-v},get mockVisits(){return b.variables.TwineScript_MockVisits||[]},set mockVisits(e){b.variables.TwineScript_MockVisits=e},passageNameVisited:function(e){var n=0;if(!t.get(e))return 0;for(var r=0;r<=v;r++)n+=+(e===g[r].passage);return n},passageNameLastVisited:function(e){if(!t.get(e))return 1/0;if(e===b.passage)return 0;for(var n=v;n>0;n--)if(g[n].passage===e)return v-n+1;return 1/0},pastPassageNames:function(){for(var e=[],t=v-1;t>=0;t--)e.unshift(g[t].passage);return e},timelinePassageNames:function(){return g.map(function(e){return e.passage})},play:function(e){b||s("State.play","present is undefined!"),b.passage=e,g=g.slice(0,v+1).concat(b),v+=1,x(e),T.forward.forEach(function(t){return t(e)})},rewind:function(e){var t=1,n=!1;if(e)if("string"==typeof e){if((t=this.passageNameLastVisited(e))===1/0)return}else"number"==typeof e&&(t=e);for(;t>0&&v>0;t--)n=!0,v-=1;return n&&(x(g[v].passage),T.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);t>0&&g.length>0;t--)n=!0,v+=1;return n&&(x(g[v].passage),T.forward.forEach(function(e){return e(g[v].passage,"fastForward")})),n},on:function(e,t){if(e in T)return"function"!=typeof t||T[e].includes(t)||T[e].push(t),S;s("State.on","invalid event name")},reset:function(){g=[],v=-1,b=m.create(),w=void 0,T.load.forEach(function(e){return e(g)})},hasStorage:h[0],hasSessionStorage:h[1]},function(){function e(e,t){Object.keys(t).forEach(function(n){return!n.startsWith("TwineScript_")&&(t[n]=e.eval(o(l(t[n],0,"macro"))))})}return{serialise:function(){var e=g.slice(0,v+1),t=e.map(function(e){return Object.keys(e.variables).filter(function(t){return e.variables[t]&&(n=e.variables[t],a=void 0===n?"undefined":_typeof(n),!(!r.containsError(n)&&("function"==typeof n.TwineScript_ToSource||Array.isArray(n)||n instanceof Map||n instanceof Set||"string"===a||"number"===a||"boolean"===a||Object.isPrototypeOf.call(y.TwineScript_TypeDefs,n))));var n,a}).map(function(t){return[t,e.variables[t]]})});if(w||(w=t.reduce(function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1];return e||a&&[a,i,n+1]},void 0)),w){var n=_slicedToArray(w,3),a=n[0],i=n[1],o=n[2];return r.create("saving","The variable $"+a+" holds "+c(i)+" (which is, or contains, a complex data value) on turn "+o+"; the game can no longer be saved.")}try{return JSON.stringify(e,function(e,t){return this.TwineScript_VariableStore?"TwineScript_TypeDefs"===e?Object.keys(t).reduce(function(e,n){return e[n]=u(t[n]),e},{}):"TwineScript_MockVisits"===e?t:u(t):t})}catch(e){return!1}},deserialise:function(n,r){var a,i=void 0,o=y,s="The save data is unintelligible.";try{i=JSON.parse(r)}catch(e){return Error(s)}return Array.isArray(i)?(a=(i=i.map(function(r){if("object"!==(void 0===r?"undefined":_typeof(r))||!r.hasOwnProperty("passage")||!r.hasOwnProperty("variables"))return Error(s);if(!t.hasValid(r.passage))return Error("The data refers to a passage named '"+r.passage+"', but it isn't in this story.");if(r.variables=p(f(o),r.variables),Object.hasOwnProperty.call(r.variables,"TwineScript_TypeDefs")){var a=r.variables.TwineScript_TypeDefs=p(f(o.TwineScript_TypeDefs),r.variables.TwineScript_TypeDefs);try{e(n,a)}catch(e){return Error(s)}}try{e(n,r.variables)}catch(e){return Error(s)}return o=r.variables,p(f(m),r)})).find(function(e){return e instanceof Error}))?a:(g=i,T.load.forEach(function(e){return e(g)}),v=g.length-1,x(g[v].passage),!0):Error(s)}}}()),Object.seal(m),Object.freeze(S)}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset"],function(e,t,n,r,a){var i=n.impossible,o=n.andList,s=n.nth,c=r.is,u=r.isObject,l=r.toSource,p=r.isSequential,f=r.objectName,d=r.typeName,h=r.clone,y=r.isValidDatamapName,m=r.subset,g=r.collectionType,v=r.unstorableValue,b=r.matches,w=void 0,T=0,S={set:[],delete:[]},x="You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.) or slices ('1stTo2ndlast', '3rdTo5th'), ",k="You can't access the '0th' or '0thlast' position of ";function O(e,n){var r=void 0;if(t.containsError(n))return r;if(e instanceof Map&&(r=t.containsError(y(e,n))))return r;if(p(e)){var i=void 0;if("number"==typeof n){if(0===n)return t.create("property","You can't access elements at position 0 of "+f(e)+".","Only positive and negative position values exist.");n>0&&(n-=1)}else if("string"==typeof n&&(i=/^(\d+)(?:st|[nr]d|th)last$/i.exec(n))){if("0"===i[1])return t.create("property",k+f(e)+".");n=-i[1]}else if("string"==typeof n&&(i=/^(\d+)(?:st|[nr]d|th)$/i.exec(n))){if("0"===i[1])return t.create("property",k+f(e)+".");n=i[1]-1}else if("string"==typeof n&&(i=/^(?:(\d+)(?:st|[nr]d|th)(last)?|last)to(?:(\d+)(?:st|[nr]d|th)(last)?|last)$/i.exec(n))){var s=_slicedToArray(i,5),c=s[1],u=void 0===c?0:c,l=s[2],d=s[3],h=void 0===d?0:d;n={last:h=s[4]?-h:h-1,first:u=l?-u:u-1}}else if("last"===n)n=-1;else if("random"===n){if(!e.length)return t.create("property","I can't get a random value from "+f(e)+", because it's empty");n=Math.random()*Array.from(e).length|0}else{if(a.isPrototypeOf(e)&&!a.TwineScript_Properties.includes(n))return t.create("property",x+o(a.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if(!["length","any","all","start","end","random"].includes(n)&&!a.isPrototypeOf(e))return t.create("property",x+"'length', 'any', 'all', 'start', 'end', and 'random' of "+f(e)+", not "+f(n)+".")}}else if(e instanceof Set){if(!["length","any","all"].includes(n))return t.create("property","You can only get the 'length', 'any' and 'all' of "+f(e)+".","To check contained values, use the 'contains' operator.");"length"===n&&(n="size")}else{if(Array.isArray(e.TwineScript_Properties)&&!e.TwineScript_Properties.includes(n))return t.create("property","You can only get the "+o(e.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if("number"==typeof e||"boolean"==typeof e)return t.create("property","You can't get data values from "+f(e)+".")}return n}function j(e,t){return t-0<0&&Math.abs(t)<=e.length?e.length+(t-0):t}var A=/[^\x0000-\xFFFF]/,C=new Map;function E(e,t){if(void 0===e)return e;if(e instanceof Map||w.isPrototypeOf(e))return e.get(t);if(("any"===t||"all"===t||"start"===t||"end"===t)&&!e.TwineScript_VariableStoreName)return function(e,t){var n="'"+t+"' value"+("any"===t?"":"s")+" of ";return{determiner:t,array:[].concat(_toConsumableArray(e)),string:"string"==typeof e&&e,TwineScript_ObjectName:n+f(e),TwineScript_TypeName:n+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}}}(e,t);if("string"==typeof e)if(C.has(e))e=C.get(e);else if(A.test(e)){var n=[].concat(_toConsumableArray(e));C.set(e,n),e=n}else C.set(e,e);if(p(e)&&Number.isFinite(t)&&(t=j(e,t)),e.TwineScript_GetProperty)return e.TwineScript_GetProperty(t);var r=e[t];return"function"!=typeof r?r:void 0}function _(e){if(e.computed){var t=e.value;return w.isPrototypeOf(t)&&(t=t.get()),"string"==typeof t?"('"+t+"')":"("+t+")"}return"number"==typeof e?s(e):"'"+e+"'"}function N(n,r,i){if(n.TwineScript_VariableStore){if(n.TwineScript_TypeDefs&&r in n.TwineScript_TypeDefs){var o=n.TwineScript_TypeDefs[r];if("const"===o.name){if(void 0!==n[r])return t.create("operation","I can't alter "+(n===e.variables?"$":"_")+r+" because it's been restricted to a constant value.","This variable can't be changed for the rest of the story.")}else if(!b(o,i))return t.create("operation","I can't set "+(n===e.variables?"$":"_")+r+" to "+d(i)+" because it's been restricted to "+l(o)+"-type data.","You can restrict a variable or data name by giving a typed variable to (set:) or (put:).")}return!0}return Array.isArray(r)?r.map(function(e){return N(n,e)}):n instanceof Map?"string"==typeof r||t.create("operation",f(n)+" can only have string data names, not "+f(r)+"."):p(n)?["length","random","any","all","start","end"].includes(r)?t.create("operation","I can't forcibly alter the '"+r+"' of "+f(n)+".","start"===r||"end"===r?"Alter the values at actual positions, like 1st or 2ndlast, rather than just the '"+r+"'.":void 0):+r==(0|r)||t.create("property",f(n)+" can only have position keys ('3rd', '1st', (5), etc.), not "+_(r)+"."):n.TwineScript_Identifiers&&r in n?t.create("keyword","I can't alter the value of the '"+r+"' identifier.","You can only alter data in variables and hooks, not fixed identifiers."):t.create("operation","I can't modify "+f(n),n instanceof Set?"You should use an (array:) if you need to modify the data inside this dataset.":a.isPrototypeOf(n)?"You should alter hooks indirectly using macros like (replace:) or (enchant:).":void 0)}function P(e,t,n){var r=t;e instanceof Map?e.set(t,n):(p(e)&&(t=j(e,t)),e.TwineScript_Set?e.TwineScript_Set(t):e[t]=n),S.set.forEach(function(t){return t(e,r,n)})}function I(e,t){var n=t;p(e)&&(t=j(e,t)),Array.isArray(e)&&/^(?:[1-9]\d*|0)$/.exec(t)?e.splice(t,1):e instanceof Map||e instanceof Set?e.delete(t):delete e[t],S.delete.forEach(function(t){return t(e,n)})}function M(e){return Object.assign(Object.create(w),{error:e})}function D(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(r&&"object"===(void 0===r?"undefined":_typeof(r))&&"last"in r&&"first"in r){if(a.isPrototypeOf(n))return n.TwineScript_GetProperty(r);var s=r.first,c=r.last;return m(n,s+(s>=0),c+(c>=0))}if(Array.isArray(r))return a.isPrototypeOf(n)?n.TwineScript_GetProperty(r):r.map(function(e){return D(n,e,e)})["string"==typeof n?"join":"valueOf"]("");var u=E(n,r);if(void 0===u){if(n===e.variables)return T;if(n.TwineScript_VariableStore)return t.create("property","There isn't a temp variable named _"+i+" in this place.","Temp variables only exist inside the same passage and hook in which they're (set:).");if(Array.isArray(n)&&"number"==typeof r)return t.create("property","This array of "+n.length+" elements doesn't have a "+_(i)+" element.",n.length?"It contains: "+o(n.map(f))+".":"The array is empty.");var l=Array.from("function"==typeof n.keys&&n.keys());return t.create("property","I can't find a "+_(i)+" data name in "+f(n),n instanceof Map&&l.length?"Its names include: "+o(l)+".":void 0)}return u}function R(e,n){var r=this,a=this.compiledPropertyChain.reduce(function(e,t){var n=void 0;return n=0===e.length?r.object:D.apply(void 0,_toConsumableArray(e[e.length-1])),e.push([n,t])&&e},[]).reduceRight(e,n);return t.containsError(a)?a:void 0}return w=Object.freeze({get:function(){if(this.error)return this.error;for(var e=this.object,t=0;t<this.compiledPropertyChain.length-1;t+=1)e=D(e,this.compiledPropertyChain[t]);return D(e,this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},set:function(n){var r=this;return this.error?this.error:!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?R.call(this,function(n,a,i){var o,s=_slicedToArray(a,2),c=s[0],l=s[1];if(o=t.containsError(n,c,l)||t.containsError(N(c,l,n)))return o;var d;if(d=v(n))return t.create("operation",f(n)+" can't be stored"+(g(n)?" because it holds "+f(d)+".":""));if(i>0)c=h(c);else if(c.TwineScript_VariableStore&&c!==e.variables){for(var y=c;y.TwineScript_VariableStore&&!y.hasOwnProperty(l);)y=Object.getPrototypeOf(y);y.TwineScript_VariableStore&&(c=y)}if("string"==typeof c){if("string"!=typeof n)return t.create("datatype","I can't put this non-string value, "+f(n)+", in a string.");if(n.length!==(Array.isArray(l)?l.length:1))return t.create("datatype",f(n)+"is not the right length to fit into this string location.");c=[].concat(_toConsumableArray(c));var m=[].concat(_toConsumableArray(n));[].concat(l).forEach(function(e){0+e<0&&(e=c.length+(0+e)),c=[].concat(_toConsumableArray(c.slice(0,e)),[m.shift()],_toConsumableArray(c.slice(e+1)))}),c=c.join("")}else u(c)&&(void 0!==n.TwineScript_KnownName&&(n.TwineScript_KnownName=r.TwineScript_ObjectName),Array.isArray(l)&&p(n)?("string"==typeof n&&(n=[].concat(_toConsumableArray(n))),l.map(function(e,t){return[e,n[t]]}).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return P(c,n,r)})):P(c,l,n));return c},n):t.create("macrocall","I can't (set:) "+f(this)+", if the "+(f(this.object).match(/ (.+$)/)||["","value"])[1]+" isn't stored in a variable.","Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return this.error?this.error:R.call(this,function(e,n,r){var a,i=_slicedToArray(n,2),o=i[0],s=i[1];if(a=t.containsError(e,o,s)||t.containsError(N(o,s)))return a;if(r>0&&(o=h(o)),null===e){var c="string"==typeof o;c&&(o=[].concat(_toConsumableArray(o))),Array.isArray(s)?(p(o)&&(s=[].concat(_toConsumableArray(new Set(s)))).sort(function(e,t){return j(o,t)-j(o,e)}),s.forEach(function(e){return I(o,e)})):I(o,s),c&&(o=o.join(""))}else P(o,s,e);return o},null)},defineType:function(e){var n=this.object,r=this.compiledPropertyChain;if(!n||!n.TwineScript_VariableStore||1!==r.length||!n.TwineScript_TypeDefs)return t.create("unimplemented","I can only restrict the datatypes of variables, not data names or anything else.");var a=r[0];Object.hasOwnProperty.call(n,"TwineScript_TypeDefs")||(n.TwineScript_TypeDefs=Object.create(n.TwineScript_TypeDefs));var i=n.TwineScript_TypeDefs,o=i[a];if(o&&!c(o,e))return t.create("operation","I can't redefine the type of "+f(this)+" to "+(e.TwineScript_ObjectName||d(e))+", as it is already "+(o.TwineScript_ObjectName||d(o))+".");i[a]=e,"const"===e.name&&(n[a]=void 0)},matches:function(e,t){return this.object===e&&this.compiledPropertyChain[0]===t},getName:function(){return this.compiledPropertyChain[0]},create:function(e,n){var r=void 0;if(r=t.containsError(e))return M(r);if(n=[].concat(n),w.isPrototypeOf(e)){if(u(e.error))return e;n=e.propertyChain.concat(n),e=e.object}var a=function(e,n){return n.reduce(function(r,a,i){var o;return a.computed&&(a=a.value),w.isPrototypeOf(a)&&(a=a.get()),a=Array.isArray(a)?a.map(function(t){return O(e,t)}):O(e,a),(o=t.containsError(r,a))?o:(i<n.length-1&&(e=D(e,a)),r.push(a),r)},[])}(e,n);return(r=t.containsError(a))?M(r):Object.assign(Object.create(w),{object:e,propertyChain:n,compiledPropertyChain:a})},TwineScript_ToSource:function(){var t=this,n=function(e,n){return!n&&t.object.TwineScript_VariableStore?e:_(e)};return(this.object===e.variables?"$":this.object.TwineScript_VariableStore?"_":f(this.object)+"'s ")+(1===this.propertyChain.length?n(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,r){return e+"'s "+n(t,r)}))},get TwineScript_ObjectName(){return this.TwineScript_ToSource()+(this.object.TwineScript_VariableStoreName?" in "+this.object.TwineScript_VariableStoreName:"")},on:function(e,t){if(e in S)return"function"!=typeof t||S[e].includes(t)||S[e].push(t),w;i("VarRef.on","invalid event name")}})}),define("internaltypes/varscope",[],function(){return Object.seal({TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:!0,TwineScript_TypeDefs:Object.create(null)})}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return r}),define("datatypes/custommacro",["jquery","utils/operationutils","internaltypes/changedescriptor","internaltypes/varref","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,a,i,o){var s=t.objectName,c=t.typeName,u=t.matches,l=Object.assign,p=Object.create,f=function(t){return function(c){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];t.called+=1;var h=t.varNames,y=t.params,m=t.body,g=l(p(a),{TwineScript_VariableStoreName:t.TwineScript_ObjectName+" call #"+t.called,TwineScript_TypeDefs:p(null)}),v=[],b=0;f.forEach(function(e,t){var n=h[b];g.TwineScript_TypeDefs[n]=y[b].datatype.rest?y[b].datatype.create("array"):y[b].datatype;var a=r.create(g,n);if(y[b].datatype.rest){var i=(g[n]||[]).concat([e]);if(t<f.length-1)return void(g[n]=i);a.set(i)}else a.set(e),b+=1;v.push(o.create(s(a)+" is now "+s(g[n])))}),f.length&&(b+=1),y[b]&&y[b].datatype.rest&&(r.create(g,h[b]).set([]),g.TwineScript_TypeDefs[name]=y[b].datatype.create("array"));var w=void 0,T=e("<p>").append(m.html),S=c.stack.length;for(c.stack.unshift({tempVariables:g,dom:T,output:function(e){w=e}}),c.execute();c.stack.length>S;)c.stack.shift();var x,k,O=T.find("tw-error");return O.length?(T.prepend(v.map(function(e){return e.render()}),"<br>"),i.create("propagated",O.length+" error"+(O.length>1?"s":"")+" occurred when running "+t.TwineScript_ObjectName+".",void 0,T)):void 0===w?i.create("custommacro",t.TwineScript_ObjectName+" didn't output any data or hooks using (output:) or (output-data:)."):n.isPrototypeOf(w)?(x=w,k=l({TwineScript_TypeID:"command",TwineScript_ObjectName:"a custom command",TwineScript_TypeName:"a custom command",TwineScript_Print:function(){return"`[a custom command]`"},TwineScript_Attach:function(e){return e.run(x),k},TwineScript_Run:function(){return x}})):w}},d=Object.freeze({TwineScript_TypeID:"macro",TwineScript_TypeName:"a custom macro",get TwineScript_ObjectName(){return this.TwineScript_KnownName?"the "+this.TwineScript_KnownName+" macro":"a custom macro"},TwineScript_GetProperty:function(e){if("params"===e)return[].concat(_toConsumableArray(this.params))},TwineScript_Properties:["params"],TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},TwineScript_Clone:function(){return l(p(d),this)},TwineScript_ToSource:function(){return"(macro:"+this.params.map(function(e){return e.TwineScript_ToSource()}).concat("")+this.body.TwineScript_ToSource()+")"},create:function(e,t){var n=l(p(this),{params:e,called:0,varNames:e.map(function(e){return e.varRef.propertyChain[0]}),typeSignature:e.map(function(e){var t=void 0;return t=e.datatype.toTypeSignatureObject?e.datatype.toTypeSignatureObject({rest:e.rest}):{pattern:"range",range:function(t){return u(e.datatype,t)},name:c(e.datatype)},e.rest?{pattern:"zero or more",innerType:t}:t}),body:t,TwineScript_KnownName:""});return n.fn=f(n),n}});return d}),define("datatypes/lambda",["utils/operationutils","internaltypes/varscope","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var a=e.objectName,i=Object.freeze({TwineScript_TypeID:"lambda",TwineScript_TypeName:"a lambda",get TwineScript_ObjectName(){return'a "'+("making"in this?"making ... ":"")+("where"in this?"where ... ":"")+("when"in this?"when ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TwineScript_ToSource:function(){return this.source},TypeSignature:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"lambda",innerType:i,clauses:t,typeName:'a "'+t.concat("").join(" ...")+'" lambda'}},TwineScript_Clone:function(){return Object.assign(Object.create(i),this)},create:function(e,o,s,c){var u=void 0;function l(e){var r=e&&e.varRef?e.varRef:e;return void 0===r||r&&n.isPrototypeOf(r)&&t.isPrototypeOf(r.object)&&1===r.propertyChain.length}if("making"===o&&!l(s))return r.create("syntax","I need a temp variable, or typed temp variable, to the right of '"+o+"', not "+a(s)+".");if(r.containsError(e))return e;if(i.isPrototypeOf(e)){if("when"===o||"when"in e)return r.create("syntax","A 'when' lambda cannot have any other clauses, such as '"+o+"'.");if(o in e&&("where"!==o||"true"!==e[o]))return r.create("syntax","This lambda has two '"+o+"' clauses.");u=e}else{if("when"===o&&void 0!==e)return r.create("syntax","A 'when' lambda shouldn't begin with a temp variable (just use 'when' followed by the condition).");if(!l(e))return r.create("syntax","This lambda needs to start with a single temp variable, or typed temp variable, not "+a(e)+".");(u=Object.create(this)).loop=e||""}return u.source=c.trim(),u[o]=s,u.making&&u.making.getName()===(u.loop&&u.loop.getName())?r.create("syntax","This lambda has two variables named '"+u.loop.getName()+"'.","Lambdas should have all-unique parameter names."):u},apply:function(e,n){var a=n.loop,i=n.pos,o=n.making,s=n.ignoreVia,c=n.tempVariables;function u(e,t){if(e)if("datatype"in e&&"varRef"in e){var n=e.varRef.create(c,e.varRef.propertyChain);n.defineType(e.datatype);var a=n.set(t);if(r.containsError(a))return a}else c[e.getName()]=t}c=c||Object.create(e.stack.length?e.stackTop.tempVariables:t);var l=u(this.loop,a)||u(this.making,o);if(r.containsError(l))return l;e.stack.unshift(Object.assign(Object.create(e.stackTop||null),{tempVariables:c,lambdaPos:this.when?void 0:i}));var p=e.eval("Operations");!a||this.making||this.when?p.initialiseIt(r.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName)):p.initialiseIt(a);var f=!s&&this.via,d=e.eval("where"in this||"when"in this?"Operations.where("+(this.where||this.when)+","+(f||"true")+",null)":f||"true");return e.stack.shift(),d},filter:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=void 0,o=t.reduce(function(t,o,s){if(i=r.containsError(t))return i;var c=n.apply(e,{loop:o,pos:s+1,ignoreVia:!0,tempVariables:a});return(i=r.containsError(c))?i:t.concat(c?[o]:[])},[]);return(i=r.containsError(o))?i:o}});return i}),define("datatypes/codehook",["internaltypes/twineerror","renderer"],function(e,t){var n=t.exec;return Object.freeze({TwineScript_TypeName:"a code hook",TwineScript_ObjectName:"a code hook",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return"["+this.source+"]"},create:function(t,r){r||(r=n(t));var a=e.containsError(r);return a||Object.assign(Object.create(this),{source:t,html:r})}})}),define("datatypes/colour",["jquery","utils"],function(e,t){var n=t.matMul,r=Math.max,a=Math.min,i=Math.sin,o=Math.cos,s=Math.pow,c=Math.round,u=Math.floor,l=Math.atan2,p=Math.cbrt,f=Math.sqrt,d=Math.PI,h=Object.assign,y=Object.create,m=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,g=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,v=y(null);function b(e){var t=e.r,n=e.g,i=e.b,o=e.a,s=r(t/=255,n/=255,i/=255),u=a(t,n,i),l=(s+u)/2,p=s-u;if(s===u)return{h:0,s:0,l:l};var f=void 0;switch(s){case t:f=(n-i)/p+(n<i?6:0);break;case n:f=(i-t)/p+2;break;case i:f=(t-n)/p+4}return{h:f=c(60*f),s:l>.5?p/(2-s-u):p/(s+u),l:l,a:o}}var w=[.96422,1,.82521],T=24389/27,S=216/24389,x=function(e){return e.map(function(e){return[e]})},k=function(e){return e.map(function(e){return e[0]})};function O(e){var t=e.l,r=e.c,a=e.h,c=e.a;t*=100;var u=[];u[1]=(t+16)/116,u[0]=r*o(a*d/180)/500+u[1],u[2]=u[1]-r*i(a*d/180)/200;var l=[s(u[0],3)>S?s(u[0],3):(116*u[0]-16)/T,t>T*S?s((t+16)/116,3):t/T,s(u[2],3)>S?s(u[2],3):(116*u[2]-16)/T].map(function(e,t){return e*w[t]}),p=k(n([[.9555766,-.0230393,.0631636],[-.0282895,1.0099416,.0210077],[.0122982,-.020483,1.3299098]],n([[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],x(l)))).map(function(e){return 255*e}),f=_slicedToArray(p,3);return{r:f[0],g:f[1],b:f[2],a:c}}function j(e){var t=O(e);return[t.r,t.g,t.b].every(function(e){return e>=0&&e<=255})}var A=Object.freeze({TwineScript_TypeID:"colour",TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour",TwineScript_DebugName:function(){return"a colour "+this.TwineScript_Print()},"TwineScript_+":function(e){var t=this.toRGBA(),n=e.toRGBA();return A.create({r:Math.min(Math.round(.6*(t.r+n.r)),255),g:Math.min(Math.round(.6*(t.g+n.g)),255),b:Math.min(Math.round(.6*(t.b+n.b)),255),a:(t.a+n.a)/2})},TwineScript_Print:function(){var e=this.toRGBA();return"<tw-colour style='background-color:rgba("+[e.r,e.g,e.b,e.a]+");'></tw-colour>"},TwineScript_is:function(e){if(!A.isPrototypeOf(e))return!1;if(e.lcha&&this.lcha)return e.lcha.l===this.lcha.l&&e.lcha.c===this.lcha.c&&e.lcha.h===this.lcha.h&&e.a===this.a;var t=this.toRGBA();return(e=e.toRGBA()).r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a},TwineScript_Clone:function(){return A.create(this)},toRGBAString:function(){var e=this.toRGBA();return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},toHSLA:function(){return b(this.toRGBA())},toRGBA:function(){return this.lch?O(function(e){if(j(e))return e;var t=(e=h({},e)).c,n=0;for(e.c/=2;t-n>1e-5;)j(e)?n=e.c:t=e.c,e.c=(t+n)/2;return e}(h({},this.lch,{a:this.a}))):this},toLCHA:function(){return this.lch?h({},this.lch):(t=(e=this).r,r=e.g,a=e.b,i=e.a,o=k(n([[1.0478112,.0228866,-.050127],[.0295424,.9904844,-.0170491],[-.0092345,.0150436,.7521316]],n([[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]],x([t/255,r/255,a/255])))).map(function(e,t){return e/w[t]}).map(function(e){return e>S?p(e):(T*e+16)/116}),c=[116*o[1]-16,500*(o[0]-o[1]),200*(o[1]-o[2])],u=180*l(c[2],c[1])/d,{l:c[0]/100,c:f(s(c[1],2)+s(c[2],2)),h:u>=0?u:u+360,a:i});var e,t,r,a,i,o,c,u},LCHRotate:function(e){e<0&&(e=360+e);var t=this.toLCHA();return t.h=(t.h+e)%360,t.a=this.a,A.create(t)},TwineScript_GetProperty:function(e){if("lch"===e){var t=this.toLCHA();return new Map([["l",t.l],["c",t.c],["h",t.h]])}var n=this.toRGBA();return"h"===e||"s"===e||"l"===e?b(n)[e]:"r"===e||"g"===e||"b"===e||"a"===e?n[e]:void 0},TwineScript_Properties:["h","s","l","r","g","b","a","lch"],TwineScript_ToSource:function(){var e=!this.lch&&b(this);if(e&&!e.h&&!e.s){if(1===e.l)return"white";if(0===e.l)return"black"}return"("+(this.lch?"lch":"hsl")+":"+(this.lch?[this.lch.l,this.lch.c,this.lch.h]:[e.h,e.s,e.l])+(1!==this.a?","+this.a:"")+")"},create:function(t){return"string"==typeof t?this.create((A.isHexString(t)?function(e){return"string"!=typeof e?e:(e=(e=e.replace("#","")).replace(m,"$1$1$2$2$3$3"),{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)})}:function(t){if(t in v)return v[t];var n=e("<p>").css("background-color",t).css("background-color");return n="transparent"===n?{r:0,g:0,b:0,a:0}:n.startsWith("rgb")?n.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},v[t]=n,n})(t)):!("h"in t&&"s"in t&&"l"in t)||"r"in t||"g"in t||"b"in t?("a"in t&&"number"==typeof t.a||(t.a=1),h(y(this),"h"in t&&"c"in t&&!("s"in t)&&"l"in t?{a:t.a,lch:{l:t.l,c:t.c,h:t.h}}:t)):this.create(function(e){var t=e.h,n=e.s,r=e.l,a=e.a;if(0===n){var i=u(255*r);return{r:i,g:i,b:i}}var o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;function c(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+6*(o-s)*e:e<.5?o:e<2/3?s+(o-s)*(2/3-e)*6:s}return{r:u(255*c((t/=360)+1/3)),g:u(255*c(t)),b:u(255*c(t-1/3)),a:a}}(t))},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(m)||e.slice(1).match(g))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+\s*,\s*\d+%?\s*,\s*\d+%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return A}),define("datatypes/gradient",["utils/operationutils"],function(e){var t=e.toSource,n=Object.freeze({TwineScript_TypeID:"gradient",TwineScript_TypeName:"a gradient",TwineScript_ObjectName:"a gradient",TwineScript_DebugName:function(){return"a gradient "+this.TwineScript_Print()},TwineScript_GetProperty:function(e){var t=this;return"angle"===e?this.angle:"stops"===e?this.stops.map(function(e){return new Map([[t.repeating?"pixels":"percent",e.stop],["colour",e.colour.TwineScript_Clone()]])}):void 0},TwineScript_Properties:["angle","stops"],TwineScript_ToSource:function(){return"(gradient:"+this.angle+","+this.stops.map(function(e){return t(e.stop)+","+t(e.colour)})+")"},TwineScript_is:function(e){var t=this;return e.angle===this.angle&&e.stops.length===this.stops.length&&e.stops.every(function(e,n){var r=e.colour,a=e.stop;return t.stops[n].stop===a&&t.stops[n].colour.TwineScript_is(r)})},TwineScript_Clone:function(){return n.create(this.angle,[].concat(_toConsumableArray(this.stops)))},TwineScript_Print:function(){return"<tw-colour style='background:"+this.toLinearGradientString()+"'></tw-colour>"},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object.assign(Object.create(this),{angle:e,stops:t.sort(function(e,t){return e.stop-t.stop}),repeating:n})},multiply:function(e){return n.create(this.angle,this.stops.map(function(t){return{colour:t.colour,stop:t.stop*e}}))},toLinearGradientString:function(){var e=this;return(this.repeating?"repeating-":"")+"linear-gradient("+this.angle+"deg, "+this.stops.reduce(function(t,n){var r=n.colour,a=n.stop;return t+r.toRGBAString()+" "+a*(e.repeating?1:100)+(e.repeating?"px,":"%,")},"").slice(0,-1)+")"}});return n}),define("datatypes/datatype",["utils","utils/operationutils","datatypes/changercommand","datatypes/colour","datatypes/gradient","datatypes/lambda","datatypes/custommacro","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=e.realWhitespace,u=e.anyRealLetter,l=e.anyCasedLetter,p=e.anyNewline,f=t.objectName,d=Object.assign,h=Object.seal,y=Object.keys,m=Math.floor,g=Math.abs,v=void 0,b=void 0,w={TwineScript_TypeID:"datatype",TwineScript_TypeName:"a datatype",TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},get TwineScript_ObjectName(){return"the "+(this.rest?"...":"")+this.name+" datatype"},TwineScript_is:function(e){return w.isPrototypeOf(e)&&e.name===this.name},TwineScript_Clone:function(){return this.rest?this:Object.create(this)},TwineScript_ToSource:function(){return(this.rest?"...":"")+this.name},TwineScript_IsTypeOf:function(e){var t=this.name,n=this.rest;return!!v[t]&&v[t](e,n)},toTypeSignatureObject:function(){var e=this.name,t={pattern:"range",range:v[e],name:"a "+("dm"===e?"datamap":"ds"===e?"dataset":"num"===e?e+"ber":"str"===e?e+"ing":"color"===e?"colour":"bool"===e?e+"ean":"alnum"===e?"alphanumeric character":"int"===e?e+"eger":"even"===e||"odd"===e?e+" number":e.endsWith("case")||"whitespace"===e?e+" character":"empty"===e?e+" value":e)};return this.rest?{pattern:"zero or more",innerType:t}:t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e="datamap"===e?"dm":"dataset"===e?"ds":"number"===e?"num":"string"===e?"str":"color"===e?"colour":"boolean"===e?"bool":"alphanumeric"===e?"alnum":"integer"===e?"int":"newline"===e?"linebreak":e;var n=Object.create(this);return n.name=e,n.rest=t,n},from:function(e){var t=y(b).find(function(t){return b[t](e)});return t?w.create(t):s.create("datatype",f(e)+" doesn't correspond to a datatype value.")}};return b={array:Array.isArray,dm:function(e){return e instanceof Map},ds:function(e){return e instanceof Set},datatype:function(e){return w.isPrototypeOf(e)},changer:function(e){return n.isPrototypeOf(e)},colour:function(e){return r.isPrototypeOf(e)},gradient:function(e){return a.isPrototypeOf(e)},lambda:function(e){return i.isPrototypeOf(e)},macro:function(e){return o.isPrototypeOf(e)},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e}},v=d({},b,{even:function(e){return!isNaN(e)&&m(g(e))%2==0},odd:function(e){return!isNaN(e)&&m(g(e))%2==1},empty:function(e){return e instanceof Map||e instanceof Set?!e.size:!(!Array.isArray(e)&&"string"!=typeof e)&&!e.length},int:function(e){return"number"==typeof e&&e===(0|e)},uppercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toLowerCase()})},lowercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toUpperCase()})},whitespace:function(e){return"string"==typeof e&&!!e.match("^"+c+"$")},digit:function(e){return"string"==typeof e&&!!e.match("^\\d$")},alnum:function(e){return"string"==typeof e&&!!e.match("^"+u+"$")},anycase:function(e){return"string"==typeof e&&!!e.match("^"+l+"$")},linebreak:function(e){return"string"==typeof e&&!!e.match("^"+p+"$")},any:function(){return!0},const:function(){return!0}}),h(w)}),define("datatypes/typedvar",["utils/operationutils","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var a=e.typeName,i=e.matches,o=e.toSource,s=e.unstorableValue,c=Object.freeze,u=Object.assign,l=Object.create,p=c({TwineScript_TypeName:"a typed variable name",get TwineScript_ObjectName(){return this.TwineScript_ToSource()},TwineScript_Print:function(){return"`[A typed variable name]`"},TwineScript_Unstorable:!0,TwineScript_Clone:function(){return u(l(p),{datatype:this.datatype.TwineScript_Clone(),varRef:this.varRef})},TwineScript_ToSource:function(){return o(this.datatype)+"-type "+this.varRef.TwineScript_ToSource()},TwineScript_GetProperty:function(e){return"name"===e?this.getName():this[e]},TwineScript_Properties:["datatype","name"],TwineScript_IsTypeOf:function(e){return i(this.datatype,e)},get:function(){var e;return(e=this.varRef).get.apply(e,arguments)},getName:function(){return this.varRef.getName()},defineType:function(){if("any"!==this.datatype.name)return this.varRef.defineType(this.datatype)},create:function(e,t){var n;if(n=r.containsError(t)||r.containsError(e)||t.error)return n;var i=s(e);return i&&!p.isPrototypeOf(i)?r.create("syntax","The -type syntax can't have "+a(i)+" to its left."):u(l(this),{datatype:e,varRef:t})}});return p}),define("macros",["jquery","utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/lambda","datatypes/hookset","datatypes/codehook","datatypes/typedvar","datatypes/datatype","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=n.insensitiveName,h=n.nth,y=n.plural,m=n.andList,g=n.lockProperty,v=(r.clone,r.objectName),b=r.typeName,w=r.singleTypeCheck,T=r.toSource,S=void 0,x={};function k(e,n,r){var a=n.fn,i=n.typeSignature,s=n.isChanger,u=void 0!==s&&s,l=r[0];r=function(e){return e.reduce(function(e,n){if(n&&!0===n.spreader){var r=n.value,a=f.containsError(r);if(a)e.push(a);else if(Array.isArray(r)||"string"==typeof r)for(var i=0;i<r.length;i++)e.push(r[i]);else r instanceof Set?e.push.apply(e,_toConsumableArray(Array.from(r).sort(t("en")))):e.push(f.create("operation","I can't spread out "+v(r)+", because it is not a string, dataset, or array."))}else e.push(n);return e},[])}(r.slice(1)),i=[].concat(i||[]);var p=!e,d=p?"":"("+(Array.isArray(e)&&e.length>1?e[0]:e)+":)";e=p?"this custom macro":"the "+d+" macro";var g=void 0;g=i.length>0?e+" must only be given "+m(i.map(b))+(i.length>1?", in that order":"."):e+" must not be given any data."+(p?"":" Just write "+d);for(var T=void 0,x=function(t,n){var a=i[t],s=r[t];if(f.containsError(s))return{v:s};if(c.isPrototypeOf(s)&&u)return{v:f.create("syntax","Please put this hook outside the parentheses of the changer macro, not inside it.","Hooks should appear after a macro"+(p?".":": "+d+"[Some text]"))};if(t>=i.length&&!T)return{v:f.create("datatype",r.length-i.length+" too many values were given to "+e+".",g)};if(a||(a=T),!a.innerType||"rest"!==a.pattern&&"zero or more"!==a.pattern||(T=a.innerType,"rest"===a.pattern&&(a=a.innerType)),!w(s,a)){if(void 0===s){var l=i.filter(function(e){return!("optional"===e.pattern||"zero or more"===e.pattern)}).length;return{v:f.create("datatype",e+" needs "+y(l-t,"more value")+".",g)}}return s&&s.TwineScript_Unstorable&&(a===S.TypeSignature.Any||a.innerType&&a.innerType===S.TypeSignature.Any)?{v:f.create("datatype",e+"'s "+h(t+1)+" value, "+v(s)+", is not valid data for this macro.",g)}:s&&o.isPrototypeOf(s)&&"lambda"===a.pattern?{v:f.create("datatype",e+"'s "+h(t+1)+" value (a lambda) should have "+m(["where","when","making","via","with"].filter(function(e){return a.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+m(["where","when","making","via","with"].filter(function(e){return e in s}).map(function(e){return"a '"+e+"' clause"}))+".")}:"insensitive set"===a.pattern?{v:f.create("datatype",v(s)+" is not a valid name string for "+e+".","Only the following names are recognised (capitalisation and hyphens ignored): "+m(a.innerType)+".")}:{v:f.create("datatype",e+"'s "+h(t+1)+" value is "+v(s)+", but should be "+b(a)+".",a.message||g)}}},k=0,O=Math.max(r.length,i.length);k<O;k+=1){var j=x(k);if("object"===(void 0===j?"undefined":_typeof(j)))return j.v}return a.apply(void 0,[l].concat(_toConsumableArray(r)))}function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={fn:t,typeSignature:n};r&&(a.isChanger=!0),Object.freeze(a),Array.isArray(e)?e.forEach(function(e){return g(x,d(e),a)}):g(x,d(e),a)}return S={has:function(e){return e=d(e),x.hasOwnProperty(e)},get:function(e){return e=d(e),x.hasOwnProperty(e)&&x[e]},add:function e(t,n,r){return O(t,n,r),e},addChanger:function e(t,n,r,i){return O(t,n,i,!0),a.register(Array.isArray(t)?t[0]:t,r),e},addCommand:function e(t,n,r,a){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return O(t,function(e,t,n,r){return function(a){for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var c=t.apply(void 0,o);if(c)return c;var u=p.create(),l=Object.assign({TwineScript_TypeID:"command",TwineScript_ObjectName:"a ("+e+":) command",TwineScript_TypeName:"a ("+e+":) command",TwineScript_Print:function(){return"`[A ("+e+":) command]`"},TwineScript_ToSource:function(){return"("+e+":"+o.map(T)+")"},TwineScript_is:function(e){return T(this)===T(e)}},r?{TwineScript_Attach:function(e,t){return u.section=e,t.run(u),l},TwineScript_Run:function(e){return n.apply(void 0,[u,e].concat(o))}}:{TwineScript_Run:function(e){return n.apply(void 0,[e].concat(o))}});return l}}([].concat(t)[0],n,r,i),a),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},insensitiveSet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"insensitive set",innerType:t}},numberRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return{pattern:"range",min:e,max:t,range:function(n){return"number"==typeof n&&!Number.isNaN(n)&&n>=e&&n<=t}}},nonNegativeInteger:{pattern:"range",integer:!0,min:0,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=0&&!(e+"").includes(".")}},positiveInteger:{pattern:"range",integer:!0,min:1,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=1&&!(e+"").includes(".")}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"},Everything:{TwineScript_TypeName:"everything"}},run:function(e,t){return S.has(e)?k(e,S.get(e),t):f.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")},runCustom:function(e,t){return i.isPrototypeOf(e)?k("",e,t):f.create("macrocall","I can't call "+v(e)+" because it isn't a custom macro.")}},Object.assign(S.TypeSignature,{positiveNumber:S.TypeSignature.numberRange(Math.pow(2,-52),1/0),nonNegativeNumber:S.TypeSignature.numberRange(0,1/0),percent:S.TypeSignature.numberRange(0,1)}),Object.freeze(S)}),define("datatypes/varbind",["jquery","utils","utils/operationutils","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a){var i=n.objectName;return r.on("set",function(n,r){n.TwineScript_VariableStore&&e(t.storyElement).find("[data-2bind]").each(function(t,a){var i=(a=e(a)).data("twoWayBindEvent");"function"==typeof i&&i(a,n,r)})}),Object.freeze({TwineScript_TypeName:"a bound variable",TwineScript_ObjectName:"a bound variable",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return("two way"===this.bind?"2":"")+"bind "+this.varRef.TwineScript_ToSource()},set:function(e){var t,n=this.varRef.set(e);if(t=a.containsError(n))return t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"one way";return r.isPrototypeOf(e)?e.error?e.error:Object.assign(Object.create(this),{varRef:e,bind:t}):a.create("operation","I can only 'bind' a variable, not "+i(e)+".")}})}),define("datatypes/assignmentrequest",["utils/operationutils","datatypes/typedvar","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a){var i=e.objectName,o=e.matches;return Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a 'to' or 'into' expression",TwineScript_ObjectName:"a 'to' or 'into' expression",TwineScript_Unstorable:!0,set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=void 0,c=[],u=function e(s,c){var u,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],p=[],f=void 0;if(f=c&&r.isPrototypeOf(c)?c.get():c,u=a.containsError(f))return u;if(Array.isArray(f)&&Array.isArray(s)){for(var d=0,h=0;d<s.length&&h<f.length;){var y=s[d],m=f[h];if(t.isPrototypeOf(y)&&y.datatype.rest||n.isPrototypeOf(y)&&y.rest){for(var g=h;h<f.length&&o(y,m);)m=f[h+=1];t.isPrototypeOf(y)?y.datatype=[y.datatype]:n.isPrototypeOf(y)&&(y=n.create("array")),p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,{first:g+1,last:h+1}):f.slice(g,h)))}else p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,h+1):m)),h+=1;d+=1}return d<s.length?l&&a.create("operation","I can't unpack this array because it needs "+(s.length-d)+" more value"+(s.length-d>0?"s":"")+"."):p}if(s instanceof Map&&f instanceof Map){var v=!0,b=!1,w=void 0;try{for(var T,S=s.entries()[Symbol.iterator]();!(v=(T=S.next()).done);v=!0){var x=_slicedToArray(T.value,2),k=x[0],O=x[1];if(!f.has(k))return l&&a.create("operation","I can't unpack this datamap because it needs a '"+k+"' data name.");p=p.concat(e(O,r.isPrototypeOf(c)?r.create(c,k):f.get(k)))}}catch(e){b=!0,w=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw w}}return p}if(t.isPrototypeOf(s)){if("function"==typeof s.datatype.destructure)return[{dest:s,value:f,src:c}].concat(s.datatype.destructure(f));if(!o(f,s.datatype))return[l&&a.create("operation","I can't unpack "+i(f)+" into "+s.varRef.TwineScript_ToSource()+" because it doesn't match "+i(s.datatype)+".")];p=p.concat(e(s.datatype,f))}return r.isPrototypeOf(s)||t.isPrototypeOf(s)?p.concat({dest:s,value:f,src:c}):"function"==typeof s.destructure?p.concat(s.destructure(f)):o(f,s)?p:l&&a.create("operation","I tried to unpack, but "+i(s)+" in the pattern didn't match "+i(f)+".")}(this.dest,this.src);if(s=a.containsError(u))return s;if(!u.length)return a.create("operation","I can't store a new value inside "+i(this.dest)+" that isn't in a variable.","You need a variable, or a data structure containing variables at certain positions, to store the value.");var l=!0,p=!1,f=void 0;try{for(var d,h=u.reverse()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=y.dest,g=y.value,v=y.src;if(t.isPrototypeOf(m)){if(s=a.containsError(m.defineType()))return s;m=m.varRef}if(s=m.set(g),a.isPrototypeOf(s))return s;e&&v&&v.delete(),c.shift(i(m)+" is now "+i(g))}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return c.join("; ")},create:function(e,t,n){return Object.assign(Object.create(this),{dest:e,src:t,operator:n})}})}),define("twinescript/operations",["jquery","state","datatypes/assignmentrequest","utils/operationutils","internaltypes/varref","datatypes/typedvar","datatypes/datatype","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=r.isObject,u=r.collectionType,l=r.is,p=r.isA,f=r.clone,d=r.unique,h=r.contains,y=r.matches,m=r.objectName,g=void 0,v=0;function b(e,t,n,r){return n=n||"do this to",function(a,i){1===t.length&&(i=a);var o;return(o=s.containsError(a,i))?o:(void 0===a?"undefined":_typeof(a))!==e||(void 0===i?"undefined":_typeof(i))!==e?s.create("operation","I can only "+n+" "+e+"s, not "+m((void 0===a?"undefined":_typeof(a))!==e?a:i)+".",r):t(a,i)}}function w(e){return function(t,n){var r;if(r=s.containsError(t,n))return r;if((void 0===t?"undefined":_typeof(t))!==(void 0===n?"undefined":_typeof(n))||c(t)&&"TwineScript_TypeName"in t&&c(n)&&"TwineScript_TypeName"in n&&t.TwineScript_TypeName!==n.TwineScript_TypeName||u(t)!==u(n)){var a=m(t)+" isn't the same type of data as "+m(n);return s.create("operation",a[0].toUpperCase()+a.slice(1))}return e(t,n)}}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function r(a,i){var o=void 0;if(o=s.containsError(a,i))return o;v=a;var c=a.determiner?[a,i]:i.determiner?[i,a]:[],u=_slicedToArray(c,2),l=u[0],p=u[1];if(l){var f=l.determiner;if("start"===f||"end"===f){if(t)return s.create("operation","I can't use '"+t+"' with the 'start' or 'end' of "+m(l)+".");if(p.determiner){if("start"===p.determiner||"end"===p.determiner)return s.create("operation","I can't compare one value's 'start' or 'end' with another value's 'start' or 'end'.","Please change one of them to use an exact range, such as '1stto4th' or '2ndlasttolast'.");var d=[p,l];l=d[0],p=d[1]}for(var h=l.string||l.array,y=0;y<h.length+1;y+=1){var g=y?"end"===f?h.slice(-y):h.slice(0,y):h.constructor(),b=l===a?r(g,i):r(a,g);if(o=s.containsError(b))return o;if(b!==n)return b}return n}var w="all"===f;return l.array.reduce(function(e,t){var n,o=l===a?r(t,i):r(a,t);return(n=s.containsError(e,o))?n:w?e&&o:e||o},w)}return e(a,i)}}function S(e,t){return T(function(t,n){var r=e(t,n);return s.containsError(r)?r:!r},t,!0)}var x="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.";return g={create:function(n){var r=Object.create(this);return r.Identifiers={TwineScript_Identifiers:!0,get it(){return v},get time(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'time' can't be used in "+n.stackTop.evaluateOnly+"."):Date.now()-n.timestamp},get visits(){var e=n.stackTop.speculativePassage,r=function(n){return n===(e||t.passage)};return t.pastPassageNames().filter(r).length+t.mockVisits.filter(r).length+(!e||e===t.passage)},get visit(){return r.Identifiers.visits},get exits(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'exit' and 'exits' can't be used in "+n.stackTop.evaluateOnly+"."):n.dom.find("tw-enchantment, tw-link").filter(function(t,n){return e(n).data("enchantmentEvent")||e(n).parent().data("linkPassageName")||e(n).parent().data("clickEvent")}).length},get exit(){return r.Identifiers.exits},get pos(){return n.stackTop&&!n.stackTop.evaluateOnly&&n.stackTop.lambdaPos?+n.stackTop.lambdaPos||1:s.create("operation","'pos' can only be used in lambdas that aren't 'when' lambdas.")}},r},elidedComparisonOperator:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.reduce(function(n,r){return"boolean"==typeof r?r:g[e](n,g[t](v,r))},"and"===e)},and:b("boolean",w(function(e,t){return e&&t}),"use 'and' to join",x),or:b("boolean",w(function(e,t){return e||t}),"use 'or' to join",x),not:b("boolean",function(e){return!e},"use 'not' to invert",x),"+":w(function(e,t){if(Array.isArray(e))return[].concat(_toConsumableArray(e),_toConsumableArray(t));var n=void 0;return e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(d).map(f)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes(void 0===e?"undefined":_typeof(e))?e+t:s.create("operation","I can't use + on "+m(e)+".")}),"-":w(function(e,t){if(Array.isArray(e))return e.filter(function(e){return!t.some(function(t){return l(e,t)})});if(e instanceof Set){var n=[].concat(_toConsumableArray(t));return new Set([].concat(_toConsumableArray(e)).filter(function(e){return!n.some(function(t){return l(e,t)})}))}return"string"==typeof e?e.split(t).join(""):"number"==typeof e?e-t:s.create("operation","I can't use - on "+m(e)+".")}),"*":b("number",w(function(e,t){return e*t}),"multiply"),"/":b("number",w(function(e,t){return 0===t?s.create("operation","I can't divide "+m(e)+" by zero."):e/t}),"divide"),"%":b("number",w(function(e,t){return 0===t?s.create("operation","I can't modulo "+m(e)+" by zero."):e%t}),"modulus"),"<":T(b("number",w(function(e,t){return e<t}),"do < to"),"<"),">":T(b("number",w(function(e,t){return e>t}),"do > to"),">"),"<=":T(b("number",w(function(e,t){return e<=t}),"do <= to"),"<="),">=":T(b("number",w(function(e,t){return e>=t}),"do >= to"),">="),is:T(l),isNot:S(l),contains:T(h,"contains"),doesNotContain:S(h,"does not contain"),isIn:T(function(e,t){return h(t,e)},"is in"),isNotIn:S(function(e,t){return h(t,e)},"is not in"),isA:T(p,"is a"),isNotA:S(p,"is not a"),typifies:T(function(e,t){return p(t,e)}),untypifies:S(function(e,t){return p(t,e)}),matches:T(y),doesNotMatch:S(y),where:function(e,t,n){var r;return(r=s.containsError(e))?r:"boolean"!=typeof e?s.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+m(e)+"."):e?t:n},makeSpreader:function(e){if(i.isPrototypeOf(e)||o.isPrototypeOf(e)){var t=f(e);return(i.isPrototypeOf(e)?t.datatype:t).rest=!0,t}return{value:e,spreader:!0,TwineScript_TypeName:"a spreaded '...' value",TwineScript_ObjectName:"a spreaded '...' value",TwineScript_Unstorable:!0}},makeAssignmentRequest:function(e,t,r){var a=s.containsError(e,t);return a||n.create(e,t,r)},setIt:function(e){return a.isPrototypeOf(e)||i.isPrototypeOf(e)?(v=e.get(),e):e},initialiseIt:function(e){v=e}},Object.freeze(g)}),define("twinescript/environ",["macros","state","utils","datatypes/colour","datatypes/hookset","datatypes/lambda","datatypes/datatype","datatypes/varbind","datatypes/codehook","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror","twinescript/operations"],function(Macros,State,Utils,Colour,HookSet,Lambda,Datatype,VarBind,CodeHook,TypedVar,VarRef,TwineError,OperationsProto){return function(section){"object"===(void 0===section?"undefined":_typeof(section))&&section||Utils.impossible("TwineScript.environ","no Section argument was given!");var Operations=OperationsProto.create(section);return section.eval=function(){try{return eval(arguments[0])}catch(e){return e}},section}}),define("section",["jquery","utils","renderer","twinescript/environ","twinescript/operations","state","utils/operationutils","utils/renderutils","datatypes/changercommand","datatypes/hookset","datatypes/colour","datatypes/lambda","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,a,i,o,s,c,u,l,p,f,d,h,y){var m,g=o.printBuiltinValue,v=o.objectName,b=o.typeID,w=o.isObject,T=s.collapse;function S(e,n,r){if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&c.isPrototypeOf(n)){if(r.data("originalSource",r.popAttr("source")),!this.renderInto(r.data("originalSource"),r,n)){var a=t.insensitiveName(e.attr("name"));if(["if","elseif","unless","else","testfalse"].includes(a)&&(e.addClass("false"),"elseif"!==a&&(this.stackTop.lastHookShown=!1)),r.data("live")){var i=r.data("live"),o=i.delay,s=i.event;(function(e,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;i&&t.assertMustHave(i,["when"]);var o=n.data("originalSource")||"",s=_slicedToArray(this.stack,1)[0].tempVariables,c=this.whenUnblocked.bind(this,function(){if(r.inDOM()){var t=i&&i.filter(r,[!0],s);h.containsError(t)?t.render(e.attr("title")).replaceAll(e):!i||t[0]?(r.renderInto(o,n,{append:"replace"}),t||n.find("tw-expression[name='stop']").length||r.inDOM()&&setTimeout(c,a)):setTimeout(c,a)}});setTimeout(c,a)}).call(this,e,r,o,s)}return}}else{if(!1===n)return r.attr("source")&&(r.data("originalSource",r.popAttr("source")),r.data("hidden",!0)),e.addClass("false"),void(this.stackTop.lastHookShown=!1);!0!==n&&e.replaceWith(h.create("datatype",v(n)+" cannot be attached to this hook.","Only Booleans and changers can be attached to hooks.").render(e.attr("title")))}this.stackTop.lastHookShown=!0}function x(t){var n=(t instanceof e?t[0]:t).nextSibling;if(n&&(n instanceof Text&&!n.textContent.trim()||["br","tw-consecutive-br"].includes((n.tagName||"").toLowerCase()))){var r=x(n),a=r.whitespace,i=r.nextElem;return{whitespace:e(n).add(a),nextElem:i}}return{whitespace:e(),nextElem:e(n)}}var k={add:[],remove:[]};return m={create:function(e){var n=Object.assign(Object.create(this),{timestamp:Date.now(),dom:e||t.storyElement,stack:[],enchantments:[],unblockCallbacks:[]});return n=r(n)},get stackTop(){return this.stack[0]},inDOM:function(){return e(t.storyElement).find(this.dom).length>0},evaluateTwineMarkup:function(t,n){var r=e("<p>");this.stack.unshift({desc:f.create({target:r,source:t,section:this,append:"append"}),tempVariables:this.stackTop.tempVariables,evaluateOnly:n,finalIter:!0}),this.execute();var a;return(a=r.find("tw-error")).length>0?a:r},speculate:function(e,t,n){this.stack.unshift({evaluateOnly:n,finalIter:!0,tempVariables:Object.assign(Object.create(d),{TwineScript_VariableStoreName:n}),speculativePassage:t});var r=void 0;return r=p.isPrototypeOf(e)?e.apply(this,{fail:!1,pass:!0}):this.eval(e),this.stack.shift(),r},renderInto:function(t,n,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=f.create({target:n,source:t,section:this,append:"append"});if(r)if(c.isPrototypeOf(r)){var s=r.run(o);if(h.containsError(s))return s.render(n.attr("title")).replaceAll(n),!1}else Object.assign(o,r);if((n=o.target,this.stack.length>=50)&&this.stack.reduce(function(e,t){return e+!!t.finalIter},0)>=50)return h.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(n.attr("title")).replaceAll(n),!1;var u=function(t,r,i){var o=n instanceof e&&n.is("tw-hook")&&n.parents("tw-collapsed,[collapsing=true]").length>0;a.stack.unshift({desc:t,finalIter:i,tempVariables:r,collapses:o,evaluateOnly:a.stackTop&&a.stackTop.evaluateOnly})};if(i||(i=Object.create(this.stack.length?this.stackTop.tempVariables:d)),!i.hasOwnProperty("TwineScript_VariableStoreName")){var l=n&&n.tag();i.TwineScript_VariableStoreName="tw-hook"===l?n.attr("name")?"?"+n.attr("name"):"an unnamed hook":"tw-expression"===l?"a "+n.attr("type")+" expression":"tw-passage"===l?"this passage":"an unknown scope"}return Object.keys(o.loopVars).length?function(){var e=Object.assign({},o.loopVars),t=Math.min.apply(Math,_toConsumableArray(Object.keys(e).map(function(t){return e[t].length})));if(y.create(t+" loop"+(1!==t?"s":"")).render().prependTo(n),t){for(var r=function(n){u(o,Object.keys(e).reduce(function(t,r){return t[r]=e[r][n],t},Object.create(i),n===t-1))},s=t-1;s>=0;s-=1)r(s);for(s=t-1;s>=0&&!a.stackTop.blocked;s-=1)a.execute()}}():(u(o,i,!0),this.execute()),0===this.stack.length&&this.updateEnchantments(),o.enabled},execute:function(){var n=this,r=this.stackTop,i=r.desc,o=r.dom,s=r.collapses,u=r.evaluateOnly;i&&!o&&(o=i.render(),this.stackTop.dom=o,this.stackTop.desc=void 0),o.findAndFilter("tw-hook,tw-expression").each(function(r,i){if(n.stackTop.blocked)return!1;switch((i=e(i)).tag()){case"tw-hook":var o=i.popAttr("source")||"";if(o&&i.data("originalSource",o),i.data("tempVariables",n.stackTop.tempVariables),i.popAttr("hidden")){i.data("hidden",!0);break}o&&n.renderInto(o,i);break;case"tw-expression":if(i.attr("blockers")){if(u)return void i.removeAttr("blockers").removeAttr("js").replaceWith(h.create("syntax","I can't use a macro like (prompt:) or (confirm:) in "+u+".","Please rewrite this without putting such macros here.").render(i.attr("title"),i));var s=[];try{s=JSON.parse(i.popAttr("blockers")),i.data("blockers",s)}catch(e){t.impossible("Section.execute","JSON.parse blockers failed.")}}if(i.data("blockers")){var p=i.data("blockers");if(p.length){n.stackTop.blocked=!0;var d=n.eval(p.shift());return h.containsError(d)&&(n.stackTop.blocked=!1,i.removeData("blockers").replaceWith(d.render(i.attr("title"),i))),!1}i.removeData("blockers")}i.attr("js")&&function(n){var r=this.eval(n.popAttr("js")||"");this.stackTop.evaluateOnly&&r&&(c.isPrototypeOf(r)||"function"==typeof r.TwineScript_Run)&&(r=h.create("syntax","I can't work out what "+this.stackTop.evaluateOnly+" should evaluate to, because it contains a "+(c.isPrototypeOf(r)?"changer.":"command."),"Please rewrite this without putting changers or commands here."));var i=void 0,o=void 0,s=e();for(o=n;c.isPrototypeOf(r);){var u=x(o);if(i=u.whitespace,(o=u.nextElem)[0]instanceof Text&&"+"===o[0].textContent.trim()){var p,d=o,m=x(d);if(p=m.whitespace,(o=m.nextElem).is("tw-expression")){var T=this.eval(o.popAttr("js"));if(h.containsError(T)){r=T;break}var k=a["+"](r,T);e(i).add(d).add(p).remove(),r=h.containsError(k)?h.create("operation","I can't combine "+v(r)+" with "+v(T)+".","function"==typeof T.TwineScript_Run?"If you want to attach this changer to "+v(T)+", remove the + between them.":"Changers can only be added to other changers."):k;continue}}if(o.is("tw-expression")){var O=this.eval(o.popAttr("js"));if(h.containsError(O)){r=O;break}if(O&&"object"===(void 0===O?"undefined":_typeof(O))&&"function"==typeof O.TwineScript_Attach){r=O.TwineScript_Attach(this,r);break}return c.isPrototypeOf(O)?void n.replaceWith(h.create("operation","Changers like ("+r.macroName+":) need to be combined using + between them.","Place the + between the changer macros, or the variables holding them. The + is absent only between a changer and its attached hook or command.").render(n.attr("title"))):void n.replaceWith(h.create("operation",v(O)+" can't have changers like ("+r.macroName+":) attached.","Changers placed just before hooks, links and commands will attempt to attach, but in this case it didn't work.").render(n.attr("title")))}if(o.is("tw-hook")){i.remove(),s=o;break}r.macroName||t.impossible("Section.runExpression","changer has no macroName");var j=n.attr("title")||"("+r.macroName+": ...)";return void n.replaceWith(h.create("syntax","The ("+r.macroName+":) changer should be stored in a variable or attached to a hook.","Macros like this should appear before a hook: "+j+"[Some text]").render(n.attr("title")))}n.attr("return",b(r)),s=s.length?s:x(n).nextElem.filter("tw-hook");var A=void 0;if(A=h.containsError(r))A instanceof Error&&(A=h.fromError(A)),n.replaceWith(A.render(n.attr("title"),n));else if(y.isPrototypeOf(r))n.append(r.render());else if(r&&"function"==typeof r.TwineScript_Run)if(r=r.TwineScript_Run(this),h.containsError(r))n.replaceWith(r.render(n.attr("title")));else if(f.isPrototypeOf(r)){if(r.data&&r.data.live)return void n.replaceWith(h.create("unimplemented","I currently can't attach (live:) or (event:) macros to commands - only hooks.").render(n.attr("title")));r.section=this,r.target=o,this.renderInto("",o,r)}else{if(w(r)&&r.blocked)return this.stackTop.blocked=r.blocked,void n.attr("js","section.blockedValue()");r&&t.impossible("Section.runExpression","TwineScript_Run() returned a non-ChangeDescriptor "+(void 0===r?"undefined":_typeof(r))+': "'+r+'"')}else!s.length&&("string"==typeof r||"number"==typeof r||r instanceof Map||r instanceof Set||Array.isArray(r)||l.isPrototypeOf(r))||r&&"function"==typeof r.TwineScript_Print&&!c.isPrototypeOf(r)?(r=g(r),h.containsError(r)?(r instanceof Error&&(r=h.fromError(r)),n.replaceWith(r.render(n.attr("title")))):"string"!=typeof r?t.impossible("printBuiltinValue() produced a non-string "+(void 0===r?"undefined":_typeof(r))):this.renderInto(r,n)):s.length?S.call(this,n,r,s):c.isPrototypeOf(r)||"boolean"==typeof r||t.impossible("Section.runExpression","The expression evaluated to an unknown value: "+r)}.call(n,i)}}),this.stackTop.blocked||(o.length&&s&&T(o),o.findAndFilter("tw-collapsed,[collapsing=true]").each(function(){T(e(this))}),this.stack.shift())},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})},on:function(e,t){return k[e].push(t),this},addEnchantment:function(e){var t=this;this.enchantments.push(e),k.add.forEach(function(n){return n(t,e)})},removeEnchantment:function(e){var t=this,n=this.enchantments.indexOf(e);this.enchantments.splice(n,1),e.disenchant(),k.remove.forEach(function(n){return n(t,e)})},unblock:function(e){for(this.stack.length||t.impossible("Section.unblock","stack is empty"),this.stackTop.blocked=!1,void 0!==e&&(this.stackTop.blockedValues=(this.stackTop.blockedValues||[]).concat(e));this.stack.length&&!this.stackTop.blocked;)this.execute();if(!this.stack.length)for(;this.unblockCallbacks.length>0;){if(this.unblockCallbacks.shift()(),this.stackTop&&this.stackTop.blocked)return}},whenUnblocked:function(e){this.stack.length&&this.stackTop.blocked?this.unblockCallbacks=this.unblockCallbacks.concat(e):e()},blockedValue:function(){var e=this.stackTop;return e||t.impossible("Section.blockedValue","stack is empty"),e.blockedValues&&e.blockedValues.length||t.impossible("Section.blockedValue","blockedValues is missing or empty"),e.blockedValues.shift()}},Object.preventExtensions(m)}),define("engine",["jquery","utils","state","section","passages"],function(e,t,n,r,a){var i,o=t.escape,s=t.impossible,c=t.passageSelector,u=t.transitionOut,l=Object.create(null);function p(e,t){return"<tw-include type="+e+" name='"+o(t.get("name"))+"'>"+t.get("source")+"</tw-include>"}function f(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.assertOnlyHas(o,["stretch","transition"]);var f=a.get(i),d=t.storyElement,h=d.parent(),y=o.stretch,m=o.transition,g=(m=void 0===m?{}:m).depart,v=void 0===g?"instant":g,b=m.arrive,w=void 0===b?"dissolve":b,T=m.departOrigin,S=m.arriveOrigin,x=m.time;h.findAndFilter("tw-enchantment").each(function(t,n){var r=(n=e(n)).data("enchantedProperties");r&&d.css(r.reduce(function(e,t){return e[t]="",e},{})),n[0]===h[0]&&(h=d.unwrap().parent())}),a.hasValid(i)||s("Engine.showPassage","There's no passage with the name \""+i+'"!');var k,O,j,A,C=d.children(c).not(".transition-out, .transition-out *"),E=(f.get("tags")||[]).join(" "),_=(k=e("<tw-passage><tw-sidebar>"),O=k.children("tw-sidebar"),j=e('<tw-icon tabindex=0 alt="Undo" title="Undo">&#8630;</tw-icon>'),A=e('<tw-icon tabindex=0 alt="Redo" title="Redo">&#8631;</tw-icon>'),n.pastLength<=0&&j.css("visibility","hidden"),n.futureLength<=0&&A.css("visibility","hidden"),O.append(j,A),k);"function"==typeof T&&(T=T.call(C)),"function"==typeof S&&(S=S.call(_)),d.detach(),_.appendTo(d).attr({tags:E}),!y&&v&&(u(C,v,x,0,0,0,T),C.css("position","absolute")),d.attr({tags:E});var N=r.create(_),P=f.get("source");P=a.getTagged("header").map(p.bind(0,"header")).join("")+(l.debug?a.getTagged("debug-header").map(p.bind(0,"debug-header")).join(""):"")+P+a.getTagged("footer").map(p.bind(0,"footer")).join("")+(l.debug?a.getTagged("debug-footer").map(p.bind(0,"debug-footer")).join(""):""),n.pastLength<=0&&(l.debug&&(P=a.getTagged("debug-startup").map(p.bind(0,"debug-startup")).join("")+P),P=a.getTagged("startup").map(p.bind(0,"startup")).join("")+P),N.renderInto(P,_,{transition:w,transitionTime:x,transitionOrigin:S}),h.append(d.parents().length?d.parents().last():d),scroll(0,y?_.offset().top-.05*e(window).height():d.offset().top)}return i={goBack:function(e){n.rewind()&&f(n.passage,e)},goForward:function(e){n.fastForward()&&f(n.passage,e)},goToPassage:function(e,t){n.play(e),f(e,t)},toggleFullscreen:function(){var e=document.documentElement;document.fullscreenElement?document.exitFullscreen():document.msFullscreenElement?document.msExitFullscreen():(e.msRequestFullscreen||e.requestFullscreen).call(e)},showPassage:f,options:l},Object.freeze(i)}),define("debugmode/panel",["jquery"],function(e){return Object.freeze({create:function(t){var n=t.className,r=t.rowWrite,a=t.rowCheck,i=t.columnHead,o=t.tabName,s=t.tabUpdate,c=e("<div class='panel panel-"+n+"' hidden><table class='panel-rows'></table></div>"),u=e("<button class='tab tab-"+n+"'>0 "+o+"s</button>");return u.click(function(){u.toggleClass("enabled"),u.parent().siblings(".panel").attr("hidden",""),u.is(".enabled")&&(u.siblings(".tab:not(.tab-"+n+")").removeClass("enabled"),c.removeAttr("hidden"))}),s||(s=function(e){return u.text(e+" "+o+(1!==e?"s":""))}),Object.assign(Object.create(this),{tabName:o,tab:u,panel:c,panelRows:c.find(".panel-rows"),rowWrite:r,rowCheck:a,columnHead:i,tabUpdate:s})},update:function(t,n){var r=this.rowCheck,a=this.rowWrite,i=this.panelRows,o=this.columnHead,s=[],c=i.children();t.forEach(function(t){var n=c.filter(function(n,a){return r(t,e(a))}),o=a(t,n.length&&n);n.length||i.append(o),s.push.apply(s,_toConsumableArray(o.get()))}),c.filter(function(e,t){return!s.includes(t)&&!t.className.includes("panel-head")}).remove(),this.tabUpdate(n),n>0&&!i.find(".panel-head").length?i.prepend(o()):0===n&&i.find(".panel-head").remove()}})}),define("debugmode/mode",["jquery","utils","state","internaltypes/varref","internaltypes/twineerror","utils/operationutils","engine","passages","section","debugmode/panel"],function(e,t,n,r,a,i,o,s,c,u){var l=t.escape,p=t.nth,f=t.storyElement,d=t.debounce,h=i.objectName,y=i.isObject,m=i.toSource;return function(t,i){var g=e(document.documentElement),v=e("<tw-debugger>\n\t\t<div class='panel panel-errors' hidden><table></table></div>\n\t\t<div class='tabs'></div>\n\t\t<label style='user-select:none'>Turns: </label><select class='turns' disabled></select><button class='show-invisibles'>Debug View</button><button class='show-dom'>DOM View</button>\n\t\t<div class='resizer'>\n\t\t</tw-debugger>"),b=v.find(".tabs"),w=v.find(".show-dom"),T=v.find(".show-invisibles"),S=v.find(".turns");v.find(".resizer").mousedown(function(e){if(1!==e.which)return!0;e.stopPropagation();var t=e.pageX,n=v.width();g.on("mousemove.debugger-resizer",function(e){var r=e.pageX;v.width((n+t-r|0)+"px")}).on("mouseup.debugger-resizer",function(){g.off(".debugger-resizer")})}),T.click(function(){g.toggleClass("debug-mode").removeClass("dom-debug-mode"),T.toggleClass("enabled"),w.removeClass("enabled")}),w.click(function(){g.toggleClass("dom-debug-mode").removeClass("debug-mode"),w.toggleClass("enabled"),T.removeClass("enabled")}),n.timelinePassageNames().forEach(function(e,t){S.append("<option value="+t+">"+(t+1)+": "+e+"</option>")}),S.val(n.pastLength),n.pastLength>0&&S.removeAttr("disabled"),S.change(function(e){var t=e.target.value-n.pastLength;0!==t&&(n[t<0?"rewind":"fastForward"](Math.abs(t)),o.showPassage(n.passage))}),n.on("forward",function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=n.pastLength;a>=1&&S.removeAttr("disabled"),r?(S.find("[selected]").removeAttr("selected"),S.val(a)):(S.children().each(function(t,n){t>=a&&e(n).remove()}),S.append("<option value="+a+">"+(a+1)+": "+t+"</option>").val(a))}).on("back",function(){n.pastLength<=1&&S.attr("disabled"),S.find("[selected]").removeAttr("selected"),S.val(n.pastLength)}).on("load",function(e){S.empty(),S[e.length<=1?"attr":"removeAttr"]("disabled"),e.forEach(function(e,t){return S.append("<option value="+t+">"+(t+1)+": "+e.passage+"</option>")})});var x=new Set,k=u.create({className:"variables",tabName:"Variable",rowWrite:function(t,n){var r=t.name,a=t.dataset,i=t.path,o=t.value,s=t.tempScope,c=t.type,u=o&&o.length>48&&!o.TwineScript_DebugName,p=y(o)&&o.TwineScript_DebugName?o.TwineScript_DebugName():l(h(o).slice(0,48)+(u?"\u2026":"")),f="";i.length&&(f=i.reduce(function(e,t){return e+t+"'s "},"")),a&&(r="???");var d=c?m(c):"",g="object"===(void 0===o?"undefined":_typeof(o))||u;return n?(n.find(".variable-type").html(d?d+"-type ":""),f&&n.find(".variable-path").html((s?"_":"$")+l(f)),n.find(".variable-name").html((f?"":s?"_":"$")+l(r+"")),n.find(".temporary-variable-scope").html(s||""),n.find(".variable-value").html(p),n.find("tw-folddown")[g?"show":"hide"](),n.next(".panel-row-source td").html(g?l(m(o)):""),n.add(n.next(".panel-row-source"))):e('<div class="variable-row">').attr("data-name",r).attr("data-path",i+"").attr("data-scope",s||"").css("padding-left",Math.min(5,i.length)+"em").append("<td class='variable-type'>"+(d?d+"-type ":"")+"</td>","<td class='variable-name'>"+(f?"<span class='variable-path'>"+(s?"_":"$")+l(f)+"</span> ":"")+(f?"":s?"_":"$")+l(r+"")+"</td>","<td class='temporary-variable-scope'>"+(s||"")+"</td>","<td class='variable-value'>"+p+"</td><td class='panel-row-buttons'><tw-folddown tabindex=0 style='display:"+(g?"visible":"none")+"'>(source:) </tw-folddown></td>").add("<tr class='variable-row panel-row-source' style='display:none'><td colspan='5'>"+(g?l(m(o)):"")+"</td></tr>")},rowCheck:function(e,t){var n=e.name,r=e.path,a=e.tempScope;return t.attr("data-name")===n&&t.attr("data-path")===r+""&&t.attr("data-scope")===a},columnHead:function(){return'<tr class="panel-head"><th>Type</th><th>Name</th><th>Scope</th><th>Value</th></tr>'}}),O=d(function(){var e=[],t=n.variables,r=e.length;function a(t){if(!(e.length>500)){e.push(t);var n=t.path.concat(t.name),r=t.value,i=t.tempScope;Array.isArray(r)?r.forEach(function(e,t){return a({name:p(t+1),path:n,value:e,tempScope:i})}):r instanceof Map?[].concat(_toConsumableArray(r)).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],o=t[1];return a({name:r,path:n,value:o,tempScope:i})}):r instanceof Set&&[].concat(_toConsumableArray(r)).forEach(function(e,t){return a({name:t,dataset:!0,path:n,value:e,tempScope:i})})}}for(var i in t)i.startsWith("TwineScript")||(r+=1,a({name:i,path:[],value:t[i],tempScope:"",type:t.TwineScript_TypeDefs&&t.TwineScript_TypeDefs[i]}));e.push.apply(e,_toConsumableArray(x)),r+=x.size,k.update(e,r),k.panel[(r?"remove":"add")+"Class"]("panel-variables-empty")}),j=void 0;r.on("set",function(e,t,r){if(e!==n.variables&&e.TwineScript_VariableStoreName&&!e.TwineScript_VariableStoreName.match(/#\d+$/)){var a=e.TwineScript_VariableStoreName,i=e.TwineScript_TypeDefs&&e.TwineScript_TypeDefs[t],o=[].concat(_toConsumableArray(x)).find(function(e){return e.name===t&&e.tempScope===a});o?o.value=r:x.add({name:t,path:[],value:r,tempScope:a,type:i})}O(),j()}).on("delete",function(){O(),j()}),k.panel.append("<div class='panel-variables-bottom'>\n\t\t\t<button class='panel-variables-copy'>Copy $ variables as (set:) call</button>\n\t\t\t<input class='clipboard' type=\"text\" style='opacity:0;pointer-events:none;position:absolute;'></input>\n\t\t</div>").removeAttr("hidden"),k.tab.addClass("enabled");var A=k.panel.find(".clipboard");g.on("click",".panel-variables-copy",function(){var e=[];for(var t in n.variables)t.startsWith("TwineScript")||e.push("$"+t+" to "+m(n.variables[t]));A.val("(set:"+e+")")[0].select(),document.execCommand("copy")});var C=u.create({className:"enchantments",tabName:"Enchantment",rowWrite:function(t,n){var r=t.scope,a=t.changer,i=t.name,o=t.localHook,s=void 0;return s=a?l(h(a)):"<em>enchanted via ("+i+":)</em>",n||e('<div class="enchantment-row">').data("enchantment",t).append("<td><span class='enchantment-name'>"+m(r)+(o?"</span><span class=enchantment-local>"+("function"==typeof o.TwineScript_ToSource?o.TwineScript_ToSource():o.attr("name")?"?"+o.attr("name"):"an unnamed hook"):"")+"</span></td><td class='enchantment-value'>"+s+"</td>"+(a?"<td class='panel-row-buttons'><tw-folddown tabindex=0>(source:)</tw-folddown></td>":"")).add(a?"<tr class='panel-row-source' style='display:none'><td colspan='3'>"+l(m(a))+"</td></tr>":"")},rowCheck:function(e,t){return t.data("enchantment")===e},columnHead:function(){return'<tr class="panel-head"><th>Scope</th><th>Value</th></div>'}}),E=d(function(e){C.update(e.enchantments,e.enchantments.length)});c.on("add",E).on("remove",E);var _=c.create(f),N=u.create({className:"storylets",tabName:"Storylet",rowWrite:function(t,n){var r=t.name,a=t.active,i=t.storyletSource,o=t.exclusive,s=t.urgent;return n?(n[(a?"remove":"add")+"Class"]("storylet-closed"),n):e('<tr class="storylet-row '+(a?"":"storylet-closed")+'">').attr("data-name",r).append("<td class='storylet-name'>"+r+"</td><td class='storylet-lambda'>"+i+"</td><td class='storylet-exclusive'>"+o+"</td><td class='storylet-urgent'>"+s+"</td>")},rowCheck:function(e,t){var n=e.name;return t.attr("data-name")===l(n+"")},columnHead:function(){return"<tr class=\"panel-head\"><th>Name</th><th>Condition</th><th class='storylet-exclusive'>Exclusivity</th><th class='storylet-urgent'>Urgency</th></tr>"}});N.tab.hide(),j=d(function(){var e=s.getStorylets(_),t=a.containsError(e),n=s.allStorylets();N.update(n.map(function(n){return{name:n.get("name"),storyletSource:n.get("storylet").TwineScript_ToSource(),active:!t&&e.some(function(e){return e.get("name")===n.get("name")}),exclusive:"number"==typeof n.get("exclusivity")?n.get("exclusivity"):0,urgent:"number"==typeof n.get("urgency")?n.get("urgency"):0}}),t?0:e.length),N.panel[(t?"add":"remove")+"Class"]("storylet-error");var r=n.some(function(e){return e.get("exclusivity")&&"number"==typeof e.get("exclusivity")}),i=n.some(function(e){return e.get("urgency")&&"number"==typeof e.get("urgency")});N.panel[(r?"add":"remove")+"Class"]("panel-exclusive"),N.panel[(i?"add":"remove")+"Class"]("panel-urgent"),n.length&&N.tab.show()});var P=u.create({className:"source",tabName:"Source",rowWrite:e.noop,rowCheck:e.noop,tabUpdate:e.noop,columnHead:e.noop});P.tab.text("Source");var I=u.create({className:"errors",tabName:"Error",rowWrite:e.noop,rowCheck:e.noop,columnHead:e.noop,tabUpdate:function(e){return I.tab.css({background:e?"rgba(230,101,204,0.3)":""}).text(e+" Error"+(1!==e?"s":""))}}),M=function(t,r){if("propagated"!==t.type){I.panelRows.children().length>500&&I.panelRows.children(":first-child").remove();var a=e('<tr class="error-row"><td class="error-passage">'+n.passage+'</td><td class="error-message">'+t.message+"</td></tr>");a.find(".error-message").attr("title",r),I.panelRows.append(a),I.tabUpdate(I.panelRows.children().length)}};function D(){if(x=new Set,O(),j(),C.panelRows.empty(),C.tabUpdate(0),n.passage){var e=s.get(n.passage);e&&P.panelRows.text(e.get("source"))}}a.on("error",M),v.prepend(k.panel,C.panel,I.panel,N.panel,P.panel),b.prepend(k.tab,C.tab,I.tab,N.tab,P.tab),n.on("forward",D).on("back",D).on("load",D),t&&(M(t,i),D()),e(document.body).append(v)}}),define("macrolib/values",["macros","utils","utils/operationutils","datatypes/colour","datatypes/gradient","datatypes/datatype","datatypes/hookset","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=t.realWhitespace,u=t.nth,l=t.anyRealLetter,p=n.subset,f=n.objectName,d=n.clone,h=n.toSource,y=e.TypeSignature,m=y.rest,g=y.zeroOrMore,v=y.either,b=y.optional,w=y.insensitiveSet,T=y.numberRange,S=y.percent,x=y.nonNegativeInteger,k=y.positiveInteger,O=y.Any,j=Math.max,A=Math.min,C=Math.round,E=Math.floor,_=Math.ceil;function N(e){return function(){var t=e.apply(void 0,arguments);return"number"!=typeof t||isNaN(t)?s.create("macrocall","This mathematical expression doesn't compute!"):t}}e.add(["str","string","text"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.join("")},[g(e.TypeSignature.either(String,Number,Boolean,Array))])("source",function(e,t){return t&&"command"===t.TwineScript_TypeID&&!t.TwineScript_ToSource?s.create("datatype","I can't construct the source code of a command created by a custom macro."):h(t)},[O])("substring",function(e,t,n,r){return p(t,n,r)},[String,parseInt,parseInt])("lowercase",function(e,t){return t.toLowerCase()},[String])("uppercase",function(e,t){return t.toUpperCase()},[String])("lowerfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words",function(e,t){return t.split(RegExp(c+"+")).filter(Boolean)},[String])(["str-repeated","string-repeated"],function(e,t,n){return 0===n.length?s.create("macrocall","I can't repeat an empty string."):n.repeat(t)},[x,String])(["str-reversed","string-reversed"],function(e,t){return[].concat(_toConsumableArray(t)).reverse().join("")},[String])("joined",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.join(t)},[m(String)])("plural",function(e,t,n,r){return n&&""!==r?t+" "+(1!==Math.abs(t)?r||n+"s":n):s.create("macrocall","The (plural:) macro can't be given empty strings.")},[parseInt,String,b(String)])(["str-nth","string-nth"],function(e,t){return u(t)},[parseInt])(["num","number"],function(e,t){return Number.isNaN(+t)?s.create("macrocall","I couldn't convert "+f(t)+" to a number."):+t},[String])("datatype",function(e,t){return i.from(t)},[O])("datapattern",function(e,t){return function e(t){var n,r=void 0;return Array.isArray(t)?r=t.map(e):t instanceof Map?(r=new Map,[].concat(_toConsumableArray(t)).forEach(function(t){var n=_slicedToArray(t,2),a=n[0],i=n[1];return r.set(a,e(i))})):r=i.from(t),(n=s.containsError(r))?n:r}(t)},[O])(["rgb","rgba"],function(e){return r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[T(0,255),T(0,255),T(0,255),b(S)])(["hsl","hsla"],function(e,t,n,a,i){return(t=C(t)%360)<0&&(t+=360),r.create({h:t,s:n,l:a,a:i})},[Number,S,S,b(S)])(["lch","lcha"],function(e,t,n,a,i){return(a=C(a)%360)<0&&(a+=360),r.create({l:t,c:n,h:a,a:i})},[S,T(0,132),Number,b(S)])("complement",function(e,t){return t.LCHRotate(180)},[r])("palette",function(e,t,n){var a=n.toLCHA(),i=a.l,o={l:i<=.75?.75+i/3:.75-3*(1-i),c:80,h:a.h,a:1},s=void 0,c=void 0,u=void 0;return s=r.create(o),o.l+=i<=.75?-.1:.1,o.l<.5&&(o.l*=.5/o.l),c=r.create(o),o.l+=i<=.85?.15:-.15,u=r.create(o),"adjacent"===t?(c=(s=s.LCHRotate(-30)).LCHRotate(30),u=s.LCHRotate(60)):"triad"===t&&(u=s.LCHRotate(180),c=s.LCHRotate(140),s=s.LCHRotate(-140)),[n,s,c,u]},[w("mono","adjacent","triad"),r])("gradient",function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if((t=C(t)%360)<0&&(t+=360),i.length<4)return s.create("datatype","(gradient:) must be given at least 2 colour-stop pairs of numbers and colours.");var c=void 0,u=[],l=i.reduce(function(e,t){if(s.containsError(e))return e;if(void 0===c)c=t;else{if("number"!=typeof c||!r.isPrototypeOf(t))return s.create("datatype","(gradient:) colour-stops should be pairs of numbers and colours, not colours and numbers.");u.push({stop:c,colour:d(t)}),c=void 0}return e},!0);return s.containsError(l)?l:void 0!==c?s.create("macrocall","This gradient has a colour-stop percent without a colour."):a.create(t,u)},[Number,m(v(S,r))])("stripes",function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];(t=C(t)%360)<0&&(t+=360);var s=0,c=[];return i.forEach(function(e){c.push({stop:s,colour:d(e)}),s+=n,c.push({stop:s,colour:d(e)})}),a.create(t,c,!0)},[Number,k,r,m(r)])("hooks-named",function(e,t){return t?o.create({type:"name",data:t}):s.create("datatype","(hooks-named:) can't be given an empty string.")},[String])("cond",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=2){var n=arguments.length<=t+1?void 0:arguments[t+1];if(t===(arguments.length<=1?0:arguments.length-1)-1||s.containsError(n))return n;if("boolean"!=typeof n)return s.create("datatype","(cond:)'s "+u(t+1)+" value is "+f(n)+", but should be a boolean.");if(n)return arguments.length<=t+1+1?void 0:arguments[t+1+1]}return s.create("macrocall","An odd number of values must be given to (cond:), not "+(arguments.length<=1?0:arguments.length-1),"(cond:) must be given one or more pairs of booleans and values, as well as one final value.")},[Boolean,O,m(O)]),{weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12;return(e.getHours()%12||12)+":"+((e.getMinutes()<10?"0":"")+e.getMinutes())+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[A,m(Number)],max:[j,m(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[E,Number],round:[C,Number],trunc:[function(e){return e>0?E(e):_(e)},Number],ceil:[_,Number],pow:[N(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[N(Math.sqrt),Number],log:[N(Math.log),Number],log10:[N(Math.log10),Number],log2:[N(Math.log2),Number],random:[function(e,t){var n=void 0,r=void 0;return t?(n=A(e,t),r=j(e,t)):(n=0,r=e),r+=1,~~(Math.random()*(r-n))+n},[parseInt,e.TypeSignature.optional(parseInt)]],either:[function(){var e;return e=~~(Math.random()*arguments.length),arguments.length<=e?void 0:arguments[e]},m(O)],nth:[function(e){var t;return e<=0?s.create("datatype","(nth:)'s first value should be a positive whole number, not "+e):(t=(e-1)%(arguments.length<=1?0:arguments.length-1)+1,arguments.length<=t?void 0:arguments[t])},[parseInt,m(O)]],"":function(){var t=this;Object.keys(this).forEach(function(n){if(n){var r=t[n][0],a=t[n][1];e.add(n,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return r.apply(void 0,n)},a)}})}}[""]()}),define("macrolib/commands",["jquery","macros","utils","state","passages","renderer","engine","internaltypes/twineerror","internaltypes/twinenotifier","datatypes/assignmentrequest","datatypes/hookset","datatypes/codehook","datatypes/lambda","datatypes/colour","datatypes/gradient","internaltypes/varref","datatypes/typedvar","datatypes/varbind","utils/operationutils","utils/renderutils"],function(e,t,n,r,a,i,o,s,c,u,l,p,f,d,h,y,m,g,v,b){var w=v.printBuiltinValue,T=v.objectName,S=v.clone,x=v.toSource,k=b.dialog,O=b.geomParse,j=b.geomStringRegExp,A=t.TypeSignature,C=A.Any,E=A.Everything,_=A.rest,N=A.either,P=A.optional,I=A.zeroOrMore,M=A.positiveInteger,D=A.positiveNumber,R=Object.assign,L=Math.floor,F=Math.ceil,q=Math.abs,V=Math.max,H=Math.min,z=e.noop;function W(e){return"("+e+" "+o.options.ifid+") "}["set","put","unpack"].forEach(function(e){return t.add(e,function(t){for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n+=1){var r=arguments.length<=n+1?void 0:arguments[n+1];if("into"===r.operator&&"set"===e)return s.create("macrocall","Please say 'to' when using the (set:) macro.");if("to"===r.operator&&"set"!==e)return s.create("macrocall","Please say 'into' when using the (put:) or (unpack:) macro.");if((y.isPrototypeOf(r.dest)||m.isPrototypeOf(r.dest))===("unpack"===e))return s.create("macrocall","unpack"===e?"Please use the (unpack:) macro with arrays, datamaps or (p:) patterns containing variables to the right of 'into'.":"Please use the ("+e+":) macro with just single variables and typed variables to the "+("set"===e?"left of 'to'.":"right of 'into'."));var a=r.set();if(s.containsError(a))return a}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a ("+e+":) operation",TwineScript_ObjectName:"a ("+e+":) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)])}),t.add("move",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return s.create("macrocall","Please say 'into' when using the (move:) macro.");var r=n.set(!0);if(s.containsError(r))return r}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)]),t.addCommand("display",function(e){if(!a.hasValid(e))return s.create("macrocall","I can't (display:) the passage '"+e+"' because it doesn't exist.")},function(e,t,r){return R(e,{source:n.unescape(a.get(r).get("source"))})},[String])("print",z,function(e,t,n){return R(e,{source:w(n)})},[C])(["verbatim-print","v6m-print"],z,function(e,t,n){return R(e,{verbatim:!0,source:w(n)})},[C])(["verbatim-source","v6m-source"],function(e){if(e&&"command"===e.TwineScript_TypeID&&!e.TwineScript_ToSource)return s.create("datatype","I can't construct the source code of a command created by a custom macro.")},function(e,t,n){return R(e,{verbatim:!0,source:w(x(n))})},[C])("go-to",function(e){if(!a.hasValid(e))return s.create("macrocall","I can't (go-to:) the passage '"+e+"' because it doesn't exist.")},function(e,t,n){return requestAnimationFrame(function(){return o.goToPassage(n,{transition:e.data.passageT8n})}),{blocked:!0}},[String])("undo",z,function(e){return r.pastLength<1?s.create("macrocall","I can't (undo:) on the first turn."):(requestAnimationFrame(function(){return o.goBack({transition:e.data.passageT8n})}),{blocked:!0})},[]),n.onStartup(function(){return e(n.storyElement).on("click.icon","tw-icon",function(t){var n=e(this),a=n.data("clickEvent"),i=n.attr("alt");a&&a(n),"Undo"===i&&(t.stopPropagation(),o.goBack()),"Redo"===i&&(t.stopPropagation(),o.goForward()),"Fullscreen"===i&&(t.stopPropagation(),o.toggleFullscreen()),"Restart"===i&&(r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload())})}),[["Undo","&#8630;",function(){return r.pastLength>0}],["Redo","&#8631;",function(){return r.futureLength>0}],["Fullscreen","&#9974;",function(){return document.fullscreenEnabled||document.msFullscreenEnabled}],["Restart","&#10226;",Object]].forEach(function(e){var n=_slicedToArray(e,3),r=n[0],a=n[1],i=n[2];t.addCommand("icon-"+r.toLowerCase(),function(e,t){if("string"==typeof e&&"string"==typeof t){var n=[].concat(_toConsumableArray(e)).length,a=[].concat(_toConsumableArray(t)).length;if(n>1&&a>1)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 1 character long, for its icon.");if(1===n&&1===a)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 2 or more characters long, for its label.")}},function(e,t,n,o){if("string"==typeof o&&1===[].concat(_toConsumableArray(o)).length||"string"==typeof n&&[].concat(_toConsumableArray(n)).length>1){var s=[o,n];n=s[0],o=s[1]}return R(e,{source:'<tw-icon tabindex=0 alt="'+r+'" '+(o?'data-label="'+o.replace('"',"&quot;")+'"':"")+' title="'+r+'" '+(i()?"":'style="visibility:hidden"')+">"+(n||a)+"</tw-icon>"})},[P(String),P(String)])}),t.addCommand("icon-counter",function(e,t,n){var r=" label string given to (icon-counter:) can't be empty or only whitespace.";return t&&t.trim()?"string"!=typeof n||n.trim()?void 0:s.create("datatype","The 2nd "+r):s.create("datatype","The 1st "+r)},function(e,t,r,a,i){e.attr.push({"data-2bind":!0}),e.data.twoWayBindEvent=function(t,n,o){if(r.varRef.matches(n,o)){var s=r.varRef.get();if("number"==typeof s)e.target.children("tw-icon").text(s>0?L(s):F(s)).attr("data-label",1!==q(s)&&void 0!==i?i:a)}};var o=r.varRef.get();return"number"!=typeof o?s.create("datatype","(icon-counter:) can only be bound to a variable holding a number, not "+T(o)+"."):R(e,{source:'<tw-icon data-label="'+n.escape(1!==q(o)&&void 0!==i?i:a)+'">'+(o>0?L(o):F(o))+"</tw-icon>"})},[g,String,P(String)]),t.addCommand("meter",function(e,t,n,r){return"string"!=typeof r||r.trim()?-1===n.search(j)||!n.includes("=")&&n.length>1?s.create("datatype",'The (meter:) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(n)+"."):void 0:s.create("datatype","The label string given to (meter:) can't be empty or only whitespace.")},function(e,t,n,r,a,i,o){i&&"string"!=typeof i&&(o=i,i=void 0),o||(o=d.create({h:0,s:0,l:.5,a:.5})),d.isPrototypeOf(o)&&(o=h.create(90,[{colour:o,stop:0},{colour:o,stop:1}]));var c=O(a),u=c.marginLeft,l=c.size,p=u>0&&Math.ceil(u+l)<100,f=function(e){var t=V(0,H(1,e/r)),n=o.repeating?o:o.multiply(r/e);return"height:100%;background-repeat:no-repeat;background-image:"+(p?R(n,n.repeating?{}:{angle:270}).toLinearGradientString()+", ":"")+R(n,n.repeating?{}:{angle:p||0===u?90:270}).toLinearGradientString()+";background-size:"+(p?Array(2).fill(50*t+"%"):100*t+"%")+";background-position-x:"+(p?-100/(2-t)+100+"%,"+100/(2-t)+"%":0===u?"left":"right")+";text-align:"+(p?"center":0===u?"left":"right")};e.styles.push({"margin-left":u+"%",width:l+"%",height:"1.5em",display:"block"}),e.attr.push({"data-2bind":!0});var y=i&&t.stackTop.tempVariables;e.data.twoWayBindEvent=function(t,r,a){if(n.varRef.matches(r,a)){var o=n.varRef.get();if("number"==typeof o){var s=e.target.children("tw-meter");s.attr("style",f(o)),i&&e.section.renderInto("",null,{source:i,target:s,append:"replace",transitionDeferred:!1},y)}}};var m=n.varRef.get();return"number"!=typeof m?s.create("datatype","(meter:) can only be bound to a variable holding a number, not "+T(m)+"."):R(e,{source:'<tw-meter style="'+f(m)+'">'+(i||"")+"</tw-meter>"})},[g,D,String,P(N(String,d,h)),P(N(d,h))]),[["cycling-link"],["seq-link","sequence-link"]].forEach(function(e,n){return t.addCommand(e,function(){return""===(arguments.length<=0?void 0:arguments[0])?s.create("datatype","The first string in a ("+e[0]+":) can't be empty."):arguments.length<=(g.isPrototypeOf(arguments.length<=0?void 0:arguments[0])?2:1)?s.create("datatype","I need two or more strings to "+(n?"sequence":"cycle")+" through, not just '"+(t=arguments.length-1,arguments.length<=t?void 0:arguments[t])+"'."):void 0;var t},function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];var o=void 0;g.isPrototypeOf(a[0])&&(o=a.shift());var c=0;if(o&&"two way"===o.bind){e.attr.push({"data-2bind":!0});var u=a.indexOf(o.varRef.get());u>-1&&(c=u)}var l=t.stackTop.tempVariables;function p(t,r){var i=c>=a.length-1&&n,u=""===a[c]?"":i?a[c]:"<tw-link>"+a[c]+"</tw-link>";if(i&&(e.data.clickEvent=void 0),o&&!r){var p=o.set(a[c]);if(s.containsError(p))return void t.replaceWith(p.render(a[c]))}var f=R({},e,{source:u,transitionDeferred:!1});e.section.renderInto("",null,f,l)}a[c]&&(e.data.clickEvent=function(e){c=(c+1)%a.length,p(e,!1)})&&(e.data.twoWayBindEvent=function(e,t,n){if(o.varRef.matches(t,n)){var r=o.varRef.get(),i=a.indexOf(r);i>-1&&i!==c&&(c=i,p(e,!0))}});var f="<tw-link>"+a[c]+"</tw-link>";if(o){var d=o.set(a[c]);if(s.containsError(d))return d}return R(e,{source:f,append:"replace",transitionDeferred:!0})},[N(g,String),_(String)])}),n.onStartup(function(){return e(n.storyElement).on("change.dropdown-macro","select",function(){var t=e(this),n=t.closest("tw-expression, tw-hook").data("dropdownEvent");n&&n(t)})}),t.addCommand("dropdown",function(e){var t;return""===(arguments.length<=1?void 0:arguments[1])||""===(t=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=t?void 0:arguments[t])?s.create("datatype","The first or last strings in a (dropdown:) can't be empty.","Because empty strings create separators within (dropdown:)s, having them at the start or end doesn't make sense."):(arguments.length<=1?0:arguments.length-1)<=1?s.create("datatype","I need two or more strings to create a (dropdown:) menu, not just "+(arguments.length<=1?0:arguments.length-1)+"."):void 0},function(t,r,a){for(var i=arguments.length,o=Array(i>3?i-3:0),c=3;c<i;c++)o[c-3]=arguments[c];var u=0;if("two way"===a.bind){t.attr.push({"data-2bind":!0});var l=o.indexOf(a.varRef.get());l>-1&&(u=l)}var p=Math.max.apply(Math,_toConsumableArray(o.map(function(e){return[].concat(_toConsumableArray(e)).length}))),f="<select>"+o.map(function(e,t){return"<option"+(t===u?" selected":"")+(""===e?" disabled":"")+">"+n.escape(e||"\u2500".repeat(p))+"</option>"}).join("\n")+"</select>";t.data.dropdownEvent=function(e){var t=e.val(),n=a.set(t);s.containsError(n)&&e.replaceWith(n.render(t))},t.data.twoWayBindEvent=function(e,t,n){if(a.varRef.matches(t,n)){var r=a.varRef.get(),i=o.indexOf(r);i>-1&&i!==u&&(e.find("select").val(r),u=i)}},t.styles.push({"background-color":function(){return n.parentColours(e(this)).backgroundColour}});var d=a.set(o[u]);return s.containsError(d)?d:R(t,{source:f,append:"replace"})},[g,String,_(String)]),n.onStartup(function(){return e(n.storyElement).on("input.checkbox-macro","input[type=checkbox]",function(){var t=e(this),n=t.closest("tw-expression").data("checkboxEvent");n&&n(t)})});var $=1;t.addCommand("checkbox",function(){},function(e,t,n,r){var a=!1,i="checkbox-"+ ++$;if("two way"===n.bind){e.attr.push({"data-2bind":!0});var o=n.varRef.get();"boolean"==typeof o&&(a=o),e.data.twoWayBindEvent=function(e,t,r){if(n.varRef.matches(t,r)){var a=n.varRef.get();"boolean"==typeof a&&e.children("input[type=checkbox]").prop("checked",a)}}}return e.data.checkboxEvent=function(e){var t=e.is(":checked"),r=n.set(t);s.containsError(r)&&e.replaceWith(r.render(""))},R(e,{source:'<input id="'+i+'" type="checkbox" '+(a?"checked":"")+'><label for="'+i+'">'+r+"</label>",append:"replace"})},[g,String]),n.onStartup(function(){return e(document).on("fullscreenchange",function(){e("input[type=checkbox][id^=fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression").data("fullscreenEvent")||Object)(n)})})}),t.addCommand("checkbox-fullscreen",function(){},function(t,n,r){var a="fullscreenCheckbox-"+ ++$;return t.data.fullscreenEvent=function(t){return e(t).prop("checked",!(!document.fullscreenElement&&!document.msFullscreenElement))},t.data.checkboxEvent=function(){return o.toggleFullscreen()},R(t,{source:'<input id="'+a+'" type="checkbox" '+(document.fullscreenEnabled||document.msFullscreenEnabled?" ":"disabled ")+(document.fullscreenElement||document.msFullscreenElement?"checked":"")+'><label for="'+a+'">'+r+"</label>",append:"replace"})},[String]),n.onStartup(function(){return e(n.storyElement).on("input.input-box-macro","textarea",function(){var t=e(this),n=t.closest("tw-expression").data("inputBoxEvent");n&&n(t)})}),["input-box","force-input-box"].forEach(function(e){return t.addCommand(e,function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=g.isPrototypeOf(n[0]),i="number"==typeof n[1+a],o="string"==typeof n[1+a+i],c=n[+a];if("string"!=typeof c||-1===c.search(j)||!c.includes("=")&&c.length>1)return s.create("datatype","The ("+e+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(c)+".");if("force-input-box"===e&&!o)return s.create("datatype","The ("+e+":) macro requires a string of text to forcibly input.");var u=1+a+i+o;return n.length>u?s.create("datatype","An incorrect combination of values was given to this ("+e+":) macro."):void 0},function(t,r){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];var c="force-input-box"===e,u=g.isPrototypeOf(i[0]),l="number"==typeof i[1+u],p=u&&i[0],f=l?i[1+u]:3,d=O(i[+u]),h=d.marginLeft,y=d.size,m="string"==typeof i[1+u+l]?i[1+u+l]:"",v=c?"":m;if("two way"===p.bind){t.attr.push({"data-2bind":!0});var b=p.varRef.get();if("string"==typeof b){v=c?m.slice(0,b.length):b;var w=p.set(v);if(s.containsError(w))return w}t.data.twoWayBindEvent=function(e,t,n){if(p.varRef.matches(t,n)){var r=p.varRef.get();"string"==typeof r&&e.find("textarea").val(c?m.slice(0,r.length):r)}}}else if(p){var T=p.set(c?"":m);if(s.containsError(T))return T}!c&&p&&(t.data.inputBoxEvent=function(e){var t=e.val(),n=p.set(t);s.containsError(n)&&e.replaceWith(n.render(""))});var S='<textarea style="width:100%" rows='+f+">"+n.escape(v)+"</textarea>";if(c){var x=Array.from(m);t.data.inputBoxEvent=function(e){var t=e.val().length,n=x.slice(0,t).join("");if(e.val(n),p){var r=p.set(n);s.containsError(r)&&e.replaceWith(r.render(""))}return!0}}return t.styles.push({display:"block","margin-left":h+"%",width:y+"%","border-style":function(){return this.style.borderStyle||"solid"}}),R(t,{source:S,append:"replace"})},[N(g,String),P(N(M,String)),P(N(M,String)),P(String)])}),["show","rerun"].forEach(function(n){return t.addCommand(n,z,function(t,r){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return i.forEach(function(a){return a.forEach(r,function(a){var i=a.data("hidden");if(void 0!==i!=("rerun"===n))if(a.removeData("hidden"),i instanceof e)a.empty().append(i);else{var o=a.data("tempVariables");r.renderInto("",null,R({},t,{append:"replace",source:a.data("originalSource")||"",target:a}),o&&Object.create(o))}})}),t},[_(l)])});var B=function(e){return["I can't use a dialog macro in "+e+".","Please rewrite this without putting such macros here."]};t.addCommand("hide",z,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){return t.forEach(e,function(e){Boolean(e.data("hidden"))||e.data("hidden",e.contents().detach())})})},[_(l)],!1)("stop",z,z,[],!1)("load-game",z,function(e,t){var n=localStorage.getItem(W("Saved Game")+t);if(!n)return s.create("saving","I can't find a save slot named '"+t+"'!");var a=r.deserialise(e,n);if(a instanceof Error){var i=k({message:"Sorry to interrupt... The story tried to load saved data, but there was a problem.\n"+a.message+"\n\nThat data might have been saved from a different version of this story. Should I delete it?\n(Type 'delete' and choose Yes to delete it.)\n\nEither way, the story will now continue without loading the data.",defaultValue:"",buttons:[{name:"Yes",confirm:!0,callback:function(){"delete"===i.find("input").last().val()&&localStorage.removeItem(W("Saved Game")+t),e.unblock("")}},{name:"No",cancel:!0,callback:function(){return e.unblock()}}]});return{blocked:i}}requestAnimationFrame(o.showPassage.bind(o,r.passage,!1))},[String],!1)("mock-visits",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!o.options.debug)return s.create("operation","(mock-visits:) cannot be used outside of debug mode.","This macro is not meant to be used outside of debugging your story.");var r=t.find(function(e){return!a.hasValid(e)});return r?s.create("datatype","I can't mock-visit '"+r+"' because no passage with that name exists."):void 0},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];r.mockVisits=S(n)},[_(String)],!1)(["dialog","alert"],function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(g.isPrototypeOf(e)){if("two way"===e.bind)return s.create("datatype","(dialog:) shouldn't be given two-way bound variables.");if(void 0===t)return s.create("datatype","(dialog:) needs a message string to display.")}else void 0!==t&&a.unshift(t);var o=a.findIndex(function(e){return""===e});if(o>-1)return s.create("datatype","(dialog:)'s "+n.nth(o+1)+" link text shouldn't be an empty string.")},function(e,t,n,r){for(var a=arguments.length,i=Array(a>4?a-4:0),o=4;o<a;o++)i[o-4]=arguments[o];return g.isPrototypeOf(n)||(void 0!==r&&i.unshift(r),r=n,n=void 0),i.length||(i=["OK"]),{blocked:k({section:t,message:r,cd:e,buttons:i.map(function(e){return{name:e,callback:function(){t.unblock(n&&n.set(e)||"")}}})})}},[N(g,String),I(String)])("open-url",z,function(e,t){window.open(t,"")},[String],!1)(["restart","reload"],z,function(){if(r.pastLength<1)return s.create("infinite","I mustn't (restart:) the story in the starting passage.");r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload()},[],!1)("goto-url",z,function(e,t){window.location.assign(t)},[String],!1)("ignore",z,z,[I(E)])("assert-exists",function(e){if(""===e)return s.create("datatype","(assert-exists:) mustn't be given an empty string.")},function(e,t,n){var r=0;return("string"==typeof n?l.create({type:"string",data:n}):n).forEach(t,function(){++r}),r?e:s.create("assertion","I didn't see any "+("string"==typeof n?"text occurrences of":"hooks matching")+" "+x(n)+" in this passage.")},[N(l,String)]),t.add("assert",function(e,t){return t?{TwineScript_TypeID:"instant",TwineScript_TypeName:"an (assert:) operation",TwineScript_ObjectName:"an (assert:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}:R(s.create("assertion","An assertion failed: "),{appendTitleText:!0})},[Boolean])("save-game",function(e,t,n){if(n=n||"",!r.hasStorage)return!1;var a=r.serialise();if(s.containsError(a))return a;if(!1===a)return!1;try{return localStorage.setItem(W("Saved Game")+t,a),localStorage.setItem(W("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,P(String)])("prompt",function(e,t,n,r,a){if(e.stackTop&&e.stackTop.evaluateOnly)return s.create.apply(s,["macrocall"].concat(_toConsumableArray(B(e.stackTop.evaluateOnly))));if(""===a)return s.create("datatype","The text for (prompt:)'s confirm link can't be blank.");var i=k({section:e,message:t,defaultValue:n,buttons:[{name:a||"OK",confirm:!0,callback:function(){return e.unblock(i.find("input").last().val())}}].concat(""===r?[]:{name:r||"Cancel",cancel:!0,callback:function(){return e.unblock(n)}})});e.stackTop.blocked=i,setTimeout(function(){return i.find("input").last().focus()},100)},[String,String,P(String),P(String)])("confirm",function(e,t,n,r){if(e.stackTop&&e.stackTop.evaluateOnly)return s.create.apply(s,["macrocall"].concat(_toConsumableArray(B(e.stackTop.evaluateOnly))));if(""===r)return s.create("datatype","The text for (confirm:)'s confirm link can't be blank.");var a=k({section:e,message:t,defaultValue:!1,buttons:[{name:r||"OK",confirm:!0,callback:function(){return e.unblock(!0)}}].concat(""===n?[]:{name:n||"Cancel",cancel:!0,callback:function(){return e.unblock(!1)}})});e.stackTop.blocked=a},[String,P(String),P(String)])("page-url",function(){return window.location.href},[]),i.options.blockerMacros.push("prompt","confirm")}),define("macrolib/datastructures",["jquery","utils","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/datatype","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=t.shuffled,h=t.permutations,y=a.objectName,m=a.subset,g=a.collectionType,v=a.isValidDatamapName,b=a.is,w=a.unique,T=a.clone,S=a.range,x=r.TypeSignature,k=x.optional,O=x.rest,j=x.either,A=x.zeroOrMore,C=x.Any,E=x.nonNegativeInteger;r.add(["a","array"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n},A(j(l,C)))("range",function(e,t,n){return S(t,n)},[parseInt,parseInt])("subarray",function(e,t,n,r){return m(t,n,r)},[Array,parseInt,parseInt])("reversed",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reverse().map(T)},A(C))("shuffled",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d.apply(void 0,n).map(T)},[C,O(C)])("sorted",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.sort(n("en"))},[j(Number,String),O(j(Number,String))])("rotated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return 0===(t*=-1)?f.create("macrocall","I can't rotate these values by 0 positions."):Math.abs(t)>=r.length?f.create("macrocall","I can't rotate these "+r.length+" values by "+t+" positions."):r.slice(t).concat(r.slice(0,t)).map(T)},[parseInt,C,O(C)])("rotated-to",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);if(f.containsError(i))return i;if(!i.length)return f.create("macrocall","None of these "+r.length+" values matched the lambda, so I can't rotate them.");var o=r.indexOf(i[0]);return r.slice(o).concat(r.slice(0,o)).map(T)},[c.TypeSignature("where"),C,O(C)])("repeated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];for(var i=[];t-- >0;)i.push.apply(i,r);return i.map(T)},[E,O(C)])("interlaced",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=Math.min.apply(Math,_toConsumableArray(n.map(function(e){return e.length}))),i=[],o=0;o<a;o+=1)for(var s=0;s<n.length;s+=1)i.push(T(n[s][o]));return i},[Array,O(Array)])("permutations",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?h.apply(void 0,n):[]},[A(C)]),r.add("altered",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.map(function(n,r){return t.apply(e,{loop:n,pos:r+1})})},[c.TypeSignature("via"),A(C)])("find",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t.filter(e,r)},[c.TypeSignature("where"),A(C)])(["all-pass","pass"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||i.length===r.length},[c.TypeSignature("where"),A(C)])("some-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||i.length>0},[c.TypeSignature("where"),A(C)])("none-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||0===i.length},[c.TypeSignature("where"),A(C)])("folded",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return"where"in t&&(r=t.filter(e,r)),f.containsError(r)||r.reduce(function(n,r,a){return t.apply(e,{making:n,loop:r,pos:a+1})})},[j(c.TypeSignature("where","via","making"),c.TypeSignature("via","making")),O(C)]),r.add("datanames",function(e,t){return Array.from(t.keys()).sort(n("en"))},[Map])("datavalues",function(e,t){return Array.from(t.entries()).sort(n("en",function(e){return String(e[0])})).map(function(e){return T(e[1])})},[Map])("dataentries",function(e,t){return Array.from(t.entries()).sort(function(e,t){return[e[0],t[0]].sort(n("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",T(e[1])]])})},[Map])("history",function(e,t){var n=i.mockVisits.concat(i.pastPassageNames());if(!t)return n;var r=t.filter(e,n.map(function(e){return s.get(e)}));return f.containsError(r)?r:r.map(function(e){return e.get("name")})},[k(c.TypeSignature("where"))])("passage",function(e,t){return T(s.get(t||i.passage))||f.create("macrocall","There's no passage named '"+t+"' in this story.")},[k(String)])("passages",function(e,t){var r=n("en"),a=[].concat(_toConsumableArray(s.values())).map(function(e){return T(e)}),i=t?t.filter(e,a):a,o=f.containsError(i);return o||i.sort(function(e,t){return r(e.get("name"),t.get("name"))})},[k(c.TypeSignature("where"))])("open-storylets",function(e,t){if(e.stackTop.evaluateOnly)return f.create("macrocall","(open-storylets:) can't be used in "+e.stackTop.evaluateOnly+".");var n=s.getStorylets(e,t),r=f.containsError(n);return r||n.map(T)},[k(c.TypeSignature("where"))])("savedgames",function(){function e(e){return"("+e+" "+o.options.ifid+") "}var t=0,n=void 0,r=new Map;do{if(!i.hasStorage)break;n=localStorage.key(t),t+=1;var a=e("Saved Game");n&&n.startsWith(a)&&(n=n.slice(a.length),r.set(n,localStorage.getItem(e("Saved Game Filename")+n)))}while(n);return r},[])(["datamap","dm"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=void 0,i=new Map,o=n.reduce(function(e,t){var n=void 0;if(f.containsError(e))return e;if(void 0===a)a=t;else{if(n=f.containsError(v(i,a)))return n;if(i.has(a))return f.create("macrocall","You used the same data name ("+y(a)+") twice in the same (datamap:) call.");i.set(a,T(t)),a=void 0}return e},!0);return f.containsError(o)?o:void 0!==a?f.create("macrocall","This datamap has a data name without a value."):i},A(j(l,C)))(["dataset","ds"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Set(n.filter(w).map(T))},A(C))("count",function e(t,n){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(a.length>1){var o,s=a.map(function(r){return e(t,n,r)});return(o=f.containsError(s))?o:s.reduce(function(e,t){return e+t},0)}var c=a[0];switch(g(n)){case"dataset":case"datamap":return f.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof c?f.create("macrocall",y(n)+" can't contain  "+y(c)+" because it isn't also a string."):c?n.split(c).length-1:0;case"array":return n.reduce(function(e,t){return e+b(t,c)},0);default:return f.create("macrocall",y(n)+" can't contain values, let alone "+y(c)+".")}},[C,O(C)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/renderutils","datatypes/colour","datatypes/hookset","datatypes/gradient","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l){var p=r.geomParse,f=r.geomStringRegExp,d=Object.assign,h=t.TypeSignature,y=h.either,m=h.wrapped,g=h.optional,v=h.Any,b=h.Everything,w=h.zeroOrMore,T=h.rest,S=h.insensitiveSet,x=h.positiveNumber,k=h.positiveInteger,O=h.nonNegativeNumber,j=h.percent,A=[m(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')];n.onStartup(function(){return e(n.storyElement).on("mouseenter.hover-macro","[hover=false]",function(){var t=e(this),n=t.data("hoverChanger");t.data({mouseoutStyle:t.attr("style")||""}),u.create({target:t},n).update(),t.attr("hover",!0)}).on("mouseleave.hover-macro","[hover=true]",function(){var t=e(this),n=t.data("mouseoutStyle");t.attr("style",n).removeData("mouseoutStyle").attr("hover",!1)})});var C,E,_=S("instant","dissolve","fade","rumble","shudder","pulse","zoom","flicker","slideleft","slideright","slideup","slidedown","fadeleft","faderight","fadeup","fadedown","blur"),N=S("dotted","dashed","solid","double","groove","ridge","inset","outset","none");t.addChanger("if",function(e,t){return s.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},A)("unless",function(e,t){return s.create("unless",[t])},function(e,t){return e.enabled=e.enabled&&!t},A)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?s.create("elseif",[!1===e.stack[0].lastHookShown&&!!t]):l.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},A)("else",function(e){return"lastHookShown"in e.stack[0]?s.create("else",[!1===e.stack[0].lastHookShown]):l.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return s.create("hidden")},function(e){return e.enabled=!1},null)(["verbatim","v6m"],function(){return s.create("verbatim")},function(e){return e.verbatim=!0},null)("live",function(e,t){return s.create("live",[t])},function(e,t){e.enabled=!1,e.data.live={delay:t}},g(Number))("event",function(e,t){return s.create("event",[t])},function(e,t){e.enabled=!1,e.data.live={event:t}},c.TypeSignature("when"))("more",function(){return s.create("more")},function(e){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return 0!==e.eval("Operations").Identifiers.exits?[]:[!0]}}}},null)("after",function(e,t,n){return s.create("after",[t].concat(void 0!==n?[n]:[]))},function(e,t,r){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return n.anyInputDown()&&r&&(t-=r),e.eval("Operations").Identifiers.time>t?[!0]:[]}}}},[x,g(O)])("hook",function(e,t){return t?s.create("hook",[t]):l.create("datatype","(hook:) names can't be empty strings.")},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t.loop?s.create("for",[t].concat(r)):l.create("datatype","The lambda provided to (for:) must refer to a temp variable, not just 'it'.")},function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i,o=t.filter(e.section,r);if(i=l.containsError(o))return i;e.loopVars[t.loop.getName()]=o||[]},[c.TypeSignature("where"),w(v)])(["transition","t8n"],function(e,t){return s.create("transition",[n.insensitiveName(t)])},function(t,r){return t.transition=r,"zoom"===r&&(t.transitionOrigin=function(){var t=e(this).offset(),r=t.left,a=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-a)+"px"}),t},[_])(["transition-time","t8n-time"],function(e,t){return s.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e.data.passageT8n=d(e.data.passageT8n||{},{time:t}),e},[x])(["transition-delay","t8n-delay"],function(e,t){return s.create("transition-delay",[t])},function(e,t){return e.transitionDelay=t,e},[O])(["transition-skip","t8n-skip"],function(e,t){return s.create("transition-skip",[t])},function(e,t){return e.transitionSkip=t,e},[x])(["transition-depart","t8n-depart"],function(e,t){return s.create("transition-depart",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{depart:r}),"zoom"===r&&(t.data.passageT8n.departOrigin=function(){var t=e(this).offset(),r=t.left,a=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-a)+"px"}),t},[_])(["transition-arrive","t8n-arrive"],function(e,t){return s.create("transition-arrive",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{arrive:r}),"zoom"===r&&(t.data.passageT8n.arriveOrigin=function(){var t=e(this),r=t.offset(),a=r.left,i=r.top,o=t.height();return{"transform-origin":100*(n.mouseCoords.x-a)/t.width()+"% "+100*(n.mouseCoords.y-i)/o+"%",height:o+"px"}}),t},[_])("button",function(){return s.create("button",[])},function(e){return e.attr.push({class:function(){return this.className+(this.classList.contains("enchantment-button")?"":" ".repeat(this.className.length>0)+"enchantment-button")}}),e},[])(["border","b4r"],function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return s.create("border",r.map(n.insensitiveName))},function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.styles.push({display:function(){var t=e(this).css("display");return r.every(function(e){return"none"===e})||!t.includes("inline")?t:"inline-block"},"border-style":r.join(" "),"border-width":function(){return this.style.borderWidth||"2px"}}),t},[N].concat(_toConsumableArray(Array(3).fill(g(N)))))(["border-size","b4r-size"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-size",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-width":n.map(function(e){return e+"px"}).join(" ")}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))("corner-radius",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("corner-radius",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-radius":n.map(function(e){return e+"px"}).join(" "),padding:function(){return this.style.padding||n.map(function(e){return e+"px"}).join(" ")}}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))(["border-colour","b4r-colour","border-color","b4r-color"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-colour",n.map(function(e){return a.isPrototypeOf(e)?e.toRGBAString(e):e}))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-color":n.join(" ")}),e},[y(String,a)].concat(_toConsumableArray(Array(3).fill(g(y(String,a))))))("opacity",function(e,t){return s.create("opacity",[t])},function(e,t){return e.styles.push({opacity:t})},[j])("font",function(e,t){return s.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=void 0,r=t.indexOf("><");if(!/^(==+>|<=+|=+><=+|<==+>)$/.test(t))return l.create("datatype",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"');if(~r){var a=Math.round(r/(t.length-2)*50);n=d({"text-align":"center","max-width":"50%"},25===a?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":a+"%"})}else n="<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"};return n.display="inline-block",s.create("align",[n])},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return s.create("text-colour",[t])},function(e,t){return a.isPrototypeOf(t)&&(t=t.toRGBAString(t)),e.styles.push({color:t}),e},[y(String,a)])(["text-size","size"],function(e,t){return s.create("text-size",[t])},function(e,t){return e.styles.push({"font-size":24*t+"px","line-height":36*t+"px"}),e},[O])("text-indent",function(e,t){return s.create("text-indent",[t])},function(e,t){return e.styles.push({"text-indent":t+"px",display:"inline-block"}),e},[O])(["text-rotate-z","text-rotate"],function(e,t){return s.create("text-rotate-z",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" rotate("+n+"deg)"}}),t},[Number])("text-rotate-y",function(e,t){return s.create("text-rotate-y",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateY("+n+"deg)"}}),t},[Number])("text-rotate-x",function(e,t){return s.create("text-rotate-x",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateX("+n+"deg)"}}),t},[Number])(["background","bg"],function(e,t){return s.create("background",[t])},function(t,r){var i=void 0;return a.isPrototypeOf(r)?r=r.toRGBAString(r):o.isPrototypeOf(r)&&(r=r.toLinearGradientString(r)),i=a.isHexString(r)||a.isCSS3Function(r)?{"background-color":r}:r.startsWith("linear-gradient(")||r.startsWith("repeating-linear-gradient(")?{"background-image":r}:{"background-size":"cover","background-image":"url("+r+")"},t.styles.push(i,{display:function(){var t=e(this);return!t.children().length||n.childrenProbablyInline(t)?e(this).css("display"):"block"}}),t},[y(String,a,o)]).apply(void 0,_toConsumableArray((C={color:function(){return"transparent"}},E=d(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},doubleunderline:{"text-decoration":"underline","text-decoration-style":"double"},wavyunderline:{"text-decoration":"underline","text-decoration-style":"wavy"},strike:{"text-decoration":"line-through"},doublestrike:{"text-decoration":"line-through","text-decoration-style":"double"},wavystrike:{"text-decoration":"line-through","text-decoration-style":"wavy"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var t=e(this).css("color");return"-1px -1px 0 "+t+", 1px -1px 0 "+t+",-1px  1px 0 "+t+", 1px  1px 0 "+t}},{color:function(){return n.parentColours(e(this)).backgroundColour}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+e(this).css("color")}},emboss:{"text-shadow":function(){return"0.04em 0.04em 0em "+e(this).css("color")}},smear:[{"text-shadow":function(){var t=e(this).css("color");return"0em   0em 0.02em "+t+",-0.2em 0em  0.5em "+t+", 0.2em 0em  0.5em "+t}},C],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+e(this).css("color")}},C],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+e(this).css("color")},"user-select":"none"},C],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite"},sway:{animation:"sway linear 2.5s 0s infinite"},buoy:{animation:"buoy linear 2.5s 0s infinite"},fidget:{animation:function(){return"fidget step-end 60s "+60*-Math.random()+"s infinite"+(Math.random()<.5?" reverse":"")}}}),["text-style",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return s.create("text-style",r.map(n.insensitiveName))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a+=1)"none"===n[a]?e.styles=[]:e.styles=e.styles.concat(E[n[a]]);return e},[T(S.apply(void 0,_toConsumableArray(Object.keys(E))))]])))("collapse",function(){return s.create("collapse")},function(e){return e.attr.push({collapsing:!0}),e},[])("hover-style",function(e,t){var n=u.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?s.create("hover-style",[t]):l.create("datatype","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:function(e,t){return void 0!==t&&t}}),e},[s])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),s.create("css",[t])},function(t,n){return t.attr.push({style:function(){return(e(this).attr("style")||"")+n}}),t},[String])("test-true",function(){return s.create("test-true",[])},function(e){return e.enabled=!0},w(b))("test-false",function(){return s.create("test-false",[])},function(e){return e.enabled=!1},w(b)),t.addCommand("animate",e.noop,function(e,t,r,a,i){r.forEach(t,function(t){var r=void 0;if("zoom"===name){var o=t.offset(),s=o.left,c=o.top;r=n.mouseCoords.x-s+"px "+(n.mouseCoords.y-c)+"px"}n.transitionIn(t,a,e.transitionTime||i,e.transitionDelay,e.transitionSkip,0,r)})},[T(i),S.apply(void 0,_toConsumableArray(_.innerType.filter(function(e){return"instant"!==e}))),g(x)]),["box","float-box"].forEach(function(r){return t.addChanger(r,function(e,t,n){var a=-1===t.search(f)||t.length>1&&!t.includes("="),i="float-box"===r&&(-1===n.search(f)||n.length>1&&!n.includes("="));return a||i?l.create("datatype","The ("+r+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not "'+(a?t:n)+'".'):s.create(r,[t,n].filter(function(e){return void 0!==e}))},function(t,a,i){var o,s=p(a),c=s.marginLeft,u=s.size,l=void 0;if("float-box"===r){var f=p(i);l=f.marginLeft,i=f.size}var h="box"===r?"%":"vw",y=(_defineProperty(o={display:"block",width:u+h,"max-width":u+h},"box"===r?"margin-left":"left",c+h),_defineProperty(o,"box-sizing","content-box"),_defineProperty(o,"overflow-y","auto"),_defineProperty(o,"padding",function(){var t=e(this).css("padding");return t&&"0px"!==t?t:"1em"}),o);return void 0!==i&&(y.height=i+("box"===r?"em":"vh")),"float-box"===r&&d(y,{position:"fixed",top:l+"vh","background-color":function(){return n.parentColours(e(this)).backgroundColour}}),t.styles.push(y),t},[String,"box"===r?g(k):String])})}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor","datatypes/changercommand","utils/operationutils","internaltypes/twineerror","utils/renderutils"],function(e,t,n,r,a,i,o){var s=a.objectName,c=o.collapse,u={create:function(n){return t.assertOnlyHas(n,["scope","localHook","section","attr","data","changer","functions","lambda","name"]),Object.assign(Object.create(this),{enchantments:e()},n)},enchantScope:function(){var a=this,o=this.attr,u=this.data,l=this.functions,p=this.section,f=this.scope,d=this.localHook,h=this.lambda,y=[];f.forEach(p,function(m,g){if(!d||(d.jquery?d:d.hooks(p)).has(m[0]).length){var v=void 0;if(h)if(v=h.apply(p,{loop:f.TwineScript_GetProperty(g),pos:g+1}),i.containsError(v))m.replaceWith(v.render("")),h=v=null;else if(r.isPrototypeOf(v)){var b=v.summary();(b.includes("newTargets")||b.includes("target"))&&(m.replaceWith(i.create("macrocall","The changer produced by the 'via' lambda given to enchantment macros can't include a revision or enchantment changer like (replace:) or (click:).").render("")),h=v=null)}else m.replaceWith(i.create("macrocall","The 'via' lambda given to enchantment macros must return a changer, not "+s(v)+".").render("")),h=v=null;else v=a.changer;var w=!o&&!u&&(!v||v.summary().every(function(e){return e.startsWith("transition")})),T=w?m:m.wrap("<tw-enchantment>").parent();if(o&&T.attr(o),u&&T.data(u),l&&l.forEach(function(e){return e(T)}),v){var S=n.create({section:p,target:T});if(v.run(S),S.update(),m.is(t.storyElement)){var x=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(S.styles))));m.css(x.reduce(function(e,t){return"background-color"===t||"background-image"===t?e.background="transparent":e[t]="inherit",e},{})),T.data({enchantedProperties:x})}else if(m.is("tw-passage")&&S.styles.some(function(e){return"margin-left"in e||"margin"in e||"margin-right"in e})){var k="padding-left",O="padding-right";t.storyElement.css(k,"0px").css(O,"0px"),T.data({enchantedProperties:[k,O]})}}m.is(t.storyElement)&&T.css({width:"100%",height:"100%"}),"true"===T.attr("collapsing")&&(T.find("[collapsing=false]").each(function(){e(this).removeAttr("collapsing")}),c(T)),w||y.push(T)}}),this.enchantments=e(y)},disenchant:function(){this.enchantments.each(function(){e(this).contents().unwrap();var n=e(this).data("enchantedProperties");n&&t.storyElement.css(n.reduce(function(e,t){return e[t]="",e},{}))})}};return Object.freeze(u)}),define("macrolib/enchantments",["jquery","utils","utils/operationutils","engine","state","passages","macros","datatypes/hookset","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/enchantment","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=n.is,h=o.TypeSignature,y=h.either,m=h.rest,g=h.optional;function v(e,t){if(c.isPrototypeOf(t)){var n=t.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return n.includes(e)}))return f.create("datatype","The changer given to ("+e+":) can't include a revision or enchantment changer like (replace:) or (click:).")}}["enchant","change"].forEach(function(e){o.addCommand(e,function(t,n){var r=v(e,n);if(r)return r},function(t,n,r){var a;n=s.from(n);var i=[];if(c.isPrototypeOf(r)){var o=l.create({section:t});if(r.run(o),(o.innerEnchantments||[]).length>0){var u=o.innerEnchantments.map(function(e){return e(n)});i.push.apply(i,_toConsumableArray(u))}}return i.push(p.create((_defineProperty(a={scope:n},c.isPrototypeOf(r)?"changer":"lambda",r),_defineProperty(a,"section",t),a))),i.forEach(function(n){"enchant"===e?(t.addEnchantment(n),t.updateEnchantments()):n.enchantScope()}),""},[y(s,String),y(c,u.TypeSignature("via"))],!1)}),o.addChanger("enchant-in",function(e,t,n){var r=v("enchant-in",n);return r||c.create("enchant-in",[t,n])},function(e,t,n){return e.innerEnchantments=(e.innerEnchantments||[]).concat(function(r){var a;return p.create((_defineProperty(a={scope:s.from(t),localHook:r},c.isPrototypeOf(n)?"changer":"lambda",n),_defineProperty(a,"section",e.section),a))}),e},[y(s,String),y(c,u.TypeSignature("via"))]),[["link-style",s.create({type:"name",data:"link"})],["line-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"lines",void 0)],["char-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"chars",void 0)]].forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];o.addChanger(n,function(e,t){var r=v(n,t);return r||c.create(n,[t])},function(e,t){return e.innerEnchantments=(e.innerEnchantments||[]).concat(function(n){var a;return p.create((_defineProperty(a={scope:r,localHook:n},c.isPrototypeOf(t)?"changer":"lambda",t),_defineProperty(a,"section",e.section),a))}),e},[y(c,u.TypeSignature("via"))])});var b=["replace","append","prepend"];function w(n,a){return t.onStartup(function(){var r=n.classList.replace(/ /g,"."),a=n.blockClassList?n.blockClassList.replace(/ /g,"."):"",i="."+r+(a?",."+a:"");t.storyElement.on(n.event.map(function(e){return e+".enchantment"}).join(" "),i,function(){var t=e(Array.from(e(this).parents(i).add(this)).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})}),[function(e,t,n){if(!t)return f.create("datatype","A string given to this ("+a+":) macro was empty.");if(n){var r=v(a,n);if(r)return r}return c.create(a,[s.from(t)].concat(n?[n]:[]))},function(e,t,i){e.enabled=!1,e.transitionDeferred=!0,n.rerender&&(e.newTargets=(e.newTargets||[]).concat({target:t,append:n.rerender}));var o=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),s=p.create(_defineProperty({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")||"block"===e.children().css("display")?n.blockClassList:n.classList)}],attr:(n.classList+"").match(/\b(?:link|enchantment-clickblock)\b/)?{tabIndex:"0"}:{},data:{enchantmentEvent:function(){e.section.stackTop&&e.section.stackTop.blocked||(n.once&&e.section.removeEnchantment(s),n.goto?r.goToPassage(n.goto,{transition:n.transition}):n.undo?r.goBack({transition:n.transition}):e.section.renderInto(e.source,null,Object.assign({},e,{enabled:!0,transitionDeferred:!1}),o))}},scope:t,section:e.section,name:a},c.isPrototypeOf(i)?"changer":"lambda",i));return e.section&&(e.section.addEnchantment(s),s.enchantScope()),e},[y(s,String),g(y(c,u.TypeSignature("via")))]]}b.forEach(function(t){o.addChanger(t,function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.every(Boolean)?c.create(t,r.map(s.from)):f.create("datatype","A string given to this ("+t+":) macro was empty.")},function(n){for(var r,a=arguments.length,i=Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return e(n.target).parents().filter("tw-collapsed,[collapsing=true]").length>0||n.attr.some(function(e){return e.collapsing})||(n.attr=[].concat(_toConsumableArray(n.attr),[{collapsing:!1}])),n.newTargets=n.newTargets||[],(r=n.newTargets).push.apply(r,_toConsumableArray(i.filter(function(e){return!n.newTargets.some(function(n){var r=n.target,a=n.append;return d(e,r)&&t===a})}).map(function(e){return{target:e,append:t,before:!0}}))),n},m(y(s,String)))(t+"-with",function(e,n){return c.create(t+"-with",[n])},function(e,n){return e.appendSource=(e.appendSource||[]).concat({source:n,append:t}),e},String)});var T="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,S=[{name:"click",enchantDesc:{event:["click"],once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:["mouseenter",T?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseover",blockClassList:"enchantment-mouseoverblock"}},{name:"mouseout",enchantDesc:{event:["mouseleave",T?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseout",blockClassList:"enchantment-mouseoutblock"}}];S.forEach(function(e){return o.addChanger.apply(o,[e.name].concat(_toConsumableArray(w(e.enchantDesc,e.name))))}),t.onStartup(function(){S.forEach(function(n){var r=n.enchantDesc;r.blockClassList&&t.storyElement.on(r.event.map(function(e){return e+".enchantment"}).join(" "),function(){var t=e(Array.from(e(this).parents("."+r.blockClassList.replace(/ /g,"."))).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})})}),b.forEach(function(e){S.forEach(function(t){var n=Object.assign({},t.enchantDesc,{rerender:e}),r=t.name+"-"+e;o.addChanger.apply(o,[r].concat(_toConsumableArray(w(n,r))))})}),S.forEach(function(e){["goto","undo"].forEach(function(t){var n=e.name+"-"+t;o.addCommand(n,function(e,r){return!e||!r&&"goto"===t?f.create("datatype","A string given to this ("+n+":) macro was empty."):"goto"!==t||i.hasValid(r)?void 0:f.create("macrocall","I can't ("+n+":) the passage '"+r+"' because it doesn't exist.")},function(r,i,o,c){if("undo"===t&&a.pastLength<1)return f.create("macrocall","I can't (undo:) on the first turn.");var u=w(Object.assign({},e.enchantDesc,{transition:r.data.passageT8n},"undo"===t?{undo:!0}:{goto:c}),n);return(0,_slicedToArray(u,2)[1])({section:i},s.from(o)),Object.assign(r,{source:""})},[y(s,String)].concat("undo"===t?[]:String))})})}),define("macrolib/metadata",["macros","renderer","utils/operationutils","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,a){var i=n.clone,o=n.objectName,s=n.isValidDatamapName,c=e.TypeSignature,u=c.zeroOrMore,l=c.Any,p=t.options.metadataMacros,f=function(e){return{TwineScript_TypeName:"a ("+e+":) macro",TwineScript_ObjectName:"a ("+e+":) macro",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}};[["storylet",r.TypeSignature("when")],["urgency",Number],["exclusivity",Number]].forEach(function(t){var n=_slicedToArray(t,2),r=n[0],a=n[1];e.add(r,function(e,t){return e.stackTop.speculativePassage?t:f(r)},a),p.push(r)}),e.add("metadata",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var c=void 0,u=new Map,l=n.reduce(function(e,t){var n=void 0;if(a.containsError(e))return e;if(void 0===c)c=t;else{if(n=a.containsError(s(u,c)))return n;if(u.has(c))return a.create("macrocall","You used the same data name ("+o(c)+") twice in the same (metadata:) call.");u.set(c,i(t)),c=void 0}return e},!0);return a.containsError(l)?l:void 0!==c?a.create("macrocall","This (metadata:) macro has a data name without a value."):e.stackTop.speculativePassage?u:f("storylet")},u(l)),p.push("metadata")}),define("macrolib/patterns",["jquery","macros","utils","utils/operationutils","datatypes/datatype","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,a,i,o){var s=n.anyRealLetter,c=n.anyUppercase,u=n.anyLowercase,l=n.anyCasedLetter,p=n.realWhitespace,f=n.impossible,d=r.objectName,h=r.toSource,y=t.TypeSignature,m=y.rest,g=y.either,v=y.optional,b=y.nonNegativeInteger,w=Object.assign,T=Object.create,S=m(g(String,a,i)),x=function e(t){var n,r=t.name,y=t.fullArgs,m=t.args,g=t.makeRegExpString,v=void 0===g?function(e){return e.join("")}:g,b=t.insensitive,S=void 0!==b&&b,x=t.canContainTypedVars,k=void 0===x||x,O=t.canBeUsedAlone,j=void 0===O||O,A=m||y,C=A.map(function e(t){if(i.isPrototypeOf(t)){if(!k)return o.create("operation","Optional string patterns, like ("+r+":)"+("p-many"===r?" with min 0":"")+", can't have typed variables inside them.");var n=e(t.datatype);return o.containsError(n)?n:"("+n+")"}if(a.isPrototypeOf(t)){if(!k&&"typedVars"in t&&t.typedVars().length)return o.create("operation","("+r+":) can't have typed variables inside its pattern.");if(t.regExp)return(t.rest?"(?:":"")+(S?t.insensitive().regExp:t.regExp)+(t.rest?")*":"");var h=t.name,y=t.rest?"*":"";return"alnum"===h?s+y:"whitespace"===h?p+y:"uppercase"===h?(S?l:c)+y:"lowercase"===h?(S?l:u)+y:"anycase"===h?l+y:"digit"===h?"\\d"+y:"linebreak"===h?"(?:\\r|\\n|\\r\\n)"+y:"str"===h?".*?":["even","odd","int","num"].includes(h)?o.create("datatype","Please use string datatypes like 'digit' in ("+r+":) instead of number datatypes."):o.create("datatype","The ("+r+":) macro must only be given string-related datatypes, not "+d(t)+".")}return"string"==typeof t?(t=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),S&&(t=t.replace(RegExp("("+c+"|"+u+")","g"),function(e){return"["+e.toUpperCase()+e.toLowerCase()+"]"})),t):(f("createPattern","mapper() was given a non-string non-datatype "+t),"")});if(n=o.containsError(C))return n;var E=v(C),_=w(T(a),{name:r,regExp:E,insensitive:function(){return S?_:e({name:r,fullArgs:y,args:A.map(function(e){return a.isPrototypeOf(e)&&"function"==typeof e.insensitive?e.insensitive():e}),makeRegExpString:v,insensitive:!0,canContainTypedVars:k,canBeUsedAlone:j})},typedVars:function(){return A.reduce(function(t,n){return i.isPrototypeOf(n)&&(t=t.concat(S?i.create(e({name:"p-ins",fullArgs:[n.datatype],insensitive:!0}),n.varRef):n),n=n.datatype),a.isPrototypeOf(n)&&"function"==typeof n.typedVars&&(t=t.concat(n.typedVars())),t},[])},destructure:function(t){if("string"!=typeof t)return[o.create("operation","I can't unpack "+d(t)+" into "+this.TwineScript_ToSource()+" because it isn't a string.")];var n=this.typedVars();if(!n.length)return[];var r=(RegExp("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$").exec(t)||[]).slice(1);return r.length?r.map(function(t,r){var a=n[r];if(a)return a.datatype.rest&&!a.datatype.regExp&&((a=a.TwineScript_Clone()).datatype=e({name:"p",fullArgs:[a.datatype]})),{dest:a,value:t||"",src:void 0}}).filter(Boolean):[o.create("operation","I can't unpack "+d(t)+" because it doesn't match the pattern "+this.TwineScript_ToSource()+".")]},TwineScript_IsTypeOf:function(e){return j?"string"==typeof e&&!!e.match("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$"):o.create("operation","A ("+r+":) datatype must only be used with a (p:) macro.")},TwineScript_toTypeSignatureObject:function(){var e=this;return{pattern:"range",name:r,range:function(t){return e.TwineScript_IsTypeOf(t)}}},TwineScript_ToSource:function(){return(this.rest?"...":"")+"("+r+":"+y.map(h)+")"}});return Object.defineProperty(_,"TwineScript_ObjectName",{get:function(){return"a ("+r+":) datatype"}}),_};t.add(["p","pattern"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p",fullArgs:n})},S)(["p-either","pattern-either"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-either",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("|")+")"}})},S)(["p-opt","pattern-opt","p-optional","pattern-optional"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-opt",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("")+")?"}})},S)(["p-not","pattern-not"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.find(function(e){return"string"==typeof e?1!==[].concat(_toConsumableArray(e)).length:e.rest||e.regExp||["str","empty"].includes(e.name)})?o.create("datatype","(p-not:) should only be given single character"):x({name:"p-not",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"[^"+e.map(function(e){return e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1):e}).join("")+"]"}})},S)(["p-many","pattern-many"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=n.slice(),c=void 0,u=void 0;if("number"==typeof n[0]&&(c=n.shift(),u="number"==typeof n[0]?n.shift():1/0),void 0!==u&&u<c)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");if(!n.length)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");var l=n.find(function(e){return"string"!=typeof e&&!a.isPrototypeOf(e)&&!i.isPrototypeOf(e)});return l?o.create("datatype","This (p-many:) macro can only be given a min and max number followed by datatypes or strings, but was also given "+d(l)+"."):x({name:"p-many",args:n,fullArgs:s,canContainTypedVars:c>0,makeRegExpString:function(e){return"(?:"+e.join("")+")"+(void 0!==c?"{"+c+(u===1/0?",":u!==c?","+u:"")+"}":"+")}})},[m(g(b,String,a,i))])(["p-ins","pattern-ins","p-insensitive","pattern-insensitive"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-ins",fullArgs:n,insensitive:!0})},S)(["split","splitted"],function(e,t,n){if(t=x({name:"split",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t))return t;if(!n)return[""];if(!t.regExp)return[].concat(_toConsumableArray(n));for(var r=RegExp(t.regExp),a=[],i=void 0;n&&(i=r.exec(n));){if(i.index+i[0].length===0)return a;a.push(n.slice(0,i.index)),n=n.slice(i.index+i[0].length)}return a.concat(n||[])},[g(String,a),String])("trimmed",function(e,t,n){return void 0===n||a.isPrototypeOf(t)&&"whitespace"===t.name?t.trim():(t=x({name:"trimmed",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t)?t:t.regExp?n.replace(RegExp("^("+t.regExp+")*|("+t.regExp+")*$","g"),""):n)},[g(String,a),v(String)])}),define("macrolib/links",["jquery","macros","utils","state","passages","engine","datatypes/changercommand","internaltypes/changedescriptor","datatypes/hookset","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l){var p=t.TypeSignature,f=p.optional,d=p.rest,h=p.either,y=["Links can't have empty strings for their displayed text.","In the link syntax, a link's displayed text is inside the [[ and ]], and on the non-pointy side of the -> or <- arrow if it's there."],m=Object.assign;function g(e,t,r){r=r||t;var i=a.hasValid(t)&&t===r,o=e.evaluateTwineMarkup(n.unescape(r),"a link's passage name"),s=void 0;if(i){var c=o.children().length>0?"`".repeat((r.match(/`+/)||[]).reduce(function(e,t){return Math.max(e,t.length+1)},1)):"";t=c+"\0".repeat(!!c)+t+"\0".repeat(!!c)+c}else o.findAndFilter("tw-error").length&&(s=o.findAndFilter("tw-error").data("TwineError")),r=o.text();return{text:t,passage:r,error:s}}n.onStartup(function(){e(n.storyElement).on("click.passage-link","tw-link",function(t){var n=e(this),r=n.closest("tw-expression"),a=n.closest("tw-expression, tw-hook"),o=a.data("clickEvent"),s=a.data("section");if(!(s&&s.stackTop&&s.stackTop.blocked)||s.stackTop.blocked instanceof e&&s.stackTop.blocked.find(n).length){if(o){if(n.find("tw-error").length>0)return;return t.stopPropagation(),void o(n)}var c=r.data("linkPassageName"),u=Object.assign({},r.data("passageT8n")||{});return r.find("tw-enchantment").each(function(t,n){Object.assign(u,e(n).data("passageT8n")||{})}),c?(t.stopPropagation(),void i.goToPassage(c,{transition:u})):n.is("[undo]")?(t.stopPropagation(),void i.goBack({transition:u})):n.is("[fullscreen]")?(t.stopPropagation(),void i.toggleFullscreen()):void 0}}),e(document).on("fullscreenchange",function(){e("tw-link[fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression, tw-hook").data("fullscreenEvent")||Object)(n)})})}),[["link","link-replace"],["link-reveal"],["link-repeat"],["link-rerun"]].forEach(function(e){return t.addChanger(e,function(t,n,r){if(!n)return l.create("datatype",y[0]);if(r){var a=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return a.includes(e)}))return l.create("datatype","The changer given to ("+e[0]+":) can't include a revision or enchantment changer like (replace:) or (click:).")}return o.create(e[0],[n].concat(r||[]))},function(t,n,r){var a=e[0],i=t.section&&t.section.stackTop?t.section.stackTop.tempVariables:Object.create(null),o=s.create({source:"<tw-link tabindex=0>"+n+"</tw-link>",target:function(){return t.target},append:"replace",data:{section:t.section,clickEvent:function(e){t.enablers=t.enablers.filter(function(e){return e.descriptor!==o}),"link-reveal"===a&&e.contents().unwrap();var n=e.parentsUntil(":not(tw-enchantment)").parent();if(n.length||(n=e.parent()),"link-rerun"===a){var r=e.parentsUntil(":not(tw-enchantment)");e.detach(),r.remove()}"link"!==a&&"link-rerun"!==a||n.empty(),t.section.renderInto("",null,t,i),"link-rerun"===a&&n.prepend(e)}}});return t.enablers=(t.enablers||[]).concat({descriptor:o,changer:r}),t},[String,f(o)])}),t.addCommand("link-goto",function(e){if(!e)return l.create.apply(l,["datatype"].concat(y))},function(e,t,i,o){var s,c=g(t,i,o);if(i=c.text,o=c.passage,s=c.error)return s;if(e.transition){var u="transition";return l.create("datatype","Please attach ("+u+"-depart:) or ("+u+"-arrive:) to a passage link, not ("+u+":).")}var p=void 0;return a.hasValid(o)||(p='<tw-broken-link passage-name="'+n.escape(o)+'">'+i+"</tw-broken-link>"),p=p||"<tw-link tabindex=0 "+(r.passageNameVisited(o)>0?'class="visited" ':"")+">"+i+"</tw-link>",e.data.linkPassageName=o,e.data.section=t,m(e,{source:p,transitionDeferred:!0})},[String,f(String)])("link-storylet",function(){var e,t=(e=1===arguments.length||"string"!=typeof(arguments.length<=0?void 0:arguments[0])?0:1,arguments.length<=e?void 0:arguments[e]);if(!t||"string"==typeof t)return l.create("datatype","(link-storylet:) should be given one index number or one 'where' lambda, after the optional link text string.")},function(e,t){var n,i,o,s=(n=2+(1==(arguments.length<=2?0:arguments.length-2)?0:3==(arguments.length<=2?0:arguments.length-2)||"string"==typeof(arguments.length<=2?void 0:arguments[2])?1:2),arguments.length<=n?void 0:arguments[n]),c="string"==typeof(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=2?void 0:arguments[2]),p=(i=(arguments.length<=2?0:arguments.length-2)-1+2,(arguments.length<=i?void 0:arguments[i])!==s&&(o=(arguments.length<=2?0:arguments.length-2)-1+2,arguments.length<=o?void 0:arguments[o]));if(e.transition){var f="transition";return l.create("datatype","Please attach ("+f+"-depart:) or ("+f+"-arrive:) to (link-storylet:), not ("+f+":).")}var d=u.isPrototypeOf(s),h=a.getStorylets(t,d&&s),y=l.containsError(h);if(y)return y;var g=h[d?0:s<0?h.length+s:s-1],v=void 0;if(g)g=g.get("name"),c=c||g,v=v||"<tw-link tabindex=0 "+(r.passageNameVisited(g)>0?'class="visited" ':"")+">"+c+"</tw-link>",e.data.linkPassageName=g,e.data.section=t;else{if(!p)return e;v=p}return m(e,{source:v,transitionDeferred:!0})},[h(parseInt,String,u.TypeSignature("where")),f(h(parseInt,String,u.TypeSignature("where"))),f(String)])("link-undo",function(e){if(!e)return l.create("datatype",y[0])},function(e,t,n){return r.pastLength<1?l.create("macrocall","I can't use (link-undo:) on the first turn."):(e.data.section=t,m(e,{source:"<tw-link tabindex=0 undo>"+n+"</tw-link>",transitionDeferred:!0}))},[String])("link-show",function(e){if(!e)return l.create("datatype",y[0])},function(t,n,r){for(var a=arguments.length,i=Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];return t.data.section=n,t.data.clickEvent=function(r){r.contents().unwrap(),i.forEach(function(r){return r.forEach(n,function(r){var a=r.data("originalSource")||"",i=r.data("hidden");if(i)if(r.removeData("hidden"),i instanceof e)r.empty().append(i);else{var o=r.data("tempVariables");n.renderInto("",null,m({},t,{source:a,target:r,transitionDeferred:!1}),o&&Object.create(o))}})})},m(t,{source:"<tw-link tabindex=0>"+r+"</tw-link>",transitionDeferred:!0})},[String,d(c)])("link-fullscreen",function(e,t){if(!e||!t)return l.create("datatype",y[0])},function(e,t,n,r){var a=function(){return document.fullscreenEnabled||document.msFullscreenEnabled?"<tw-link tabindex=0 fullscreen>"+(document.fullscreenElement||document.msFullscreenElement?r:n)+"</tw-link>":r?"<tw-broken-link>"+r+"</tw-broken-link>":""},i=t.stackTop.tempVariables;return e.data.section=t,e.data.fullscreenEvent=function(){(document.fullscreenEnabled||document.msFullscreenEnabled)&&e.data.section.whenUnblocked(function(){var t=m({},e,{append:"replace",source:a(),transitionDeferred:!1});e.section.renderInto("",null,t,i)})},m(e,{source:a(),transitionDeferred:!0})},[String,String,f(String)]),t.addChanger(["link-reveal-goto"],function(e,t,n,r){if(!t)return l.create.apply(l,["datatype"].concat(y));if(o.isPrototypeOf(n)){if(o.isPrototypeOf(r))return l.create("datatype","You mustn't give two changers to (link-reveal-goto:)");r=n,n=void 0}if(r){var a=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return a.includes(e)}))return l.create("datatype","The changer given to (link-reveal-goto:) can't include a revision or enchantment changer like (replace:) or (click:).")}var i=g(e,t,n);return t=i.text,n=i.passage,i.error||o.create("link-reveal-goto",[t,n,r].filter(function(e){return void 0!==e}))},function(e,t,o,c){if(a.hasValid(o)){var u=r.passageNameVisited(o),l=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),p=s.create({source:"<tw-link tabindex=0 "+(u>0?'class="visited" ':"")+">"+t+"</tw-link>",target:e.target,append:"replace",data:{section:e.section,append:"replace",clickEvent:function(t){e.enablers=e.enablers.filter(function(e){return e.descriptor!==p}),t.contents().unwrap(),e.section.renderInto("",null,e,l),e.section.whenUnblocked(function(){return i.goToPassage(o,{transition:e.data.passageT8n})})}}});return e.enablers=(e.enablers||[]).concat({descriptor:p,changer:c}),e}e.source='<tw-broken-link passage-name="'+n.escape(o)+'">'+t+"</tw-broken-link>"},[String,f(h(o,String)),f(o)])}),define("macrolib/custommacros",["utils","macros","state","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/codehook","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c){var u=t.add,l=t.addChanger,p=t.addCommand,f=t.TypeSignature,d=f.rest,h=f.either,y=f.Any,m=r.objectName;u("macro",function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var u=void 0,l=[];for(u=0;u<a.length;u+=1){var p=u===a.length-1;if(s.isPrototypeOf(a[u])===p)return c.create("datatype","The "+(p?"":e.nth(a.length-u+1)+"-")+"last value given to (macro:) should be a "+(p?"code hook":"datatyped variable")+", not "+m(a[u]));if(!p){var f="A custom macro";if(a[u].varRef.object===n.variables)return c.create("datatype",f+"'s typed variables must be temp variables (with a '_'), not global variables (with a '$').","Write them with a _ symbol at the start instead of a $ symbol.");if(a[u].varRef.propertyChain.length>1)return c.create("datatype",f+"'s typed variables can't be properties inside a data structure.");if(a[u].datatype.rest&&u!==a.length-2)return c.create("datatype",f+" can only have one spread variable, and it must be its last variable.");var d=a[u].varRef.propertyChain[0];if(l.includes(d))return c.create("datatype",f+"'s typed variables can't both be named '"+d+"'.");l.push(d)}}return i.create(a.slice(0,-1),a[a.length-1])},[d(h(s,o))]);var g=function(e,t,n){if(!t.some(function(e){if("function"==typeof e.output)return e.output(n),!0}))return c.create("macrocall","("+e+":) should only be used inside a code hook passed to (macro:).")};p(["output-data","out-data"],function(){},function(e,t){var n=e.stack;return g("output-data",n,t)||{blocked:!0}},[y],!1),l(["output","out"],function(e){return Object.assign(a.create("output",[e]))},function(e,t){var n=t.stack,r=t.stackTop;return e.loopVars=Object.keys(r.tempVariables).reduce(function(e,t){return e[t]=[r.tempVariables[t]],e},{}),g("output",n,e),r.blocked=!0,e},[]),p("error",function(e){if(!e)return c.create("datatype","This (error:) macro was given an empty string.")},function(e,t){var n=e.stack;return g("error",n,c.create("user",t))||{blocked:!0}},[String],!1)}),define("repl",["utils","engine","markup","twinescript/compiler","twinescript/environ"],function(e,t,n,r,a){e.onStartup(function(){return setTimeout(function(){t.options.debug&&(window.REPL=function(e){var t=r(n.lex("(print:"+e+")"));console.log(t);var i=a({}).eval(t);return i.TwineScript_Run?i.TwineScript_Run().source:i},window.LEX=function(e){var t=n.lex(e);return 1===t.length?t[0]:t})})})}),require.config({paths:{jquery:"../node_modules/jquery/dist/jquery",almond:"../node_modules/almond/almond","es6-shim":"../node_modules/es6-shim/es6-shim",jqueryplugins:"utils/jqueryplugins",markup:"./markup/markup",lexer:"./markup/lexer",patterns:"./markup/patterns"},deps:["es6-shim","jqueryplugins"]}),require(["jquery","debugmode/mode","renderer","state","section","engine","passages","utils","utils/renderutils","internaltypes/varscope","internaltypes/twineerror","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/metadata","macrolib/patterns","macrolib/links","macrolib/custommacros","repl"],function($,DebugMode,Renderer,State,Section,Engine,Passages,Utils,_ref118,VarScope,TwineError){var dialog=_ref118.dialog;function __HarloweEval(text){return eval(text+"")}var _installHandlers=function(){$(document.documentElement).on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),Engine.options.debug?DebugMode():TwineError.on("error",function(e,t){return!$("tw-debugger").length&&DebugMode(e,t)}),_installHandlers=null},oldOnError;function printJSError(e){var t=e.name+": "+e.message;if(e.stack){var n=e.stack.split("\n"),r=n.findIndex(function(e){return e.includes("__HarloweEval")});t+="\n"+n.slice(0,r).join("\n").replace(/\([^\)]+\)/g,"")}return"<div style='font-family:monospace;overflow-y:scroll;max-height:30vh'>```"+t+"```</div>"}oldOnError=window.onerror,window.onerror=function(e,t,n,r,a){window.onerror=oldOnError,Utils.storyElement.parent().append(dialog({message:"Sorry to interrupt, but this page's code has got itself in a mess.\n\n"+printJSError(a)+"\n(This is probably due to a bug in the Harlowe game engine.)"})),"function"==typeof oldOnError&&oldOnError.apply(void 0,arguments)},Utils.onStartup(function(){var e=$("tw-storydata");if(0!==e.length){var t=e.attr("options");t&&t.split(/\s/).forEach(function(e){Renderer.options[e]=Engine.options[e]=!0});var n=e.attr("startnode");Renderer.options.ifid=Engine.options.ifid=e.attr("ifid"),n||(n=[].reduce.call($("tw-passagedata"),function(e,t){var n=t.getAttribute("pid");return n<e?n:e},1/0)),n=$("tw-passagedata[pid="+n+"]").attr("name"),_installHandlers();var r=!1;$("[role=script]").each(function(e){try{__HarloweEval($(this).html())}catch(t){r||(r=!0,dialog({parent:Utils.storyElement.parent(),message:"There is a problem with this story's "+Utils.nth(e+1)+" script:\n\n"+printJSError(t)}))}}),$("[role=stylesheet]").each(function(e){$(document.head).append('<style data-title="Story stylesheet '+(e+1)+'">'+$(this).html())});var a=Section.create();a.stack=[{tempVariables:Object.create(VarScope)}];var i=Passages.loadMetadata(a);if(i.length){var o=dialog({parent:Utils.storyElement.parent(),message:"These errors occurred when running the `(metadata:)` macro calls in this story's passages:<p></p>"});i.forEach(function(e){return o.find("p").append(e.render(""))})}var s=!Engine.options.debug&&State.hasSessionStorage&&sessionStorage.getItem("Saved Session");s&&!0===State.deserialise(a,s)?Engine.showPassage(State.passage,!1):Engine.goToPassage(n)}})}),define("harlowe",function(){}),require(["harlowe"])}();
</script>

</body>
</html>
